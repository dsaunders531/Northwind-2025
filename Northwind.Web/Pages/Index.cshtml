@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
@section Metas
{
    <link rel="manifest" href="~/manifest.webmanifest" crossorigin="use-credentials">
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
    <p id="message">Check your console!</p>
    @*This is needed for the install me function*@
    <div class="row">
        <div class="col-4 offset-4">
            <button class="btn btn-lg btn-primary" id="install-me">Add to home screen</button>
        </div>
    </div>
</div>

@section Scripts
{
    <script type="text/javascript">
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                var workerpaths = ["/js/service-worker.js", "service-worker.js"];

                for (var i = 0; i < workerpaths.length; i++)
                {
                    navigator.serviceWorker
                        .register(workerpaths[i])
                        .then((registration) => {
                            console.log("Service Worker registered: ", registration);
                        })
                        .catch((registrationError) => {
                            console.error("Service Worker registration failed: ", registrationError);
                        });
                }               
            });
        }
    </script>
         
    <script src="/js/main.js" type="text/javascript"></script>
    <script src="~/installme.js" type="text/javascript"></script>
}
