(self.webpackChunkNorthwind_Web_App=self.webpackChunkNorthwind_Web_App||[]).push([[179],{976:(xs,Ne,k)=>{"use strict";function Q(e){return"function"==typeof e}function G(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const D=G(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function z(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class R{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Q(r))try{r()}catch(o){t=o instanceof D?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{m(o)}catch(s){t=null!=t?t:[],s instanceof D?t=[...t,...s.errors]:t.push(s)}}if(t)throw new D(t)}}add(t){var n;if(t&&t!==this)if(this.closed)m(t);else{if(t instanceof R){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&z(n,t)}remove(t){const{_finalizers:n}=this;n&&z(n,t),t instanceof R&&t._removeParent(this)}}R.EMPTY=(()=>{const e=new R;return e.closed=!0,e})();const y=R.EMPTY;function _(e){return e instanceof R||e&&"closed"in e&&Q(e.remove)&&Q(e.add)&&Q(e.unsubscribe)}function m(e){Q(e)?e():e.unsubscribe()}const F={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$={setTimeout(e,t,...n){const{delegate:r}=$;return null!=r&&r.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=$;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function N(e){$.setTimeout(()=>{const{onUnhandledError:t}=F;if(!t)throw e;t(e)})}function te(){}const q=Z("C",void 0,void 0);function Z(e,t,n){return{kind:e,value:t,error:n}}let de=null;function ee(e){if(F.useDeprecatedSynchronousErrorHandling){const t=!de;if(t&&(de={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=de;if(de=null,n)throw r}}else e()}class X extends R{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,_(t)&&t.add(this)):this.destination=hn}static create(t,n,r){return new ne(t,n,r)}next(t){this.isStopped?yt(function O(e){return Z("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?yt(function B(e){return Z("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?yt(q,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ve=Function.prototype.bind;function we(e,t){return ve.call(e,t)}class Se{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){ke(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){ke(r)}else ke(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){ke(n)}}}class ne extends X{constructor(t,n,r){let i;if(super(),Q(t)||!t)i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0};else{let o;this&&F.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&we(t.next,o),error:t.error&&we(t.error,o),complete:t.complete&&we(t.complete,o)}):i=t}this.destination=new Se(i)}}function ke(e){F.useDeprecatedSynchronousErrorHandling?function ie(e){F.useDeprecatedSynchronousErrorHandling&&de&&(de.errorThrown=!0,de.error=e)}(e):N(e)}function yt(e,t){const{onStoppedNotification:n}=F;n&&$.setTimeout(()=>n(e,t))}const hn={closed:!0,next:te,error:function wt(e){throw e},complete:te},bt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Gt(e){return e}let Le=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function wn(e){return e&&e instanceof X||function Cn(e){return e&&Q(e.next)&&Q(e.error)&&Q(e.complete)}(e)&&_(e)}(n)?n:new ne(n,r,i);return ee(()=>{const{operator:s,source:l}=this;o.add(s?s.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Ft(r))((i,o)=>{const s=new ne({next:l=>{try{n(l)}catch(d){o(d),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[bt](){return this}pipe(...n){return function ot(e){return 0===e.length?Gt:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Ft(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Ft(e){var t;return null!==(t=null!=e?e:F.Promise)&&void 0!==t?t:Promise}const Dn=G(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Pt=(()=>{class e extends Le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new _r(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Dn}next(n){ee(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ee(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ee(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?y:(this.currentObservers=null,o.push(n),new R(()=>{this.currentObservers=null,z(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Le;return n.source=this,n}}return e.create=(t,n)=>new _r(t,n),e})();class _r extends Pt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:y}}function Vn(e){return Q(null==e?void 0:e.lift)}function lt(e){return t=>{if(Vn(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ft(e,t,n,r,i){return new bn(e,t,n,r,i)}class bn extends X{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(l){try{n(l)}catch(d){t.error(d)}}:super._next,this._error=i?function(l){try{i(l)}catch(d){t.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function L(e,t){return lt((n,r)=>{let i=0;n.subscribe(ft(r,o=>{r.next(e.call(t,o,i++))}))})}function Xe(e){return this instanceof Xe?(this.v=e,this):new Xe(e)}function zr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(I){r[I]&&(i[I]=function(U){return new Promise(function(se,he){o.push([I,U,se,he])>1||l(I,U)})})}function l(I,U){try{!function d(I){I.value instanceof Xe?Promise.resolve(I.value.v).then(h,g):b(o[0][2],I)}(r[I](U))}catch(se){b(o[0][3],se)}}function h(I){l("next",I)}function g(I){l("throw",I)}function b(I,U){I(U),o.shift(),o.length&&l(o[0][0],o[0][1])}}function T(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function sn(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(l,d){!function i(o,s,l,d){Promise.resolve(d).then(function(h){o({value:h,done:l})},s)}(l,d,(s=e[o](s)).done,s.value)})}}}const Zi=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Mi(e){return Q(null==e?void 0:e.then)}function Ut(e){return Q(e[bt])}function _t(e){return Symbol.asyncIterator&&Q(null==e?void 0:e[Symbol.asyncIterator])}function Fo(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Fn=function an(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ar(e){return Q(null==e?void 0:e[Fn])}function Ts(e){return zr(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield Xe(n.read());if(i)return yield Xe(void 0);yield yield Xe(r)}}finally{n.releaseLock()}})}function Ms(e){return Q(null==e?void 0:e.getReader)}function ur(e){if(e instanceof Le)return e;if(null!=e){if(Ut(e))return function An(e){return new Le(t=>{const n=e[bt]();if(Q(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Zi(e))return function br(e){return new Le(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Mi(e))return function Rs(e){return new Le(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,N)})}(e);if(_t(e))return Xi(e);if(ar(e))return function Za(e){return new Le(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Ms(e))return function Ao(e){return Xi(Ts(e))}(e)}throw Fo(e)}function Xi(e){return new Le(t=>{(function Xa(e,t){var n,r,i,o;return function Ge(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(g){try{h(r.next(g))}catch(b){s(b)}}function d(g){try{h(r.throw(g))}catch(b){s(b)}}function h(g){g.done?o(g.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(g.value).then(l,d)}h((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=T(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Er(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Tt(e,t,n=1/0){return Q(t)?Tt((r,i)=>L((o,s)=>t(r,o,i,s))(ur(e(r,i))),n):("number"==typeof t&&(n=t),lt((r,i)=>function Ps(e,t,n,r,i,o,s,l){const d=[];let h=0,g=0,b=!1;const I=()=>{b&&!d.length&&!h&&t.complete()},U=he=>h<r?se(he):d.push(he),se=he=>{o&&t.next(he),h++;let Ee=!1;ur(n(he,g++)).subscribe(ft(t,ge=>{null==i||i(ge),o?U(ge):t.next(ge)},()=>{Ee=!0},void 0,()=>{if(Ee)try{for(h--;d.length&&h<r;){const ge=d.shift();s?Er(t,s,()=>se(ge)):se(ge)}I()}catch(ge){t.error(ge)}}))};return e.subscribe(ft(t,U,()=>{b=!0,I()})),()=>{null==l||l()}}(r,i,e,n)))}function li(e=1/0){return Tt(Gt,e)}const lr=new Le(e=>e.complete());function xo(e){return e[e.length-1]}function Ri(e){return function ic(e){return e&&Q(e.schedule)}(xo(e))?e.pop():void 0}function eu(e,t=0){return lt((n,r)=>{n.subscribe(ft(r,i=>Er(r,e,()=>r.next(i),t),()=>Er(r,e,()=>r.complete(),t),i=>Er(r,e,()=>r.error(i),t)))})}function tu(e,t=0){return lt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function nu(e,t){if(!e)throw new Error("Iterable cannot be null");return new Le(n=>{Er(n,t,()=>{const r=e[Symbol.asyncIterator]();Er(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Nt(e,t){return t?function cc(e,t){if(null!=e){if(Ut(e))return function oc(e,t){return ur(e).pipe(tu(t),eu(t))}(e,t);if(Zi(e))return function ac(e,t){return new Le(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Mi(e))return function sc(e,t){return ur(e).pipe(tu(t),eu(t))}(e,t);if(_t(e))return nu(e,t);if(ar(e))return function uc(e,t){return new Le(n=>{let r;return Er(n,t,()=>{r=e[Fn](),Er(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>Q(null==r?void 0:r.return)&&r.return()})}(e,t);if(Ms(e))return function lc(e,t){return nu(Ts(e),t)}(e,t)}throw Fo(e)}(e,t):ur(e)}function a(e){return e<=0?()=>lr:lt((t,n)=>{let r=0;t.subscribe(ft(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function f(e,t,...n){return!0===t?(e(),null):!1===t?null:t(...n).pipe(a(1)).subscribe(()=>e())}function p(e){for(let t in e)if(e[t]===p)return t;throw Error("Could not find renamed property on target object.")}function C(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(C).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function P(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const M=p({__forward_ref__:p});function x(e){return e.__forward_ref__=x,e.toString=function(){return C(this())},e}function A(e){return function V(e){return"function"==typeof e&&e.hasOwnProperty(M)&&e.__forward_ref__===x}(e)?e():e}class H extends Error{constructor(t,n){super(function le(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function oe(e){return"string"==typeof e?e:null==e?"":String(e)}function K(e,t){throw new H(-201,!1)}function ct(e,t){null==e&&function qe(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function Be(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Qt(e){return{providers:e.providers||[],imports:e.imports||[]}}function eo(e){return Pi(e,Gr)||Pi(e,Ni)}function Pi(e,t){return e.hasOwnProperty(t)?e[t]:null}function to(e){return e&&(e.hasOwnProperty(ki)||e.hasOwnProperty(Ns))?e[ki]:null}const Gr=p({\u0275prov:p}),ki=p({\u0275inj:p}),Ni=p({ngInjectableDef:p}),Ns=p({ngInjectorDef:p});var Ue=(()=>((Ue=Ue||{})[Ue.Default=0]="Default",Ue[Ue.Host=1]="Host",Ue[Ue.Self=2]="Self",Ue[Ue.SkipSelf=4]="SkipSelf",Ue[Ue.Optional=8]="Optional",Ue))();let Bn;function Zt(e){const t=Bn;return Bn=e,t}function Dt(e,t,n){const r=eo(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ue.Optional?null:void 0!==t?t:void K(C(e))}function Un(e){return{toString:e}.toString()}var pt=(()=>((pt=pt||{})[pt.OnPush=0]="OnPush",pt[pt.Default=1]="Default",pt))(),mn=(()=>{return(e=mn||(mn={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",mn;var e})();const mt=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),Mo={},gt=[],iu=p({\u0275cmp:p}),fc=p({\u0275dir:p}),hc=p({\u0275pipe:p}),Mp=p({\u0275mod:p}),di=p({\u0275fac:p}),Os=p({__NG_ELEMENT_ID__:p});let UE=0;function Rr(e){return Un(()=>{const n=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===pt.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||gt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||mn.Emulated,id:"c"+UE++,styles:e.styles||gt,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,s=e.features;return i.inputs=kp(e.inputs,r),i.outputs=kp(e.outputs),s&&s.forEach(l=>l(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(Rp).filter(Pp):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map($n).filter(Pp):null,i})}function Rp(e){return St(e)||Hn(e)}function Pp(e){return null!==e}const $E={};function Cr(e){return Un(()=>{const t={type:e.type,bootstrap:e.bootstrap||gt,declarations:e.declarations||gt,imports:e.imports||gt,exports:e.exports||gt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&($E[e.id]=e.type),t})}function kp(e,t){if(null==e)return Mo;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const Ke=Rr;function er(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function St(e){return e[iu]||null}function Hn(e){return e[fc]||null}function $n(e){return e[hc]||null}function dr(e,t){const n=e[Mp]||null;if(!n&&!0===t)throw new Error(`Type ${C(e)} does not have '\u0275mod' property.`);return n}function tr(e){return Array.isArray(e)&&"object"==typeof e[1]}function kr(e){return Array.isArray(e)&&!0===e[1]}function mc(e){return 0!=(8&e.flags)}function uu(e){return 2==(2&e.flags)}function lu(e){return 1==(1&e.flags)}function Nr(e){return null!==e.template}function GE(e){return 0!=(256&e[2])}function so(e,t){return e.hasOwnProperty(di)?e[di]:null}class QE{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Sr(){return Lp}function Lp(e){return e.type.prototype.ngOnChanges&&(e.setInput=XE),ZE}function ZE(){const e=jp(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Mo)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function XE(e,t,n,r){const i=jp(e)||function eC(e,t){return e[Vp]=t}(e,{previous:Mo,current:null}),o=i.current||(i.current={}),s=i.previous,l=this.declaredInputs[n],d=s[l];o[l]=new QE(d&&d.currentValue,t,s===Mo),e[r]=t}Sr.ngInherit=!0;const Vp="__ngSimpleChanges__";function jp(e){return e[Vp]||null}let bc;function qt(e){return!!e.listen}const Bp={createRenderer:(e,t)=>function Ec(){return void 0!==bc?bc:"undefined"!=typeof document?document:void 0}()};function Xt(e){for(;Array.isArray(e);)e=e[0];return e}function Ar(e,t){return Xt(t[e.index])}function Cc(e,t){return e.data[t]}function hr(e,t){const n=t[e];return tr(n)?n:n[0]}function Up(e){return 4==(4&e[2])}function Dc(e){return 64==(64&e[2])}function Li(e,t){return null==t?null:e[t]}function Hp(e){e[18]=0}function Sc(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Ye={lFrame:Qp(null),bindingsEnabled:!0};function qp(){return Ye.bindingsEnabled}function _e(){return Ye.lFrame.lView}function dt(){return Ye.lFrame.tView}function un(){let e=Wp();for(;null!==e&&64===e.type;)e=e.parent;return e}function Wp(){return Ye.lFrame.currentTNode}function Yr(e,t){const n=Ye.lFrame;n.currentTNode=e,n.isParent=t}function Fc(){return Ye.lFrame.isParent}function qn(){const e=Ye.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Lo(){return Ye.lFrame.bindingIndex++}function _C(e,t){const n=Ye.lFrame;n.bindingIndex=n.bindingRootIndex=e,xc(t)}function xc(e){Ye.lFrame.currentDirectiveIndex=e}function Gp(){return Ye.lFrame.currentQueryIndex}function Tc(e){Ye.lFrame.currentQueryIndex=e}function bC(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Jp(e,t,n){if(n&Ue.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&Ue.Host||(i=bC(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;t=i,e=o}const r=Ye.lFrame=Yp();return r.currentTNode=t,r.lView=e,!0}function fu(e){const t=Yp(),n=e[1];Ye.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Yp(){const e=Ye.lFrame,t=null===e?null:e.child;return null===t?Qp(e):t}function Qp(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Zp(){const e=Ye.lFrame;return Ye.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Xp=Zp;function hu(){const e=Zp();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Wn(){return Ye.lFrame.selectedIndex}function Vi(e){Ye.lFrame.selectedIndex=e}function Wt(){const e=Ye.lFrame;return Cc(e.tView,e.selectedIndex)}function pu(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:d,ngAfterViewChecked:h,ngOnDestroy:g}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-n,s),l&&((e.contentHooks||(e.contentHooks=[])).push(n,l),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,l)),d&&(e.viewHooks||(e.viewHooks=[])).push(-n,d),h&&((e.viewHooks||(e.viewHooks=[])).push(n,h),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,h)),null!=g&&(e.destroyHooks||(e.destroyHooks=[])).push(n,g)}}function gu(e,t,n){eg(e,t,3,n)}function mu(e,t,n,r){(3&e[2])===n&&eg(e,t,n,r)}function Mc(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function eg(e,t,n,r){const o=null!=r?r:-1,s=t.length-1;let l=0;for(let d=void 0!==r?65535&e[18]:0;d<s;d++)if("number"==typeof t[d+1]){if(l=t[d],null!=r&&l>=r)break}else t[d]<0&&(e[18]+=65536),(l<o||-1==o)&&(TC(e,n,t,d),e[18]=(4294901760&e[18])+d+2),d++}function TC(e,t,n,r){const i=n[r]<0,o=n[r+1],l=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(l)}finally{}}}else try{o.call(l)}finally{}}class Us{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function vu(e,t,n){const r=qt(e);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],l=n[i++],d=n[i++];r?e.setAttribute(t,l,d,s):t.setAttributeNS(s,l,d)}else{const s=o,l=n[++i];Pc(s)?r&&e.setProperty(t,s,l):r?e.setAttribute(t,s,l):t.setAttribute(s,l),i++}}return i}function tg(e){return 3===e||4===e||6===e}function Pc(e){return 64===e.charCodeAt(0)}function yu(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||ng(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function ng(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const l=e[o++];if("number"==typeof l){if(l===t){s=-1;break}if(l>t){s=o-1;break}}}for(;o<e.length;){const l=e[o];if("number"==typeof l)break;if(l===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function rg(e){return-1!==e}function Vo(e){return 32767&e}function jo(e,t){let n=function NC(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let kc=!0;function _u(e){const t=kc;return kc=e,t}let OC=0;const Qr={};function $s(e,t){const n=Oc(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Nc(r.data,e),Nc(t,null),Nc(r.blueprint,null));const i=wu(e,t),o=e.injectorIndex;if(rg(i)){const s=Vo(i),l=jo(i,t),d=l[1].data;for(let h=0;h<8;h++)t[o+h]=l[s+h]|d[s+h]}return t[o+8]=i,o}function Nc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Oc(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function wu(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=fg(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function bu(e,t,n){!function LC(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Os)&&(r=n[Os]),null==r&&(r=n[Os]=OC++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function sg(e,t,n){if(n&Ue.Optional)return e;K()}function ag(e,t,n,r){if(n&Ue.Optional&&void 0===r&&(r=null),0==(n&(Ue.Self|Ue.Host))){const i=e[9],o=Zt(void 0);try{return i?i.get(t,r,n&Ue.Optional):Dt(t,r,n&Ue.Optional)}finally{Zt(o)}}return sg(r,0,n)}function ug(e,t,n,r=Ue.Default,i){if(null!==e){if(1024&t[2]){const s=function HC(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const l=lg(o,s,n,r|Ue.Self,Qr);if(l!==Qr)return l;let d=o.parent;if(!d){const h=s[21];if(h){const g=h.get(n,Qr,r);if(g!==Qr)return g}d=fg(s),s=s[15]}o=d}return i}(e,t,n,r,Qr);if(s!==Qr)return s}const o=lg(e,t,n,r,Qr);if(o!==Qr)return o}return ag(t,n,r,i)}function lg(e,t,n,r,i){const o=function BC(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Os)?e[Os]:void 0;return"number"==typeof t?t>=0?255&t:UC:t}(n);if("function"==typeof o){if(!Jp(t,e,r))return r&Ue.Host?sg(i,0,r):ag(t,n,r,i);try{const s=o(r);if(null!=s||r&Ue.Optional)return s;K()}finally{Xp()}}else if("number"==typeof o){let s=null,l=Oc(e,t),d=-1,h=r&Ue.Host?t[16][6]:null;for((-1===l||r&Ue.SkipSelf)&&(d=-1===l?wu(e,t):t[l+8],-1!==d&&dg(r,!1)?(s=t[1],l=Vo(d),t=jo(d,t)):l=-1);-1!==l;){const g=t[1];if(cg(o,l,g.data)){const b=jC(l,t,n,s,r,h);if(b!==Qr)return b}d=t[l+8],-1!==d&&dg(r,t[1].data[l+8]===h)&&cg(o,l,t)?(s=g,l=Vo(d),t=jo(d,t)):l=-1}}return i}function jC(e,t,n,r,i,o){const s=t[1],l=s.data[e+8],g=Eu(l,s,n,null==r?uu(l)&&kc:r!=s&&0!=(3&l.type),i&Ue.Host&&o===l);return null!==g?qs(t,s,g,l):Qr}function Eu(e,t,n,r,i){const o=e.providerIndexes,s=t.data,l=1048575&o,d=e.directiveStart,g=o>>20,I=i?l+g:e.directiveEnd;for(let U=r?l:l+g;U<I;U++){const se=s[U];if(U<d&&n===se||U>=d&&se.type===n)return U}if(i){const U=s[d];if(U&&Nr(U)&&U.type===n)return d}return null}function qs(e,t,n,r){let i=e[n];const o=t.data;if(function MC(e){return e instanceof Us}(i)){const s=i;s.resolving&&function S(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new H(-200,`Circular dependency in DI detected for ${e}${n}`)}(function ae(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():oe(e)}(o[n]));const l=_u(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?Zt(s.injectImpl):null;Jp(e,r,Ue.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function IC(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=Lp(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==d&&Zt(d),_u(l),s.resolving=!1,Xp()}}return i}function cg(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function dg(e,t){return!(e&Ue.Self||e&Ue.Host&&t)}class Bo{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return ug(this._tNode,this._lView,t,r,n)}}function UC(){return new Bo(un(),_e())}function fg(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}function Ws(e){return function VC(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(tg(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}}return null}(un(),e)}const Ho="__parameters__";function qo(e,t,n){return Un(()=>{const r=function Vc(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return l.annotation=s,l;function l(d,h,g){const b=d.hasOwnProperty(Ho)?d[Ho]:Object.defineProperty(d,Ho,{value:[]})[Ho];for(;b.length<=g;)b.push(null);return(b[g]=b[g]||[]).push(s),d}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Je{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Be({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const qC=new Je("AnalyzeForEntryComponents");function pr(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),pr(r,t)):t!==e&&t.push(r)}return t}function pi(e,t){e.forEach(n=>Array.isArray(n)?pi(n,t):t(n))}function pg(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Cu(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Js={},Hc="__NG_DI_FLAG__",Su="ngTempTokenPath",tD=/\n/gm,yg="__source";let Ys;function Fu(e){const t=Ys;return Ys=e,t}function rD(e,t=Ue.Default){if(void 0===Ys)throw new H(-203,!1);return null===Ys?Dt(e,void 0,t):Ys.get(e,t&Ue.Optional?null:void 0,t)}function Te(e,t=Ue.Default){return(function ci(){return Bn}()||rD)(A(e),t)}function $c(e){const t=[];for(let n=0;n<e.length;n++){const r=A(e[n]);if(Array.isArray(r)){if(0===r.length)throw new H(900,!1);let i,o=Ue.Default;for(let s=0;s<r.length;s++){const l=r[s],d=oD(l);"number"==typeof d?-1===d?i=l.token:o|=d:i=l}t.push(Te(i,o))}else t.push(Te(r))}return t}function Qs(e,t){return e[Hc]=t,e.prototype[Hc]=t,e}function oD(e){return e[Hc]}const Au=Qs(qo("Inject",e=>({token:e})),-1),gi=Qs(qo("Optional"),8),Zs=Qs(qo("SkipSelf"),4);class Tg{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const xD=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ID=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var en=(()=>((en=en||{})[en.NONE=0]="NONE",en[en.HTML=1]="HTML",en[en.STYLE=2]="STYLE",en[en.SCRIPT=3]="SCRIPT",en[en.URL=4]="URL",en[en.RESOURCE_URL=5]="RESOURCE_URL",en))();function Yc(e){const t=function ra(){const e=_e();return e&&e[12]}();return t?t.sanitize(en.URL,e)||"":function ta(e,t){const n=function DD(e){return e instanceof Tg&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}(e,"URL")?function Bi(e){return e instanceof Tg?e.changingThisBreaksApplicationSecurity:e}(e):function Ru(e){return(e=String(e)).match(xD)||e.match(ID)?e:"unsafe:"+e}(oe(e))}function Zc(e){return e.ngOriginalError}class Go{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Zc(t);for(;n&&Zc(n);)n=Zc(n);return n||null}}const Xc=new Map;let QD=0;const td="__ngContext__";function Pn(e,t){tr(t)?(e[td]=t[20],function XD(e){Xc.set(e[20],e)}(t)):e[td]=t}function ia(e){const t=e[td];return"number"==typeof t?function Bg(e){return Xc.get(e)||null}(t):t||null}function nd(e){const t=ia(e);return t?tr(t)?t:t.lView:null}const uS=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(mt))();function mi(e){return e instanceof Function?e():e}var mr=(()=>((mr=mr||{})[mr.Important=1]="Important",mr[mr.DashCase=2]="DashCase",mr))();function id(e,t){return undefined(e,t)}function oa(e){const t=e[3];return kr(t)?t[3]:t}function od(e){return Jg(e[13])}function sd(e){return Jg(e[4])}function Jg(e){for(;null!==e&&!kr(e);)e=e[4];return e}function Yo(e,t,n,r,i){if(null!=r){let o,s=!1;kr(r)?o=r:tr(r)&&(s=!0,r=r[0]);const l=Xt(r);0===e&&null!==n?null==i?tm(t,n,l):ao(t,n,l,i||null,!0):1===e&&null!==n?ao(t,n,l,i||null,!0):2===e?function lm(e,t,n){const r=ku(e,t);r&&function CS(e,t,n,r){qt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,l,s):3===e&&t.destroyNode(l),null!=o&&function FS(e,t,n,r,i){const o=n[7];o!==Xt(n)&&Yo(t,e,r,o,i);for(let l=10;l<n.length;l++){const d=n[l];sa(d[1],d,e,t,r,o)}}(t,e,o,n,i)}}function ud(e,t,n){if(qt(e))return e.createElement(t,n);{const r=null!==n?function iC(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?e.createElement(t):e.createElementNS(r,t)}}function Qg(e,t){const n=e[9],r=n.indexOf(t),i=t[3];512&t[2]&&(t[2]&=-513,Sc(i,-1)),n.splice(r,1)}function ld(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Qg(i,r),t>0&&(e[n-1][4]=r[4]);const o=Cu(e,10+t);!function gS(e,t){sa(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Zg(e,t){if(!(128&t[2])){const n=t[11];qt(n)&&n.destroyNode&&sa(e,t,n,3,null,null),function yS(e){let t=e[13];if(!t)return cd(e[1],e);for(;t;){let n=null;if(tr(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)tr(t)&&cd(t[1],t),t=t[3];null===t&&(t=e),tr(t)&&cd(t[1],t),n=t&&t[4]}t=n}}(t)}}function cd(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function ES(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof Us)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const l=i[o[s]],d=o[s+1];try{d.call(l)}finally{}}else try{o.call(i)}finally{}}}}(e,t),function bS(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],l="function"==typeof s?s(t):Xt(t[s]),d=r[i=n[o+2]],h=n[o+3];"boolean"==typeof h?l.removeEventListener(n[o],d,h):h>=0?r[i=h]():r[i=-h].unsubscribe(),o+=2}else{const s=r[i=n[o+1]];n[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();t[7]=null}}(e,t),1===t[1].type&&qt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&kr(t[3])){n!==t[3]&&Qg(n,t);const r=t[19];null!==r&&r.detachView(e)}!function eS(e){Xc.delete(e[20])}(t)}}function Xg(e,t,n){return function em(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===mn.None||i===mn.Emulated)return null}return Ar(r,n)}(e,t.parent,n)}function ao(e,t,n,r,i){qt(e)?e.insertBefore(t,n,r,i):(rm(t)?t.content:t).insertBefore(n,r,i)}function tm(e,t,n){qt(e)?e.appendChild(t,n):(rm(t)?t.content:t).appendChild(n)}function nm(e,t,n,r,i){null!==r?ao(e,t,n,r,i):tm(e,t,n)}function rm(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}function ku(e,t){return qt(e)?e.parentNode(t):t.parentNode}let sm=function om(e,t,n){return 40&e.type?Ar(e,n):null};function Nu(e,t,n,r){const i=Xg(e,r,t),o=t[11],l=function im(e,t,n){return sm(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let d=0;d<n.length;d++)nm(o,i,n[d],l,!1);else nm(o,i,n,l,!1)}function Ou(e,t){if(null!==t){const n=t.type;if(3&n)return Ar(t,e);if(4&n)return fd(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Ou(e,r);{const i=e[t.index];return kr(i)?fd(-1,i):Xt(i)}}if(32&n)return id(t,e)()||Xt(e[t.index]);{const r=um(e,t);return null!==r?Array.isArray(r)?r[0]:Ou(oa(e[16]),r):Ou(e,t.next)}}return null}function um(e,t){return null!==t?e[16][6].projection[t.projection]:null}function fd(e,t){const n=10+e+1;if(n<t.length){const r=t[n],i=r[1].firstChild;if(null!==i)return Ou(r,i)}return t[7]}function hd(e,t,n,r,i,o,s){for(;null!=n;){const l=r[n.index],d=n.type;if(s&&0===t&&(l&&Pn(Xt(l),r),n.flags|=4),64!=(64&n.flags))if(8&d)hd(e,t,n.child,r,i,o,!1),Yo(t,e,i,l,o);else if(32&d){const h=id(n,r);let g;for(;g=h();)Yo(t,e,i,g,o);Yo(t,e,i,l,o)}else 16&d?cm(e,t,r,n,i,o):Yo(t,e,i,l,o);n=s?n.projectionNext:n.next}}function sa(e,t,n,r,i,o){hd(n,r,e.firstChild,t,i,o,!1)}function cm(e,t,n,r,i,o){const s=n[16],d=s[6].projection[r.projection];if(Array.isArray(d))for(let h=0;h<d.length;h++)Yo(t,e,i,d[h],o);else hd(e,t,d,s[3],i,o,!0)}function dm(e,t,n){qt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function pd(e,t,n){qt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function fm(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}const hm="ng-template";function xS(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==fm(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function pm(e){return 4===e.type&&e.value!==hm}function IS(e,t,n){return t===(4!==e.type||n?e.value:hm)}function TS(e,t,n){let r=4;const i=e.attrs||[],o=function PS(e){for(let t=0;t<e.length;t++)if(tg(e[t]))return t;return e.length}(i);let s=!1;for(let l=0;l<t.length;l++){const d=t[l];if("number"!=typeof d){if(!s)if(4&r){if(r=2|1&r,""!==d&&!IS(e,d,n)||""===d&&1===t.length){if(Or(r))return!1;s=!0}}else{const h=8&r?d:t[++l];if(8&r&&null!==e.attrs){if(!xS(e.attrs,h,n)){if(Or(r))return!1;s=!0}continue}const b=MS(8&r?"class":d,i,pm(e),n);if(-1===b){if(Or(r))return!1;s=!0;continue}if(""!==h){let I;I=b>o?"":i[b+1].toLowerCase();const U=8&r?I:null;if(U&&-1!==fm(U,h,0)||2&r&&h!==I){if(Or(r))return!1;s=!0}}}}else{if(!s&&!Or(r)&&!Or(d))return!1;if(s&&Or(d))continue;s=!1,r=d|1&r}}return Or(r)||s}function Or(e){return 0==(1&e)}function MS(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let l=t[++i];for(;"string"==typeof l;)l=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function kS(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function gm(e,t,n=!1){for(let r=0;r<t.length;r++)if(TS(e,t[r],n))return!0;return!1}function mm(e,t){return e?":not("+t.trim()+")":t}function OS(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const l=e[++n];i+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Or(s)&&(t+=mm(o,i),i=""),r=s,o=o||!Or(r);n++}return""!==i&&(t+=mm(o,i)),t}const Qe={};function xt(e){vm(dt(),_e(),Wn()+e,!1)}function vm(e,t,n,r){if(!r)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&gu(t,o,n)}else{const o=e.preOrderHooks;null!==o&&mu(t,o,0,n)}Vi(n)}const bm=new Je("ENVIRONMENT_INITIALIZER"),Em=new Je("INJECTOR_DEF_TYPES");function qS(...e){return{\u0275providers:Cm(0,e)}}function Cm(e,...t){const n=[],r=new Set;let i;return pi(t,o=>{const s=o;gd(s,n,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&Dm(i,n),n}function Dm(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];pi(i,o=>{t.push(o)})}}function gd(e,t,n,r){if(!(e=A(e)))return!1;let i=null,o=to(e);const s=!o&&St(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const d=e.ngModule;if(o=to(d),!o)return!1;i=d}const l=r.has(i);if(s){if(l)return!1;if(r.add(i),s.dependencies){const d="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const h of d)gd(h,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!l){let h;r.add(i);try{pi(o.imports,g=>{gd(g,t,n,r)&&(h||(h=[]),h.push(g))})}finally{}void 0!==h&&Dm(h,t)}if(!l){const h=so(i)||(()=>new i);t.push({provide:i,useFactory:h,deps:gt},{provide:Em,useValue:i,multi:!0},{provide:bm,useValue:()=>Te(i),multi:!0})}const d=o.providers;null==d||l||pi(d,g=>{t.push(g)})}}return i!==e&&void 0!==e.providers}const WS=p({provide:String,useValue:p});function md(e){return null!==e&&"object"==typeof e&&WS in e}function uo(e){return"function"==typeof e}const vd=new Je("INJECTOR",-1);class Am{get(t,n=Js){if(n===Js){const r=new Error(`NullInjectorError: No provider for ${C(t)}!`);throw r.name="NullInjectorError",r}return n}}const yd=new Je("Set Injector scope."),Lu={},KS={};let _d;function wd(){return void 0===_d&&(_d=new Am),_d}class lo{}class xm extends lo{constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ed(t,s=>this.processProvider(s)),this.records.set(vd,Qo(void 0,this)),i.has("environment")&&this.records.set(lo,Qo(void 0,this));const o=this.records.get(yd);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Em.multi,gt,Ue.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}get(t,n=Js,r=Ue.Default){this.assertNotDestroyed();const i=Fu(this),o=Zt(void 0);try{if(!(r&Ue.SkipSelf)){let l=this.records.get(t);if(void 0===l){const d=function ZS(e){return"function"==typeof e||"object"==typeof e&&e instanceof Je}(t)&&eo(t);l=d&&this.injectableDefInScope(d)?Qo(bd(t),Lu):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(r&Ue.Self?wd():this.parent).get(t,n=r&Ue.Optional&&n===Js?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Su]=s[Su]||[]).unshift(C(t)),i)throw s;return function sD(e,t,n,r){const i=e[Su];throw t[yg]&&i.unshift(t[yg]),e.message=function aD(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=C(t);if(Array.isArray(t))i=t.map(C).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let l=t[s];o.push(s+":"+("string"==typeof l?JSON.stringify(l):C(l)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(tD,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Su]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{Zt(o),Fu(i)}}resolveInjectorInitializers(){const t=Fu(this),n=Zt(void 0);try{const r=this.get(bm.multi,gt,Ue.Self);for(const i of r)i()}finally{Fu(t),Zt(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(C(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(t){let n=uo(t=A(t))?t:A(t&&t.provide);const r=function JS(e){return md(e)?Qo(void 0,e.useValue):Qo(function Im(e,t,n){let r;if(uo(e)){const i=A(e);return so(i)||bd(i)}if(md(e))r=()=>A(e.useValue);else if(function Fm(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...$c(e.deps||[]));else if(function Sm(e){return!(!e||!e.useExisting)}(e))r=()=>Te(A(e.useExisting));else{const i=A(e&&(e.useClass||e.provide));if(!function YS(e){return!!e.deps}(e))return so(i)||bd(i);r=()=>new i(...$c(e.deps))}return r}(e),Lu)}(t);if(uo(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Qo(void 0,Lu,!0),i.factory=()=>$c(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Lu&&(n.value=KS,n.value=n.factory()),"object"==typeof n.value&&n.value&&function QS(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=A(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function bd(e){const t=eo(e),n=null!==t?t.factory:so(e);if(null!==n)return n;if(e instanceof Je)throw new H(204,!1);if(e instanceof Function)return function GS(e){const t=e.length;if(t>0)throw function Gs(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new H(204,!1);const n=function cr(e){const t=e&&(e[Gr]||e[Ni]);if(t){const n=function Xn(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new H(204,!1)}function Qo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function XS(e){return!!e.\u0275providers}function Ed(e,t){for(const n of e)Array.isArray(n)?Ed(n,t):XS(n)?Ed(n.\u0275providers,t):t(n)}function Tm(e,t=null,n=null,r){const i=Mm(e,t,n,r);return i.resolveInjectorInitializers(),i}function Mm(e,t=null,n=null,r,i=new Set){const o=[n||gt,qS(e)];return r=r||("object"==typeof e?void 0:C(e)),new xm(o,t||wd(),r||null,i)}let Kn=(()=>{class e{static create(n,r){var i;if(Array.isArray(n))return Tm({name:""},r,n,"");{const o=null!==(i=n.name)&&void 0!==i?i:"";return Tm({name:o},n.parent,n.providers,o)}}}return e.THROW_IF_NOT_FOUND=Js,e.NULL=new Am,e.\u0275prov=Be({token:e,providedIn:"any",factory:()=>Te(vd)}),e.__NG_ELEMENT_ID__=-1,e})();function ye(e,t=Ue.Default){const n=_e();return null===n?Te(e,t):ug(un(),n,A(e),t)}function Ad(){throw new Error("invalid")}function Qm(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const s=e.data[o];Tc(i),s.contentQueries(2,t[o],o)}}}function aa(e,t,n,r,i,o,s,l,d,h,g){const b=t.blueprint.slice();return b[0]=i,b[2]=76|r,(null!==g||e&&1024&e[2])&&(b[2]|=1024),Hp(b),b[3]=b[15]=e,b[8]=n,b[10]=s||e&&e[10],b[11]=l||e&&e[11],b[12]=d||e&&e[12]||null,b[9]=h||e&&e[9]||null,b[6]=o,b[20]=function ZD(){return QD++}(),b[21]=g,b[16]=2==t.type?e[16]:b,b}function Xo(e,t,n,r,i){let o=e.data[t];if(null===o)o=function Hd(e,t,n,r,i){const o=Wp(),s=Fc(),d=e.data[t]=function M1(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=d),null!==o&&(s?null==o.child&&null!==d.parent&&(o.child=d):null===o.next&&(o.next=d)),d}(e,t,n,r,i),function yC(){return Ye.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Bs(){const e=Ye.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Yr(o,!0),o}function es(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function ua(e,t,n){fu(t);try{const r=e.viewQuery;null!==r&&Qd(1,r,n);const i=e.template;null!==i&&Zm(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Qm(e,t),e.staticViewQueries&&Qd(2,e.viewQuery,n);const o=e.components;null!==o&&function x1(e,t){for(let n=0;n<t.length;n++)J1(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,hu()}}function ts(e,t,n,r){const i=t[2];if(128!=(128&i)){fu(t);try{Hp(t),function zp(e){return Ye.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Zm(e,t,n,2,r);const s=3==(3&i);if(s){const h=e.preOrderCheckHooks;null!==h&&gu(t,h,null)}else{const h=e.preOrderHooks;null!==h&&mu(t,h,0,null),Mc(t,0)}if(function K1(e){for(let t=od(e);null!==t;t=sd(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(512&i[2])&&Sc(o,1),i[2]|=512}}}(t),function z1(e){for(let t=od(e);null!==t;t=sd(t))for(let n=10;n<t.length;n++){const r=t[n],i=r[1];Dc(r)&&ts(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&Qm(e,t),s){const h=e.contentCheckHooks;null!==h&&gu(t,h)}else{const h=e.contentHooks;null!==h&&mu(t,h,1),Mc(t,1)}!function F1(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Vi(~i);else{const o=i,s=n[++r],l=n[++r];_C(s,o),l(2,t[o])}}}finally{Vi(-1)}}(e,t);const l=e.components;null!==l&&function A1(e,t){for(let n=0;n<t.length;n++)G1(e,t[n])}(t,l);const d=e.viewQuery;if(null!==d&&Qd(2,d,r),s){const h=e.viewCheckHooks;null!==h&&gu(t,h)}else{const h=e.viewHooks;null!==h&&mu(t,h,2),Mc(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Sc(t[3],-1))}finally{hu()}}}function I1(e,t,n,r){const i=t[10],s=Up(t);try{!s&&i.begin&&i.begin(),s&&ua(e,t,r),ts(e,t,n,r)}finally{!s&&i.end&&i.end()}}function Zm(e,t,n,r,i){const o=Wn(),s=2&r;try{Vi(-1),s&&t.length>22&&vm(e,t,22,!1),n(r,i)}finally{Vi(o)}}function $d(e,t,n){!qp()||(function V1(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||$s(n,t),Pn(r,t);const s=n.initialInputs;for(let l=i;l<o;l++){const d=e.data[l],h=Nr(d);h&&$1(t,n,d);const g=qs(t,e,l,n);Pn(g,t),null!==s&&q1(0,l-i,g,d,0,s),h&&(hr(n.index,t)[8]=g)}}(e,t,n,Ar(n,t)),128==(128&n.flags)&&function j1(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function wC(){return Ye.lFrame.currentDirectiveIndex}();try{Vi(o);for(let l=r;l<i;l++){const d=e.data[l],h=t[l];xc(l),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&sv(d,h)}}finally{Vi(-1),xc(s)}}(e,t,n))}function qd(e,t,n=Ar){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],l=-1===s?n(t,e):e[s];e[i++]=l}}}function ev(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Hu(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Hu(e,t,n,r,i,o,s,l,d,h){const g=22+r,b=g+i,I=function T1(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Qe);return n}(g,b),U="function"==typeof h?h():h;return I[1]={type:e,blueprint:I,template:n,queries:null,viewQuery:l,declTNode:t,data:I.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:d,consts:U,incompleteFirstPass:!1}}function rv(e,t,n,r){const i=fv(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&hv(e).push(r,i.length-1))}function iv(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Wd(e,t,n,r){let i=!1;if(qp()){const o=function B1(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];gm(n,s.selectors,!1)&&(i||(i=[]),bu($s(n,t),e,s.type),Nr(s)?(av(e,n),i.unshift(s)):i.push(s))}return i}(e,t,n),s=null===r?null:{"":-1};if(null!==o){i=!0,uv(n,e.data.length,o.length);for(let g=0;g<o.length;g++){const b=o[g];b.providersResolver&&b.providersResolver(b)}let l=!1,d=!1,h=es(e,t,o.length,null);for(let g=0;g<o.length;g++){const b=o[g];n.mergedAttrs=yu(n.mergedAttrs,b.hostAttrs),lv(e,n,t,h,b),H1(h,b,s),null!==b.contentQueries&&(n.flags|=8),(null!==b.hostBindings||null!==b.hostAttrs||0!==b.hostVars)&&(n.flags|=128);const I=b.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),l=!0),!d&&(I.ngOnChanges||I.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),d=!0),h++}!function R1(e,t){const r=t.directiveEnd,i=e.data,o=t.attrs,s=[];let l=null,d=null;for(let h=t.directiveStart;h<r;h++){const g=i[h],b=g.inputs,I=null===o||pm(t)?null:W1(b,o);s.push(I),l=iv(b,h,l),d=iv(g.outputs,h,d)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=16),l.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=l,t.outputs=d}(e,n)}s&&function U1(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new H(-301,!1);r.push(t[i],o)}}}(n,r,s)}return n.mergedAttrs=yu(n.mergedAttrs,n.attrs),i}function ov(e,t,n,r,i,o){const s=o.hostBindings;if(s){let l=e.hostBindingOpCodes;null===l&&(l=e.hostBindingOpCodes=[]);const d=~t.index;(function L1(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(l)!=d&&l.push(d),l.push(r,i,s)}}function sv(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function av(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function H1(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Nr(t)&&(n[""]=e)}}function uv(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function lv(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=so(i.type)),s=new Us(o,Nr(i),ye);e.blueprint[r]=s,n[r]=s,ov(e,t,0,r,es(e,n,i.hostVars,Qe),i)}function $1(e,t,n){const r=Ar(t,e),i=ev(n),o=e[10],s=$u(e,aa(e,i,null,n.onPush?32:16,r,t,o,o.createRenderer(r,n),null,null,null));e[t.index]=s}function Xr(e,t,n,r,i,o){const s=Ar(e,t);!function zd(e,t,n,r,i,o,s){if(null==o)qt(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const l=null==s?oe(o):s(o,r||"",i);qt(e)?e.setAttribute(t,i,l,n):n?t.setAttributeNS(n,i,l):t.setAttribute(i,l)}}(t[11],s,o,e.value,n,r,i)}function q1(e,t,n,r,i,o){const s=o[t];if(null!==s){const l=r.setInput;for(let d=0;d<s.length;){const h=s[d++],g=s[d++],b=s[d++];null!==l?r.setInput(n,b,h,g):n[g]=b}}}function W1(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function cv(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function G1(e,t){const n=hr(t,e);if(Dc(n)){const r=n[1];48&n[2]?ts(r,n,r.template,n[8]):n[5]>0&&Kd(n)}}function Kd(e){for(let r=od(e);null!==r;r=sd(r))for(let i=10;i<r.length;i++){const o=r[i];if(512&o[2]){const s=o[1];ts(s,o,s.template,o[8])}else o[5]>0&&Kd(o)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=hr(n[r],e);Dc(i)&&i[5]>0&&Kd(i)}}function J1(e,t){const n=hr(t,e),r=n[1];(function Y1(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),ua(r,n,n[8])}function $u(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Gd(e){for(;e;){e[2]|=32;const t=oa(e);if(GE(e)&&!t)return e;e=t}return null}function dv(e){!function Jd(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=nd(n);if(null!==r){const i=r[1];I1(i,r,i.template,n)}}}(e[8])}function Qd(e,t,n){Tc(0),t(e,n)}const Z1=(()=>Promise.resolve(null))();function fv(e){return e[7]||(e[7]=[])}function hv(e){return e.cleanup||(e.cleanup=[])}function gv(e,t){const n=e[9],r=n?n.get(Go,null):null;r&&r.handleError(t)}function mv(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],l=n[o++],d=t[s],h=e.data[s];null!==h.setInput?h.setInput(d,i,r,l):d[l]=i}}function yi(e,t,n){const r=function cu(e,t){return Xt(t[e])}(t,e);!function Yg(e,t,n){qt(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function qu(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const l=t[s];"number"==typeof l?o=l:1==o?i=P(i,l):2==o&&(r=P(r,l+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function lF(){const e=un();pu(_e()[1],e)}let Wu=null;function co(){if(!Wu){const e=mt.Symbol;if(e&&e.iterator)Wu=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Wu=r)}}}return Wu}function la(e){return!!ef(e)&&(Array.isArray(e)||!(e instanceof Map)&&co()in e)}function ef(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ei(e,t,n){return e[t]=n}function kn(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function jr(e,t,n,r){const i=_e();return kn(i,Lo(),t)&&(dt(),Xr(Wt(),i,e,t,n,r)),jr}function ds(e,t,n,r,i,o,s,l){const d=_e(),h=dt(),g=e+22,b=h.firstCreatePass?function wF(e,t,n,r,i,o,s,l,d){const h=t.consts,g=Xo(t,e,4,s||null,Li(h,l));Wd(t,n,g,Li(h,d)),pu(t,g);const b=g.tViews=Hu(2,g,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,h);return null!==t.queries&&(t.queries.template(t,g),b.queries=t.queries.embeddedTView(g)),g}(g,h,d,t,n,r,i,o,s):h.data[g];Yr(b,!1);const I=d[11].createComment("");Nu(h,d,I,b),Pn(I,d),$u(d,d[g]=cv(I,d,I,b)),lu(b)&&$d(h,d,b),null!=s&&qd(d,b,l)}function cn(e,t,n){const r=_e();return kn(r,Lo(),t)&&function vr(e,t,n,r,i,o,s,l){const d=Ar(t,n);let g,h=t.inputs;!l&&null!=h&&(g=h[r])?(mv(e,n,g,r,i),uu(t)&&function k1(e,t){const n=hr(t,e);16&n[2]||(n[2]|=32)}(n,t.index)):3&t.type&&(r=function P1(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,qt(o)?o.setProperty(d,r,i):Pc(r)||(d.setProperty?d.setProperty(r,i):d[r]=i))}(dt(),Wt(),r,e,t,r[11],n,!1),cn}function tf(e,t,n,r,i){const s=i?"class":"style";mv(e,n,t.inputs[s],s,r)}function He(e,t,n,r){const i=_e(),o=dt(),s=22+e,l=i[11],d=i[s]=ud(l,t,function xC(){return Ye.lFrame.currentNamespace}()),h=o.firstCreatePass?function CF(e,t,n,r,i,o,s){const l=t.consts,h=Xo(t,e,2,i,Li(l,o));return Wd(t,n,h,Li(l,s)),null!==h.attrs&&qu(h,h.attrs,!1),null!==h.mergedAttrs&&qu(h,h.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,h),h}(s,o,i,0,t,n,r):o.data[s];Yr(h,!0);const g=h.mergedAttrs;null!==g&&vu(l,d,g);const b=h.classes;null!==b&&pd(l,d,b);const I=h.styles;return null!==I&&dm(l,d,I),64!=(64&h.flags)&&Nu(o,i,d,h),0===function cC(){return Ye.lFrame.elementDepthCount}()&&Pn(d,i),function dC(){Ye.lFrame.elementDepthCount++}(),lu(h)&&($d(o,i,h),function Xm(e,t,n){if(mc(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,h,i)),null!==r&&qd(i,h),He}function Oe(){let e=un();Fc()?function Ac(){Ye.lFrame.isParent=!1}():(e=e.parent,Yr(e,!1));const t=e;!function fC(){Ye.lFrame.elementDepthCount--}();const n=dt();return n.firstCreatePass&&(pu(n,e),mc(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function PC(e){return 0!=(16&e.flags)}(t)&&tf(n,t,_e(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function kC(e){return 0!=(32&e.flags)}(t)&&tf(n,t,_e(),t.stylesWithoutHost,!1),Oe}function ho(e,t,n,r){return He(e,t,n,r),Oe(),ho}function da(e){return!!e&&"function"==typeof e.then}function jv(e){return!!e&&"function"==typeof e.subscribe}const of=jv;function Gn(e,t,n,r){const i=_e(),o=dt(),s=un();return function Uv(e,t,n,r,i,o,s,l){const d=lu(r),g=e.firstCreatePass&&hv(e),b=t[8],I=fv(t);let U=!0;if(3&r.type||l){const Ee=Ar(r,t),ge=l?l(Ee):Ee,Ce=I.length,me=l?Pe=>l(Xt(Pe[r.index])):r.index;if(qt(n)){let Pe=null;if(!l&&d&&(Pe=function FF(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const l=t[7],d=i[o+2];return l.length>d?l[d]:null}"string"==typeof s&&(o+=2)}return null}(e,t,i,r.index)),null!==Pe)(Pe.__ngLastListenerFn__||Pe).__ngNextListenerFn__=o,Pe.__ngLastListenerFn__=o,U=!1;else{o=sf(r,t,b,o,!1);const rt=n.listen(ge,i,o);I.push(o,rt),g&&g.push(i,me,Ce,Ce+1)}}else o=sf(r,t,b,o,!0),ge.addEventListener(i,o,s),I.push(o),g&&g.push(i,me,Ce,s)}else o=sf(r,t,b,o,!1);const se=r.outputs;let he;if(U&&null!==se&&(he=se[i])){const Ee=he.length;if(Ee)for(let ge=0;ge<Ee;ge+=2){const Rt=t[he[ge]][he[ge+1]].subscribe(o),Do=I.length;I.push(o,Rt),g&&g.push(i,r.index,Do,-(Do+1))}}}(o,i,i[11],s,e,t,!!n,r),Gn}function Hv(e,t,n,r){try{return!1!==n(r)}catch(i){return gv(e,i),!1}}function sf(e,t,n,r,i){return function o(s){if(s===Function)return r;Gd(2&e.flags?hr(e.index,t):t);let d=Hv(t,0,r,s),h=o.__ngNextListenerFn__;for(;h;)d=Hv(t,0,h,s)&&d,h=h.__ngNextListenerFn__;return i&&!1===d&&(s.preventDefault(),s.returnValue=!1),d}}function af(e=1){return function EC(e){return(Ye.lFrame.contextLView=function CC(e,t){for(;e>0;)t=t[15],e--;return t}(e,Ye.lFrame.contextLView))[8]}(e)}function Re(e,t=""){const n=_e(),r=dt(),i=e+22,o=r.firstCreatePass?Xo(r,i,1,t,null):r.data[i],s=n[i]=function ad(e,t){return qt(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Nu(r,n,s,o),Yr(o,!1)}function _i(e){return Ju("",e,""),_i}function Ju(e,t,n){const r=_e(),i=function rs(e,t,n,r){return kn(e,Lo(),n)?t+oe(n)+r:Qe}(r,e,t,n);return i!==Qe&&yi(r,Wn(),i),Ju}const ps="en-US";let Py=ps;class hx{resolveComponentFactory(t){throw function fx(e){const t=Error(`No component factory found for ${C(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let va=(()=>{class e{}return e.NULL=new hx,e})();class $i{}class a0{}class u0{}function gx(){return ms(un(),_e())}function ms(e,t){return new yr(Ar(e,t))}let yr=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=gx,e})();function mx(e){return e instanceof yr?e.nativeElement:e}class l0{}let wi=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function yx(){const e=_e(),n=hr(un().index,e);return function vx(e){return e[11]}(tr(n)?n:e)}(),e})(),_x=(()=>{class e{}return e.\u0275prov=Be({token:e,providedIn:"root",factory:()=>null}),e})();class ya{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const wx=new ya("14.0.3"),mf={};function el(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(Xt(o)),kr(o))for(let l=10;l<o.length;l++){const d=o[l],h=d[1].firstChild;null!==h&&el(d[1],d,h,r)}const s=n.type;if(8&s)el(e,t,n.child,r);else if(32&s){const l=id(n,t);let d;for(;d=l();)r.push(d)}else if(16&s){const l=um(t,n);if(Array.isArray(l))r.push(...l);else{const d=oa(t[16]);el(d[1],d,l,r,!0)}}n=i?n.projectionNext:n.next}return r}class _a{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return el(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(kr(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(ld(t,r),Cu(n,r))}this._attachedToViewContainer=!1}Zg(this._lView[1],this._lView)}onDestroy(t){rv(this._lView[1],this._lView,null,t)}markForCheck(){Gd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Yd(e,t,n){const r=t[10];r.begin&&r.begin();try{ts(e,t,e.template,n)}catch(i){throw gv(t,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vS(e,t){sa(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=t}}class bx extends _a{constructor(t){super(t),this._view=t}detectChanges(){dv(this._view)}checkNoChanges(){}get context(){return null}}class vf extends va{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=St(t);return new yf(n,this.ngModule)}}function c0(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class Cx{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){const i=this.injector.get(t,mf,r);return i!==mf||n===mf?i:this.parentInjector.get(t,n,r)}}class yf extends u0{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function LS(e){return e.map(OS).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return c0(this.componentDef.inputs)}get outputs(){return c0(this.componentDef.outputs)}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof lo?i:null==i?void 0:i.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new Cx(t,o):t,l=s.get(l0,Bp),d=s.get(_x,null),h=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",b=r?function nv(e,t,n){if(qt(e))return e.selectRootElement(t,n===mn.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(h,r,this.componentDef.encapsulation):ud(l.createRenderer(null,this.componentDef),g,function Ex(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(g)),I=this.componentDef.onPush?288:272,U=function Av(e,t){return{components:[],scheduler:e||uS,clean:Z1,playerHandler:t||null,flags:0}}(),se=Hu(0,null,null,1,0,null,null,null,null,null),he=aa(null,se,U,I,null,null,l,h,d,s,null);let Ee,ge;fu(he);try{const Ce=function Sv(e,t,n,r,i,o){const s=n[1];n[22]=e;const d=Xo(s,22,2,"#host",null),h=d.mergedAttrs=t.hostAttrs;null!==h&&(qu(d,h,!0),null!==e&&(vu(i,e,h),null!==d.classes&&pd(i,e,d.classes),null!==d.styles&&dm(i,e,d.styles)));const g=r.createRenderer(e,t),b=aa(n,ev(t),null,t.onPush?32:16,n[22],d,r,g,o||null,null,null);return s.firstCreatePass&&(bu($s(d,n),s,t.type),av(s,d),uv(d,n.length,1)),$u(n,b),n[22]=b}(b,this.componentDef,he,l,h);if(b)if(r)vu(h,b,["ng-version",wx.full]);else{const{attrs:me,classes:Pe}=function VS(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Or(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);me&&vu(h,b,me),Pe&&Pe.length>0&&pd(h,b,Pe.join(" "))}if(ge=Cc(se,22),void 0!==n){const me=ge.projection=[];for(let Pe=0;Pe<this.ngContentSelectors.length;Pe++){const rt=n[Pe];me.push(null!=rt?Array.from(rt):null)}}Ee=function Fv(e,t,n,r,i){const o=n[1],s=function O1(e,t,n){const r=un();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),lv(e,r,t,es(e,t,1,null),n));const i=qs(t,e,r.directiveStart,r);Pn(i,t);const o=Ar(r,t);return o&&Pn(o,t),i}(o,n,t);if(r.components.push(s),e[8]=s,null!==i)for(const d of i)d(s,t);if(t.contentQueries){const d=un();t.contentQueries(1,s,d.directiveStart)}const l=un();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Vi(l.index),ov(n[1],l,0,l.directiveStart,l.directiveEnd,t),sv(t,s)),s}(Ce,this.componentDef,he,U,[lF]),ua(se,he,null)}finally{hu()}return new Sx(this.componentType,Ee,ms(ge,he),he,ge)}}class Sx extends class px{}{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new bx(i),this.componentType=t}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class d0 extends $i{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vf(this);const r=dr(t);this._bootstrapComponents=mi(r.bootstrap),this._r3Injector=Mm(t,n,[{provide:$i,useValue:this},{provide:va,useValue:this.componentFactoryResolver}],C(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(t)}get(t,n=Kn.THROW_IF_NOT_FOUND,r=Ue.Default){return t===Kn||t===$i||t===vd?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class _f extends a0{constructor(t){super(),this.moduleType=t}create(t){return new d0(this.moduleType,t)}}class Ax extends $i{constructor(t,n,r){super(),this.componentFactoryResolver=new vf(this),this.instance=null;const i=new xm([...t,{provide:$i,useValue:this},{provide:va,useValue:this.componentFactoryResolver}],n||wd(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function tl(e,t=null,n=null){return new Ax(e,t,n).injector}function nr(e,t,n){const r=qn()+e,i=_e();return i[r]===Qe?ei(i,r,n?t.call(n):t()):function ca(e,t){return e[t]}(i,r)}function h0(e,t,n,r,i,o){const s=t+n;return kn(e,s,i)?ei(e,s+1,o?r.call(o,i):r(i)):function wa(e,t){const n=e[t];return n===Qe?void 0:n}(e,s+1)}function vs(e,t){const n=dt();let r;const i=e+22;n.firstCreatePass?(r=function jx(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=so(r.type)),s=Zt(ye);try{const l=_u(!1),d=o();return _u(l),function bF(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,_e(),i,d),d}finally{Zt(s)}}function ys(e,t,n){const r=e+22,i=_e(),o=function Oo(e,t){return e[t]}(i,r);return function ba(e,t){return e[1].data[t].pure}(i,r)?h0(i,qn(),t,o.transform,n,o):o.transform(n)}function wf(e){return t=>{setTimeout(e,void 0,t)}}const Kt=class qx extends Pt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){var i,o,s;let l=t,d=n||(()=>null),h=r;if(t&&"object"==typeof t){const b=t;l=null===(i=b.next)||void 0===i?void 0:i.bind(b),d=null===(o=b.error)||void 0===o?void 0:o.bind(b),h=null===(s=b.complete)||void 0===s?void 0:s.bind(b)}this.__isAsync&&(d=wf(d),l&&(l=wf(l)),h&&(h=wf(h)));const g=super.subscribe({next:l,error:d,complete:h});return t instanceof R&&t.add(g),g}};function Wx(){return this._results[co()]()}class bf{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=co(),r=bf.prototype;r[n]||(r[n]=Wx)}get changes(){return this._changes||(this._changes=new Kt)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=pr(t);(this._changesDetected=!function WC(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let bi=(()=>{class e{}return e.__NG_ELEMENT_ID__=Gx,e})();const zx=bi,Kx=class extends zx{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t,n){const r=this._declarationTContainer.tViews,i=aa(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),ua(r,i,t),new _a(i)}};function Gx(){return nl(un(),_e())}function nl(e,t){return 4&e.type?new Kx(t,e,ms(e,t)):null}let Hr=(()=>{class e{}return e.__NG_ELEMENT_ID__=Jx,e})();function Jx(){return w0(un(),_e())}const Yx=Hr,y0=class extends Yx{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return ms(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){const t=wu(this._hostTNode,this._hostLView);if(rg(t)){const n=jo(t,this._hostLView),r=Vo(t);return new Bo(n[1].data[r+8],n)}return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=_0(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=t.createEmbeddedView(n||{},o);return this.insert(s,i),s}createComponent(t,n,r,i,o){const s=t&&!function Ks(e){return"function"==typeof e}(t);let l;if(s)l=n;else{const b=n||{};l=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}const d=s?t:new yf(St(t)),h=r||this.parentInjector;if(!o&&null==d.ngModule){const I=(s?h:this.parentInjector).get(lo,null);I&&(o=I)}const g=d.create(h,i,void 0,o);return this.insert(g.hostView,l),g}insert(t,n){const r=t._lView,i=r[1];if(function lC(e){return kr(e[3])}(r)){const g=this.indexOf(t);if(-1!==g)this.detach(g);else{const b=r[3],I=new y0(b,b[6],b[3]);I.detach(I.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;!function _S(e,t,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-10?(t[4]=n[i],pg(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function wS(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const l=t[19];null!==l&&l.insertView(e),t[2]|=64}(i,r,s,o);const l=fd(o,s),d=r[11],h=ku(d,s[7]);return null!==h&&function mS(e,t,n,r,i,o){r[0]=i,r[6]=t,sa(e,r,n,1,i,o)}(i,s[6],d,r,h,l),t.attachToViewContainerRef(),pg(Ef(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=_0(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=ld(this._lContainer,n);r&&(Cu(Ef(this._lContainer),n),Zg(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=ld(this._lContainer,n);return r&&null!=Cu(Ef(this._lContainer),n)?new _a(r):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function _0(e){return e[8]}function Ef(e){return e[8]||(e[8]=[])}function w0(e,t){let n;const r=t[e.index];if(kr(r))n=r;else{let i;if(8&e.type)i=Xt(r);else{const o=t[11];i=o.createComment("");const s=Ar(e,t);ao(o,ku(o,s),i,function DS(e,t){return qt(e)?e.nextSibling(t):t.nextSibling}(o,s),!1)}t[e.index]=n=cv(r,t,i,e),$u(t,n)}return new y0(n,e,t)}class Cf{constructor(t){this.queryList=t,this.matches=null}clone(){return new Cf(this.queryList)}setDirty(){this.queryList.setDirty()}}class Df{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new Df(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==S0(t,n).matches&&this.queries[n].setDirty()}}class b0{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class Sf{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new Sf(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ff{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new Ff(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,n,Xx(n,o)),this.matchTNodeWithReadOption(t,n,Eu(n,t,o,!1,!1))}else r===bi?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Eu(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===yr||i===Hr||i===bi&&4&n.type)this.addMatch(n.index,-2);else{const o=Eu(n,t,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function Xx(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function tI(e,t,n,r){return-1===n?function eI(e,t){return 11&e.type?ms(e,t):4&e.type?nl(e,t):null}(t,e):-2===n?function nI(e,t,n){return n===yr?ms(t,e):n===bi?nl(t,e):n===Hr?w0(t,e):void 0}(e,t,r):qs(e,e[1],n,t)}function E0(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const o=e.data,s=n.matches,l=[];for(let d=0;d<s.length;d+=2){const h=s[d];l.push(h<0?null:tI(t,o[h],s[d+1],n.metadata.read))}i.matches=l}return i.matches}function Af(e,t,n,r){const i=e.queries.getByIndex(n),o=i.matches;if(null!==o){const s=E0(e,t,i,n);for(let l=0;l<o.length;l+=2){const d=o[l];if(d>0)r.push(s[l/2]);else{const h=o[l+1],g=t[-d];for(let b=10;b<g.length;b++){const I=g[b];I[17]===I[3]&&Af(I[1],I,h,r)}if(null!==g[9]){const b=g[9];for(let I=0;I<b.length;I++){const U=b[I];Af(U[1],U,h,r)}}}}}return r}function xf(e){const t=_e(),n=dt(),r=Gp();Tc(r+1);const i=S0(n,r);if(e.dirty&&Up(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?Af(n,t,r,[]):E0(n,t,i,r);e.reset(o,mx),e.notifyOnChanges()}return!0}return!1}function If(e,t,n,r){const i=dt();if(i.firstCreatePass){const o=un();(function D0(e,t,n){null===e.queries&&(e.queries=new Sf),e.queries.track(new Ff(t,n))})(i,new b0(t,n,r),o.index),function oI(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}!function C0(e,t,n){const r=new bf(4==(4&n));rv(e,t,r,r.destroy),null===t[19]&&(t[19]=new Df),t[19].queries.push(new Cf(r))}(i,_e(),n)}function Tf(){return function iI(e,t){return e[19].queries[t].queryList}(_e(),Gp())}function S0(e,t){return e.queries.getByIndex(t)}function il(...e){}const Nf=new Je("Application Initializer");let ol=(()=>{class e{constructor(n){this.appInits=n,this.resolve=il,this.reject=il,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(da(o))n.push(o);else if(of(o)){const s=new Promise((l,d)=>{o.subscribe({complete:l,error:d})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(Te(Nf,8))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ca=new Je("AppId",{providedIn:"root",factory:function q0(){return`${Of()}${Of()}${Of()}`}});function Of(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const W0=new Je("Platform Initializer"),Lf=new Je("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),z0=new Je("appBootstrapListener");let FI=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Ei=new Je("LocaleId",{providedIn:"root",factory:()=>function iD(e,t=Ue.Default){return Te(e,t)}(Ei,Ue.Optional|Ue.SkipSelf)||function AI(){return"undefined"!=typeof $localize&&$localize.locale||ps}()});class II{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let Vf=(()=>{class e{compileModuleSync(n){return new _f(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=mi(dr(n).declarations).reduce((s,l)=>{const d=St(l);return d&&s.push(new yf(d)),s},[]);return new II(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const MI=(()=>Promise.resolve(0))();function jf(e){"undefined"==typeof Zone?MI.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class tn{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Kt(!1),this.onMicrotaskEmpty=new Kt(!1),this.onStable=new Kt(!1),this.onError=new Kt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function RI(){let e=mt.requestAnimationFrame,t=mt.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function NI(e){const t=()=>{!function kI(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(mt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Uf(e),e.isCheckStableRunning=!0,Bf(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Uf(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,l)=>{try{return K0(e),n.invokeTask(i,o,s,l)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),G0(e)}},onInvoke:(n,r,i,o,s,l,d)=>{try{return K0(e),n.invoke(i,o,s,l,d)}finally{e.shouldCoalesceRunChangeDetection&&t(),G0(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Uf(e),Bf(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!tn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(tn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,PI,il,il);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const PI={};function Bf(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Uf(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function K0(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function G0(e){e._nesting--,Bf(e)}class OI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Kt,this.onMicrotaskEmpty=new Kt,this.onStable=new Kt,this.onError=new Kt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const J0=new Je(""),sl=new Je("");let Da,Hf=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Da||(function LI(e){Da=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{tn.assertNotInAngularZone(),jf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())jf(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(Te(tn),Te($f),Te(sl))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})(),$f=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){var i;return null!==(i=null==Da?void 0:Da.findTestabilityInTree(this,n,r))&&void 0!==i?i:null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),ri=null;const Y0=new Je("AllowMultipleToken"),Q0=new Je("PlatformOnDestroy");class Z0{constructor(t,n){this.name=t,this.token=n}}function e_(e,t,n=[]){const r=`Platform: ${t}`,i=new Je(r);return(o=[])=>{let s=qf();if(!s||s.injector.get(Y0,!1)){const l=[...n,...o,{provide:i,useValue:!0}];e?e(l):function BI(e){if(ri&&!ri.get(Y0,!1))throw new H(400,!1);ri=e;const t=e.get(n_);(function X0(e){const t=e.get(W0,null);t&&t.forEach(n=>n())})(e)}(function t_(e=[],t){return Kn.create({name:t,providers:[{provide:yd,useValue:"platform"},{provide:Q0,useValue:()=>ri=null},...e]})}(l,r))}return function HI(e){const t=qf();if(!t)throw new H(401,!1);return t}()}}function qf(){var e;return null!==(e=null==ri?void 0:ri.get(n_))&&void 0!==e?e:null}let n_=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function $I(e,t){let n;return n="noop"===e?new OI:("zone.js"===e?void 0:e)||new tn(t),n}(null==r?void 0:r.ngZone,function r_(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:tn,useValue:i}];return i.run(()=>{const s=Kn.create({providers:o,parent:this.injector,name:n.moduleType.name}),l=n.create(s),d=l.injector.get(Go,null);if(!d)throw new H(402,!1);return i.runOutsideAngular(()=>{const h=i.onError.subscribe({next:g=>{d.handleError(g)}});l.onDestroy(()=>{ul(this._modules,l),h.unsubscribe()})}),function i_(e,t,n){try{const r=n();return da(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(d,i,()=>{const h=l.injector.get(ol);return h.runInitializers(),h.donePromise.then(()=>(function ky(e){ct(e,"Expected localeId to be defined"),"string"==typeof e&&(Py=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Ei,ps)||ps),this._moduleDoBootstrap(l),l))})})}bootstrapModule(n,r=[]){const i=o_({},r);return function VI(e,t,n){const r=new _f(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(al);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new H(403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new H(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Q0,null);null==n||n(),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Te(Kn))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function o_(e,t){return Array.isArray(t)?t.reduce(o_,e):Object.assign(Object.assign({},e),t)}let al=(()=>{class e{constructor(n,r,i,o){this._zone=n,this._injector=r,this._exceptionHandler=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Le(d=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{d.next(this._stable),d.complete()})}),l=new Le(d=>{let h;this._zone.runOutsideAngular(()=>{h=this._zone.onStable.subscribe(()=>{tn.assertNotInAngularZone(),jf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,d.next(!0))})})});const g=this._zone.onUnstable.subscribe(()=>{tn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{d.next(!1)}))});return()=>{h.unsubscribe(),g.unsubscribe()}});this.isStable=function u(...e){const t=Ri(e),n=function $t(e,t){return"number"==typeof xo(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?ur(r[0]):li(n)(Nt(r,t)):lr}(s,l.pipe(function c(e={}){const{connector:t=(()=>new Pt),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s=null,l=null,d=null,h=0,g=!1,b=!1;const I=()=>{null==l||l.unsubscribe(),l=null},U=()=>{I(),s=d=null,g=b=!1},se=()=>{const he=s;U(),null==he||he.unsubscribe()};return lt((he,Ee)=>{h++,!b&&!g&&I();const ge=d=null!=d?d:t();Ee.add(()=>{h--,0===h&&!b&&!g&&(l=f(se,i))}),ge.subscribe(Ee),s||(s=new ne({next:Ce=>ge.next(Ce),error:Ce=>{b=!0,I(),l=f(U,n,Ce),ge.error(Ce)},complete:()=>{g=!0,I(),l=f(U,r),ge.complete()}}),Nt(he).subscribe(s))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof u0;if(!this._initStatus.done)throw!i&&function ws(e){const t=St(e)||Hn(e)||$n(e);return null!==t&&t.standalone}(n),new H(405,false);let o;o=i?n:this._injector.get(va).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const s=function jI(e){return e.isBoundToModule}(o)?void 0:this._injector.get($i),d=o.create(Kn.NULL,[],r||o.selector,s),h=d.location.nativeElement,g=d.injector.get(J0,null);return null==g||g.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),ul(this.components,d),null==g||g.unregisterApplication(h)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new H(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;ul(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(z0,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ul(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(Te(tn),Te(Kn),Te(Go),Te(ol))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ul(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let a_=!0,ll=(()=>{class e{}return e.__NG_ELEMENT_ID__=zI,e})();function zI(e){return function KI(e,t,n){if(uu(e)&&!n){const r=hr(e.index,t);return new _a(r,r)}return 47&e.type?new _a(t[16],t):null}(un(),_e(),16==(16&e))}class f_{constructor(){}supports(t){return la(t)}create(t){return new XI(t)}}const ZI=(e,t)=>t;class XI{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ZI}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<p_(r,i,o)?n:r,l=p_(s,i,o),d=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const h=l-i,g=d-i;if(h!=g){for(let I=0;I<h;I++){const U=I<o.length?o[I]:o[I]=0,se=U+I;g<=se&&se<h&&(o[I]=U+1)}o[s.previousIndex]=g-h}}l!==d&&t(s,l,d)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!la(t))throw new H(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let l=0;l<this.length;l++)o=t[l],s=this._trackByFn(l,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,l)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,l),r=!0),n=n._next}else i=0,function yF(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[co()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,l=>{s=this._trackByFn(i,l),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,l,s,i)),Object.is(n.item,l)||this._addIdentityChange(n,l)):(n=this._mismatch(n,l,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new eT(n,r),o,i),t}_verifyReinsertion(t,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new h_),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new h_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class eT{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tT{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class h_{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new tT,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function p_(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class g_{constructor(){}supports(t){return t instanceof Map||ef(t)}create(){return new nT}}class nT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||ef(t)))throw new H(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,n);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new rT(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class rT{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function m_(){return new fl([new f_])}let fl=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||m_()),deps:[[e,new Zs,new gi]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new H(901,!1)}}return e.\u0275prov=Be({token:e,providedIn:"root",factory:m_}),e})();function v_(){return new Sa([new g_])}let Sa=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||v_()),deps:[[e,new Zs,new gi]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new H(901,!1)}}return e.\u0275prov=Be({token:e,providedIn:"root",factory:v_}),e})();const sT=e_(null,"core",[]);let aT=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Te(al))},e.\u0275mod=Cr({type:e}),e.\u0275inj=Qt({}),e})();function Di(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let hl=null;function ii(){return hl}const Qn=new Je("DocumentToken");let Fa=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Be({token:e,factory:function(){return function dT(){return Te(y_)}()},providedIn:"platform"}),e})();const fT=new Je("Location Initialized");let y_=(()=>{class e extends Fa{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ii().getBaseHref(this._doc)}onPopState(n){const r=ii().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ii().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){__()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){__()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(Te(Qn))},e.\u0275prov=Be({token:e,factory:function(){return function hT(){return new y_(Te(Qn))}()},providedIn:"platform"}),e})();function __(){return!!window.history.pushState}function Jf(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function w_(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Si(e){return e&&"?"!==e[0]?"?"+e:e}let Es=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Be({token:e,factory:function(){return function pT(){const e=Te(Qn).location;return new b_(Te(Fa),e&&e.origin||"")}()},providedIn:"root"}),e})();const Yf=new Je("appBaseHref");let b_=(()=>{class e extends Es{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Jf(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Si(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Si(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Si(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return e.\u0275fac=function(n){return new(n||e)(Te(Fa),Te(Yf,8))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})(),gT=(()=>{class e extends Es{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Jf(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Si(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Si(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return e.\u0275fac=function(n){return new(n||e)(Te(Fa),Te(Yf,8))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})(),Qf=(()=>{class e{constructor(n){this._subject=new Kt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._baseHref=w_(E_(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){var n;null===(n=this._urlChangeSubscription)||void 0===n||n.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Si(r))}normalize(n){return e.stripTrailingSlash(function vT(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,E_(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Si(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Si(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){var r,i;null===(i=(r=this._locationStrategy).historyGo)||void 0===i||i.call(r,n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{var r;const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=Si,e.joinWithSlash=Jf,e.stripTrailingSlash=w_,e.\u0275fac=function(n){return new(n||e)(Te(Es))},e.\u0275prov=Be({token:e,factory:function(){return function mT(){return new Qf(Te(Es))}()},providedIn:"root"}),e})();function E_(e){return e.replace(/\/index.html$/,"")}function M_(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}let R_=(()=>{class e{constructor(n,r,i,o){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(n){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof n?n.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(n){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof n?n.split(/\s+/):n,this._rawClass&&(la(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const n=this._iterableDiffer.diff(this._rawClass);n&&this._applyIterableChanges(n)}else if(this._keyValueDiffer){const n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}}_applyKeyValueChanges(n){n.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),n.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),n.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(n){n.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${C(r.item)}`);this._toggleClass(r.item,!0)}),n.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(r=>this._toggleClass(r,!0)):Object.keys(n).forEach(r=>this._toggleClass(r,!!n[r])))}_removeClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(r=>this._toggleClass(r,!1)):Object.keys(n).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(n,r){(n=n.trim())&&n.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return e.\u0275fac=function(n){return new(n||e)(ye(fl),ye(Sa),ye(yr),ye(wi))},e.\u0275dir=Ke({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class tM{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let k_=(()=>{class e{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new tM(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const l=r.get(o);r.move(l,s),N_(l,i)}});for(let i=0,o=r.length;i<o;i++){const l=r.get(i).context;l.index=i,l.count=o,l.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{N_(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(ye(Hr),ye(bi),ye(fl))},e.\u0275dir=Ke({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();function N_(e,t){e.context.$implicit=t.item}let ah=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new nM,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){O_("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){O_("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(ye(Hr),ye(bi))},e.\u0275dir=Ke({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class nM{constructor(){this.$implicit=null,this.ngIf=null}}function O_(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${C(t)}'.`)}class uM{createSubscription(t,n){return t.subscribe({next:n,error:r=>{throw r}})}dispose(t){t.unsubscribe()}}class lM{createSubscription(t,n){return t.then(n,r=>{throw r})}dispose(t){}}const cM=new lM,dM=new uM;let Cl=(()=>{class e{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(da(n))return cM;if(jv(n))return dM;throw function qr(e,t){return new H(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return e.\u0275fac=function(n){return new(n||e)(ye(ll,16))},e.\u0275pipe=er({name:"async",type:e,pure:!1}),e})(),j_=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Cr({type:e}),e.\u0275inj=Qt({}),e})();let MM=(()=>{class e{}return e.\u0275prov=Be({token:e,providedIn:"root",factory:()=>new RM(Te(Qn),window)}),e})();class RM{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function PM(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=U_(this.window.history)||U_(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function U_(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class H_{}class fh extends class kM extends class cT{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function lT(e){hl||(hl=e)}(new fh)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function NM(){return Ia=Ia||document.querySelector("base"),Ia?Ia.getAttribute("href"):null}();return null==n?null:function OM(e){Dl=Dl||document.createElement("a"),Dl.setAttribute("href",e);const t=Dl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Ia=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return M_(document.cookie,t)}}let Dl,Ia=null;const $_=new Je("TRANSITION_ID"),VM=[{provide:Nf,useFactory:function LM(e,t,n){return()=>{n.get(ol).donePromise.then(()=>{const r=ii(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[$_,Qn,Kn],multi:!0}];let BM=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();const Sl=new Je("EventManagerPlugins");let Fl=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(Te(Sl),Te(tn))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();class q_{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=ii().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let W_=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})(),Ta=(()=>{class e extends W_{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(z_),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(z_))}}return e.\u0275fac=function(n){return new(n||e)(Te(Qn))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();function z_(e){ii().remove(e)}const hh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ph=/%COMP%/g;function Al(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Al(e,i,n):(i=i.replace(ph,e),n.push(i))}return n}function J_(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let gh=(()=>{class e{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new mh(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case mn.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new zM(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case mn.ShadowDom:return new KM(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Al(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(Te(Fl),Te(Ta),Te(Ca))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();class mh{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(hh[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(Q_(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Q_(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=hh[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=hh[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(mr.DashCase|mr.Important)?t.style.setProperty(n,r,i&mr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&mr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,J_(r)):this.eventManager.addEventListener(t,n,J_(r))}}function Q_(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class zM extends mh{constructor(t,n,r,i){super(t),this.component=r;const o=Al(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function $M(e){return"_ngcontent-%COMP%".replace(ph,e)}(i+"-"+r.id),this.hostAttr=function qM(e){return"_nghost-%COMP%".replace(ph,e)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class KM extends mh{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Al(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const l=document.createElement("style");l.textContent=o[s],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let GM=(()=>{class e extends q_{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(Te(Qn))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();const Z_=["alt","control","meta","shift"],YM={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},X_={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},QM={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let ZM=(()=>{class e extends q_{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ii().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="";if(Z_.forEach(d=>{const h=r.indexOf(d);h>-1&&(r.splice(h,1),s+=d+".")}),s+=o,0!=r.length||0===o.length)return null;const l={};return l.domEventName=i,l.fullKey=s,l}static getEventFullKey(n){let r="",i=function XM(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&X_.hasOwnProperty(t)&&(t=X_[t]))}return YM[t]||t}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Z_.forEach(o=>{o!=i&&QM[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{e.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(Te(Qn))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();const rR=e_(sT,"browser",[{provide:Lf,useValue:"browser"},{provide:W0,useValue:function eR(){fh.makeCurrent()},multi:!0},{provide:Qn,useFactory:function nR(){return function oC(e){bc=e}(document),document},deps:[]}]),tw=new Je(""),nw=[{provide:sl,useClass:class jM{addToWindow(t){mt.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},mt.getAllAngularTestabilities=()=>t.getAllTestabilities(),mt.getAllAngularRootElements=()=>t.getAllRootElements(),mt.frameworkStabilizers||(mt.frameworkStabilizers=[]),mt.frameworkStabilizers.push(r=>{const i=mt.getAllAngularTestabilities();let o=i.length,s=!1;const l=function(d){s=s||d,o--,0==o&&r(s)};i.forEach(function(d){d.whenStable(l)})})}findTestabilityInTree(t,n,r){if(null==n)return null;const i=t.getTestability(n);return null!=i?i:r?ii().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}},deps:[]},{provide:J0,useClass:Hf,deps:[tn,$f,sl]},{provide:Hf,useClass:Hf,deps:[tn,$f,sl]}],rw=[{provide:yd,useValue:"root"},{provide:Go,useFactory:function tR(){return new Go},deps:[]},{provide:Sl,useClass:GM,multi:!0,deps:[Qn,tn,Lf]},{provide:Sl,useClass:ZM,multi:!0,deps:[Qn]},{provide:gh,useClass:gh,deps:[Fl,Ta,Ca]},{provide:l0,useExisting:gh},{provide:W_,useExisting:Ta},{provide:Ta,useClass:Ta,deps:[Qn]},{provide:Fl,useClass:Fl,deps:[Sl,tn]},{provide:H_,useClass:BM,deps:[]},[]];let iR=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Ca,useValue:n.appId},{provide:$_,useExisting:Ca},VM]}}}return e.\u0275fac=function(n){return new(n||e)(Te(tw,12))},e.\u0275mod=Cr({type:e}),e.\u0275inj=Qt({providers:[...rw,...nw],imports:[j_,aT]}),e})(),iw=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(Te(Qn))},e.\u0275prov=Be({token:e,factory:function(n){let r=null;return r=n?new n:function sR(){return new iw(Te(Qn))}(),r},providedIn:"root"}),e})();"undefined"!=typeof window&&window;const{isArray:gR}=Array,{getPrototypeOf:mR,prototype:vR,keys:yR}=Object;const{isArray:wR}=Array;let Xw=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Cr({type:e}),e.\u0275inj=Qt({}),e})(),wP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Cr({type:e}),e.\u0275inj=Qt({imports:[Xw]}),e})(),bP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Cr({type:e}),e.\u0275inj=Qt({imports:[wP]}),e})();function Ze(...e){return Nt(e,Ri(e))}function Ds(e,t){return Q(t)?Tt(e,t,1):Tt(e,1)}function Ai(e,t){return lt((n,r)=>{let i=0;n.subscribe(ft(r,o=>e.call(t,o,i++)&&r.next(o)))})}class vb{}class yb{}class xi{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(n=>{let r=t[n];const i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(n,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof xi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new xi;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof xi?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,n);const i=("a"===t.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=t.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(l=>-1===o.indexOf(l)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class DP{encodeKey(t){return _b(t)}encodeValue(t){return _b(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const FP=/%(\d[a-f0-9])/gi,AP={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _b(e){return encodeURIComponent(e).replace(FP,(t,n)=>{var r;return null!==(r=AP[n])&&void 0!==r?r:t})}function Ll(e){return`${e}`}class Gi{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new DP,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function SP(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,l]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],d=n.get(s)||[];d.push(l),n.set(s,d)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const r=t.fromObject[n],i=Array.isArray(r)?r.map(Ll):[Ll(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new Gi({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(Ll(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(Ll(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class xP{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function wb(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function bb(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Eb(e){return"undefined"!=typeof FormData&&e instanceof FormData}class Na{constructor(t,n,r,i){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function IP(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new xi),this.context||(this.context=new xP),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const l=n.indexOf("?");this.urlWithParams=n+(-1===l?"?":l<n.length-1?"&":"")+s}}else this.params=new Gi,this.urlWithParams=n}serializeBody(){return null===this.body?null:wb(this.body)||bb(this.body)||Eb(this.body)||function TP(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Eb(this.body)?null:bb(this.body)?this.body.type||null:wb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var n;const r=t.method||this.method,i=t.url||this.url,o=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,l=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let h=t.headers||this.headers,g=t.params||this.params;const b=null!==(n=t.context)&&void 0!==n?n:this.context;return void 0!==t.setHeaders&&(h=Object.keys(t.setHeaders).reduce((I,U)=>I.set(U,t.setHeaders[U]),h)),t.setParams&&(g=Object.keys(t.setParams).reduce((I,U)=>I.set(U,t.setParams[U]),g)),new Na(r,i,s,{params:g,headers:h,context:b,reportProgress:d,responseType:o,withCredentials:l})}}var on=(()=>((on=on||{})[on.Sent=0]="Sent",on[on.UploadProgress=1]="UploadProgress",on[on.ResponseHeader=2]="ResponseHeader",on[on.DownloadProgress=3]="DownloadProgress",on[on.Response=4]="Response",on[on.User=5]="User",on))();class jh{constructor(t,n=200,r="OK"){this.headers=t.headers||new xi,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Bh extends jh{constructor(t={}){super(t),this.type=on.ResponseHeader}clone(t={}){return new Bh({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Vl extends jh{constructor(t={}){super(t),this.type=on.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Vl({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Cb extends jh{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Uh(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let Db=(()=>{class e{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Na)o=n;else{let d,h;d=i.headers instanceof xi?i.headers:new xi(i.headers),i.params&&(h=i.params instanceof Gi?i.params:new Gi({fromObject:i.params})),o=new Na(n,r,void 0!==i.body?i.body:null,{headers:d,context:i.context,params:h,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Ze(o).pipe(Ds(d=>this.handler.handle(d)));if(n instanceof Na||"events"===i.observe)return s;const l=s.pipe(Ai(d=>d instanceof Vl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(L(d=>{if(null!==d.body&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return l.pipe(L(d=>{if(null!==d.body&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return l.pipe(L(d=>{if(null!==d.body&&"string"!=typeof d.body)throw new Error("Response is not a string.");return d.body}));default:return l.pipe(L(d=>d.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Gi).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Uh(i,r))}post(n,r,i={}){return this.request("POST",n,Uh(i,r))}put(n,r,i={}){return this.request("PUT",n,Uh(i,r))}}return e.\u0275fac=function(n){return new(n||e)(Te(vb))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();class Sb{constructor(t,n){this.next=t,this.interceptor=n}handle(t){return this.interceptor.intercept(t,this.next)}}const Hh=new Je("HTTP_INTERCEPTORS");let MP=(()=>{class e{intercept(n,r){return r.handle(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();const RP=/^\)\]\}',?\n/;let Fb=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Le(r=>{const i=this.xhrFactory.build();if(i.open(n.method,n.urlWithParams),n.withCredentials&&(i.withCredentials=!0),n.headers.forEach((U,se)=>i.setRequestHeader(U,se.join(","))),n.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const U=n.detectContentTypeHeader();null!==U&&i.setRequestHeader("Content-Type",U)}if(n.responseType){const U=n.responseType.toLowerCase();i.responseType="json"!==U?U:"text"}const o=n.serializeBody();let s=null;const l=()=>{if(null!==s)return s;const U=i.statusText||"OK",se=new xi(i.getAllResponseHeaders()),he=function PP(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||n.url;return s=new Bh({headers:se,status:i.status,statusText:U,url:he}),s},d=()=>{let{headers:U,status:se,statusText:he,url:Ee}=l(),ge=null;204!==se&&(ge=void 0===i.response?i.responseText:i.response),0===se&&(se=ge?200:0);let Ce=se>=200&&se<300;if("json"===n.responseType&&"string"==typeof ge){const me=ge;ge=ge.replace(RP,"");try{ge=""!==ge?JSON.parse(ge):null}catch(Pe){ge=me,Ce&&(Ce=!1,ge={error:Pe,text:ge})}}Ce?(r.next(new Vl({body:ge,headers:U,status:se,statusText:he,url:Ee||void 0})),r.complete()):r.error(new Cb({error:ge,headers:U,status:se,statusText:he,url:Ee||void 0}))},h=U=>{const{url:se}=l(),he=new Cb({error:U,status:i.status||0,statusText:i.statusText||"Unknown Error",url:se||void 0});r.error(he)};let g=!1;const b=U=>{g||(r.next(l()),g=!0);let se={type:on.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(se.total=U.total),"text"===n.responseType&&!!i.responseText&&(se.partialText=i.responseText),r.next(se)},I=U=>{let se={type:on.UploadProgress,loaded:U.loaded};U.lengthComputable&&(se.total=U.total),r.next(se)};return i.addEventListener("load",d),i.addEventListener("error",h),i.addEventListener("timeout",h),i.addEventListener("abort",h),n.reportProgress&&(i.addEventListener("progress",b),null!==o&&i.upload&&i.upload.addEventListener("progress",I)),i.send(o),r.next({type:on.Sent}),()=>{i.removeEventListener("error",h),i.removeEventListener("abort",h),i.removeEventListener("load",d),i.removeEventListener("timeout",h),n.reportProgress&&(i.removeEventListener("progress",b),null!==o&&i.upload&&i.upload.removeEventListener("progress",I)),i.readyState!==i.DONE&&i.abort()}})}}return e.\u0275fac=function(n){return new(n||e)(Te(H_))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();const $h=new Je("XSRF_COOKIE_NAME"),qh=new Je("XSRF_HEADER_NAME");class Ab{}let kP=(()=>{class e{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=M_(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(Te(Qn),Te(Lf),Te($h))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})(),Wh=(()=>{class e{constructor(n,r){this.tokenService=n,this.headerName=r}intercept(n,r){const i=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(n);const o=this.tokenService.getToken();return null!==o&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,o)})),r.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(Te(Ab),Te(qh))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})(),NP=(()=>{class e{constructor(n,r){this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=this.injector.get(Hh,[]);this.chain=r.reduceRight((i,o)=>new Sb(i,o),this.backend)}return this.chain.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(Te(yb),Te(Kn))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})(),OP=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:Wh,useClass:MP}]}}static withOptions(n={}){return{ngModule:e,providers:[n.cookieName?{provide:$h,useValue:n.cookieName}:[],n.headerName?{provide:qh,useValue:n.headerName}:[]]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Cr({type:e}),e.\u0275inj=Qt({providers:[Wh,{provide:Hh,useExisting:Wh,multi:!0},{provide:Ab,useClass:kP},{provide:$h,useValue:"XSRF-TOKEN"},{provide:qh,useValue:"X-XSRF-TOKEN"}]}),e})(),xb=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Cr({type:e}),e.\u0275inj=Qt({providers:[Db,{provide:vb,useClass:NP},Fb,{provide:yb,useExisting:Fb}],imports:[OP.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),e})();class ir extends Pt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function Ib(...e){const t=Ri(e),n=function ks(e){return Q(xo(e))?e.pop():void 0}(e),{args:r,keys:i}=function aw(e){if(1===e.length){const t=e[0];if(gR(t))return{args:t,keys:null};if(function _R(e){return e&&"object"==typeof e&&mR(e)===vR}(t)){const n=yR(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return Nt([],t);const o=new Le(function LP(e,t,n=Gt){return r=>{Tb(t,()=>{const{length:i}=e,o=new Array(i);let s=i,l=i;for(let d=0;d<i;d++)Tb(t,()=>{const h=Nt(e[d],t);let g=!1;h.subscribe(ft(r,b=>{o[d]=b,g||(g=!0,l--),l||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>function lw(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}(i,s):Gt));return n?o.pipe(function uw(e){return L(t=>function bR(e,t){return wR(t)?e(...t):e(t)}(e,t))}(n)):o}function Tb(e,t,n){e?Er(n,e,t):t()}function Oa(e,t){const n=Q(e)?e:()=>e,r=i=>i.error(n());return new Le(t?i=>t.schedule(r,0,i):r)}const La=G(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function jl(...e){return function VP(){return li(1)}()(Nt(e,Ri(e)))}function Mb(e){return new Le(t=>{ur(e()).subscribe(t)})}function zh(){return lt((e,t)=>{let n=null;e._refCount++;const r=ft(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class Rb extends Le{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Vn(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new R;const n=this.getSubject();t.add(this.source.subscribe(ft(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=R.EMPTY)}return t}refCount(){return zh()(this)}}function yo(e,t){return lt((n,r)=>{let i=null,o=0,s=!1;const l=()=>s&&!i&&r.complete();n.subscribe(ft(r,d=>{null==i||i.unsubscribe();let h=0;const g=o++;ur(e(d,g)).subscribe(i=ft(r,b=>r.next(t?t(d,b,g,h++):b),()=>{i=null,l()}))},()=>{s=!0,l()}))})}function BP(e,t,n,r,i){return(o,s)=>{let l=n,d=t,h=0;o.subscribe(ft(s,g=>{const b=h++;d=l?e(d,g,b):(l=!0,g),r&&s.next(d)},i&&(()=>{l&&s.next(d),s.complete()})))}}function Pb(e,t){return lt(BP(e,t,arguments.length>=2,!0))}function Ji(e){return lt((t,n)=>{let o,r=null,i=!1;r=t.subscribe(ft(n,void 0,void 0,s=>{o=ur(e(s,Ji(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Kh(e){return e<=0?()=>lr:lt((t,n)=>{let r=[];t.subscribe(ft(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function kb(e=UP){return lt((t,n)=>{let r=!1;t.subscribe(ft(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function UP(){return new La}function Gh(e){return lt((t,n)=>{let r=!1;t.subscribe(ft(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function _o(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ai((i,o)=>e(i,o,r)):Gt,a(1),n?Gh(t):kb(()=>new La))}function yn(e,t,n){const r=Q(e)||t||n?{next:e,error:t,complete:n}:e;return r?lt((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let l=!0;i.subscribe(ft(o,d=>{var h;null===(h=r.next)||void 0===h||h.call(r,d),o.next(d)},()=>{var d;l=!1,null===(d=r.complete)||void 0===d||d.call(r),o.complete()},d=>{var h;l=!1,null===(h=r.error)||void 0===h||h.call(r,d),o.error(d)},()=>{var d,h;l&&(null===(d=r.unsubscribe)||void 0===d||d.call(r)),null===(h=r.finalize)||void 0===h||h.call(r)}))}):Gt}function Jh(e){return lt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}class Ii{constructor(t,n){this.id=t,this.url=n}}class Yh extends Ii{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Va extends Ii{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Nb extends Ii{constructor(t,n,r){super(t,n),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qP extends Ii{constructor(t,n,r){super(t,n),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class WP extends Ii{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zP extends Ii{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KP extends Ii{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class GP extends Ii{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JP extends Ii{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YP{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class QP{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ZP{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XP{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e2{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t2{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ob{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const it="primary";class n2{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Ss(e){return new n2(e)}const Lb="ngNavigationCancelingError";function Qh(e){const t=Error("NavigationCancelingError: "+e);return t[Lb]=!0,t}function i2(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],l=e[o];if(s.startsWith(":"))i[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function si(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Vb(e[i],t[i]))return!1;return!0}function Vb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}return e===t}function jb(e){return Array.prototype.concat.apply([],e)}function Bb(e){return e.length>0?e[e.length-1]:null}function En(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Wr(e){return of(e)?e:da(e)?Nt(Promise.resolve(e)):Ze(e)}const a2={exact:function $b(e,t,n){if(!bo(e.segments,t.segments)||!Bl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!$b(e.children[r],t.children[r],n))return!1;return!0},subset:qb},Ub={exact:function u2(e,t){return si(e,t)},subset:function l2(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Vb(e[n],t[n]))},ignored:()=>!0};function Hb(e,t,n){return a2[n.paths](e.root,t.root,n.matrixParams)&&Ub[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function qb(e,t,n){return Wb(e,t,t.segments,n)}function Wb(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!bo(i,n)||t.hasChildren()||!Bl(i,n,r))}if(e.segments.length===n.length){if(!bo(e.segments,n)||!Bl(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!qb(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(bo(e.segments,i)&&Bl(e.segments,i,r)&&e.children[it])&&Wb(e.children[it],t,o,r)}}function Bl(e,t,n){return t.every((r,i)=>Ub[n](e[i].parameters,r.parameters))}class wo{constructor(t,n,r){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ss(this.queryParams)),this._queryParamMap}toString(){return f2.serialize(this)}}class ut{constructor(t,n){this.segments=t,this.children=n,this.parent=null,En(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ul(this)}}class ja{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Ss(this.parameters)),this._parameterMap}toString(){return Yb(this)}}function bo(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}class zb{}class Kb{parse(t){const n=new b2(t);return new wo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Ba(t.root,!0)}`,r=function g2(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Hl(n)}=${Hl(i)}`).join("&"):`${Hl(n)}=${Hl(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function h2(e){return encodeURI(e)}(t.fragment)}`:""}`}}const f2=new Kb;function Ul(e){return e.segments.map(t=>Yb(t)).join("/")}function Ba(e,t){if(!e.hasChildren())return Ul(e);if(t){const n=e.children[it]?Ba(e.children[it],!1):"",r=[];return En(e.children,(i,o)=>{o!==it&&r.push(`${o}:${Ba(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function d2(e,t){let n=[];return En(e.children,(r,i)=>{i===it&&(n=n.concat(t(r,i)))}),En(e.children,(r,i)=>{i!==it&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===it?[Ba(e.children[it],!1)]:[`${i}:${Ba(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[it]?`${Ul(e)}/${n[0]}`:`${Ul(e)}/(${n.join("//")})`}}function Gb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hl(e){return Gb(e).replace(/%3B/gi,";")}function Zh(e){return Gb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $l(e){return decodeURIComponent(e)}function Jb(e){return $l(e.replace(/\+/g,"%20"))}function Yb(e){return`${Zh(e.path)}${function p2(e){return Object.keys(e).map(t=>`;${Zh(t)}=${Zh(e[t])}`).join("")}(e.parameters)}`}const m2=/^[^\/()?;=#]+/;function ql(e){const t=e.match(m2);return t?t[0]:""}const v2=/^[^=?&#]+/,_2=/^[^&#]+/;class b2{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ut([],{}):new ut([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[it]=new ut(t,n)),r}parseSegment(){const t=ql(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ja($l(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=ql(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=ql(this.remaining);i&&(r=i,this.capture(r))}t[$l(n)]=$l(r)}parseQueryParam(t){const n=function y2(e){const t=e.match(v2);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function w2(e){const t=e.match(_2);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=Jb(n),o=Jb(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ql(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=it);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[it]:new ut([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Qb{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=Xh(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=Xh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=ep(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return ep(t,this._root).map(n=>n.value)}}function Xh(e,t){if(e===t.value)return t;for(const n of t.children){const r=Xh(e,n);if(r)return r}return null}function ep(e,t){if(e===t.value)return[t];for(const n of t.children){const r=ep(e,n);if(r.length)return r.unshift(t),r}return[]}class Ti{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function Fs(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class Zb extends Qb{constructor(t,n){super(t),this.snapshot=n,tp(this,t)}toString(){return this.snapshot.toString()}}function Xb(e,t){const n=function E2(e,t){const s=new Wl([],{},{},"",{},it,t,null,e.root,-1,{});return new tE("",new Ti(s,[]))}(e,t),r=new ir([new ja("",{})]),i=new ir({}),o=new ir({}),s=new ir({}),l=new ir(""),d=new Yi(r,i,s,l,o,it,t,n.root);return d.snapshot=n.root,new Zb(new Ti(d,[]),n)}class Yi{constructor(t,n,r,i,o,s,l,d){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=l,this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(L(t=>Ss(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(L(t=>Ss(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function eE(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function C2(e){return e.reduce((t,n)=>{var r;return{params:Object.assign(Object.assign({},t.params),n.params),data:Object.assign(Object.assign({},t.data),n.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},n.data),t.resolve),null===(r=n.routeConfig)||void 0===r?void 0:r.data),n._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}class Wl{constructor(t,n,r,i,o,s,l,d,h,g,b,I){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=l,this.routeConfig=d,this._urlSegment=h,this._lastPathIndex=g,this._correctedLastPathIndex=null!=I?I:g,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ss(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ss(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class tE extends Qb{constructor(t,n){super(n),this.url=t,tp(this,n)}toString(){return nE(this._root)}}function tp(e,t){t.value._routerState=e,t.children.forEach(n=>tp(e,n))}function nE(e){const t=e.children.length>0?` { ${e.children.map(nE).join(", ")} } `:"";return`${e.value}${t}`}function np(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,si(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),si(t.params,n.params)||e.params.next(n.params),function o2(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!si(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),si(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function rp(e,t){const n=si(e.params,t.params)&&function c2(e,t){return bo(e,t)&&e.every((n,r)=>si(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||rp(e.parent,t.parent))}function Ua(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function S2(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Ua(e,r,i);return Ua(e,r)})}(e,t,n);return new Ti(r,i)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(l=>Ua(e,l)),s}}const r=function F2(e){return new Yi(new ir(e.url),new ir(e.params),new ir(e.queryParams),new ir(e.fragment),new ir(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(o=>Ua(e,o));return new Ti(r,i)}}function zl(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Ha(e){return"object"==typeof e&&null!=e&&e.outlets}function ip(e,t,n,r,i){let o={};if(r&&En(r,(l,d)=>{o[d]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),e===t)return new wo(n,o,i);const s=rE(e,t,n);return new wo(s,o,i)}function rE(e,t,n){const r={};return En(e.children,(i,o)=>{r[o]=i===t?n:rE(i,t,n)}),new ut(e.segments,r)}class iE{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&zl(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Ha);if(i&&i!==Bb(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class op{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function oE(e,t,n){if(e||(e=new ut([],{})),0===e.segments.length&&e.hasChildren())return Kl(e,t,n);const r=function R2(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const s=e.segments[i],l=n[r];if(Ha(l))break;const d=`${l}`,h=r<n.length-1?n[r+1]:null;if(i>0&&void 0===d)break;if(d&&h&&"object"==typeof h&&void 0===h.outlets){if(!aE(d,h,s))return o;r+=2}else{if(!aE(d,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new ut(e.segments.slice(0,r.pathIndex),{});return o.children[it]=new ut(e.segments.slice(r.pathIndex),e.children),Kl(o,0,i)}return r.match&&0===i.length?new ut(e.segments,{}):r.match&&!e.hasChildren()?sp(e,t,n):r.match?Kl(e,0,i):sp(e,t,n)}function Kl(e,t,n){if(0===n.length)return new ut(e.segments,{});{const r=function M2(e){return Ha(e[0])?e[0].outlets:{[it]:e}}(n),i={};return En(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=oE(e.children[s],t,o))}),En(e.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new ut(e.segments,i)}}function sp(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const o=n[i];if(Ha(o)){const d=P2(o.outlets);return new ut(r,d)}if(0===i&&zl(n[0])){r.push(new ja(e.segments[t].path,sE(n[0]))),i++;continue}const s=Ha(o)?o.outlets[it]:`${o}`,l=i<n.length-1?n[i+1]:null;s&&l&&zl(l)?(r.push(new ja(s,sE(l))),i+=2):(r.push(new ja(s,{})),i++)}return new ut(r,{})}function P2(e){const t={};return En(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=sp(new ut([],{}),0,n))}),t}function sE(e){const t={};return En(e,(n,r)=>t[r]=`${n}`),t}function aE(e,t,n){return e==n.path&&si(t,n.parameters)}class k2{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new $a,this.attachRef=null}}class $a{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new k2,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}let ap=(()=>{class e{constructor(n,r,i,o,s){this.parentContexts=n,this.location=r,this.changeDetector=o,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Kt,this.deactivateEvents=new Kt,this.attachEvents=new Kt,this.detachEvents=new Kt,this.name=i||it,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const i=this.location,s=n._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new N2(n,l,i.injector);if(r&&function O2(e){return!!e.resolveComponentFactory}(r)){const h=r.resolveComponentFactory(s);this.activated=i.createComponent(h,i.length,d)}else this.activated=i.createComponent(s,{index:i.length,injector:d,environmentInjector:null!=r?r:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)(ye($a),ye(Hr),Ws("name"),ye(ll),ye(lo))},e.\u0275dir=Ke({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),e})();class N2{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Yi?this.route:t===$a?this.childContexts:this.parent.get(t,n)}}let uE=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Rr({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&ho(0,"router-outlet")},dependencies:[ap],encapsulation:2}),e})();function lE(e,t){var n;return e.providers&&!e._injector&&(e._injector=tl(e.providers,t,`Route: ${e.path}`)),null!==(n=e._injector)&&void 0!==n?n:t}function lp(e){const t=e.children&&e.children.map(lp),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==it&&(n.component=uE),n}function Mr(e){return e.outlet||it}function cE(e,t){const n=e.filter(r=>Mr(r)===t);return n.push(...e.filter(r=>Mr(r)!==t)),n}function dE(e){var t;if(!e)return null;if(null!==(t=e.routeConfig)&&void 0!==t&&t._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const r=n.routeConfig;if(null!=r&&r._loadedInjector)return r._loadedInjector;if(null!=r&&r._injector)return r._injector}return null}class U2{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),np(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=Fs(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),En(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Fs(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:l})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Fs(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=Fs(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new t2(o.value.snapshot))}),t.children.length&&this.forwardEvent(new XP(t.value.snapshot))}activateRoutes(t,n,r){var i;const o=t.value,s=n?n.value:null;if(np(o),o===s)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,l.children)}else this.activateChildRoutes(t,n,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const d=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),np(d.route.value),this.activateChildRoutes(t,null,l.children)}else{const d=dE(o.snapshot),h=null!==(i=null==d?void 0:d.get(va))&&void 0!==i?i:null;l.attachRef=null,l.route=o,l.resolver=h,l.injector=d,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(t,null,l.children)}}else this.activateChildRoutes(t,null,r)}}function Qi(e){return"function"==typeof e}function Eo(e){return e instanceof wo}const qa=Symbol("INITIAL_VALUE");function Wa(){return yo(e=>Ib(e.map(t=>t.pipe(a(1),function jP(...e){const t=Ri(e);return lt((n,r)=>{(t?jl(e,n,t):jl(e,n)).subscribe(r)})}(qa)))).pipe(Pb((t,n)=>{let r=!1;return n.reduce((i,o,s)=>i!==qa?i:(o===qa&&(r=!0),r||!1!==o&&s!==n.length-1&&!Eo(o)?i:o),t)},qa),Ai(t=>t!==qa),L(t=>Eo(t)?t:!0===t),a(1)))}const fE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gl(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},fE):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const o=(t.matcher||i2)(n,e,t);if(!o)return Object.assign({},fE);const s={};En(o.posParams,(d,h)=>{s[h]=d.path});const l=o.consumed.length>0?Object.assign(Object.assign({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:l,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function Jl(e,t,n,r,i="corrected"){if(n.length>0&&function J2(e,t,n){return n.some(r=>Yl(e,t,r)&&Mr(r)!==it)}(e,n,r)){const s=new ut(t,function G2(e,t,n,r){const i={};i[it]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&Mr(o)!==it){const s=new ut([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,i[Mr(o)]=s}return i}(e,t,r,new ut(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function Y2(e,t,n){return n.some(r=>Yl(e,t,r))}(e,n,r)){const s=new ut(e.segments,function K2(e,t,n,r,i,o){const s={};for(const l of r)if(Yl(e,n,l)&&!i[Mr(l)]){const d=new ut([],{});d._sourceSegment=e,d._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[Mr(l)]=d}return Object.assign(Object.assign({},i),s)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const o=new ut(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function Yl(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function hE(e,t,n,r){return!!(Mr(e)===r||r!==it&&Yl(t,n,e))&&("**"===e.path||Gl(t,e,n).matched)}function pE(e,t,n){return 0===t.length&&!e.children[n]}class Ql{constructor(t){this.segmentGroup=t||null}}class gE{constructor(t){this.urlTree=t}}function za(e){return Oa(new Ql(e))}function mE(e){return Oa(new gE(e))}class ek{constructor(t,n,r,i,o){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const t=Jl(this.urlTree.root,[],[],this.config).segmentGroup,n=new ut(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,it).pipe(L(o=>this.createUrlTree(cp(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ji(o=>{if(o instanceof gE)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Ql?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,it).pipe(L(i=>this.createUrlTree(cp(i),t.queryParams,t.fragment))).pipe(Ji(i=>{throw i instanceof Ql?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,r){const i=t.segments.length>0?new ut([],{[it]:t}):t;return new wo(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(L(o=>new ut([],o))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Nt(i).pipe(Ds(o=>{const s=r.children[o],l=cE(n,o);return this.expandSegmentGroup(t,l,s,o).pipe(L(d=>({segment:d,outlet:o})))}),Pb((o,s)=>(o[s.outlet]=s.segment,o),{}),function HP(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ai((i,o)=>e(i,o,r)):Gt,Kh(1),n?Gh(t):kb(()=>new La))}())}expandSegment(t,n,r,i,o,s){return Nt(r).pipe(Ds(l=>this.expandSegmentAgainstRoute(t,n,r,l,i,o,s).pipe(Ji(h=>{if(h instanceof Ql)return Ze(null);throw h}))),_o(l=>!!l),Ji((l,d)=>{if(l instanceof La||"EmptyError"===l.name)return pE(n,i,o)?Ze(new ut([],{})):za(n);throw l}))}expandSegmentAgainstRoute(t,n,r,i,o,s,l){return hE(i,n,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,o,s):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s):za(n):za(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?mE(o):this.lineralizeSegments(r,o).pipe(Tt(s=>{const l=new ut(s,{});return this.expandSegment(t,l,n,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){const{matched:l,consumedSegments:d,remainingSegments:h,positionalParamSegments:g}=Gl(n,i,o);if(!l)return za(n);const b=this.applyRedirectCommands(d,i.redirectTo,g);return i.redirectTo.startsWith("/")?mE(b):this.lineralizeSegments(i,b).pipe(Tt(I=>this.expandSegment(t,n,r,I.concat(h),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){if("**"===r.path)return t=lE(r,t),r.loadChildren?(r._loadedRoutes?Ze({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(L(b=>(r._loadedRoutes=b.routes,r._loadedInjector=b.injector,new ut(i,{})))):Ze(new ut(i,{}));const{matched:s,consumedSegments:l,remainingSegments:d}=Gl(n,r,i);return s?(t=lE(r,t),this.getChildConfig(t,r,i).pipe(Tt(g=>{var b;const I=null!==(b=g.injector)&&void 0!==b?b:t,U=g.routes,{segmentGroup:se,slicedSegments:he}=Jl(n,l,d,U),Ee=new ut(se.segments,se.children);if(0===he.length&&Ee.hasChildren())return this.expandChildren(I,U,Ee).pipe(L(Pe=>new ut(l,Pe)));if(0===U.length&&0===he.length)return Ze(new ut(l,{}));const ge=Mr(r)===o;return this.expandSegment(I,Ee,U,he,ge?it:o,!0).pipe(L(me=>new ut(l.concat(me.segments),me.children)))}))):za(n)}getChildConfig(t,n,r){return n.children?Ze({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?Ze({routes:n._loadedRoutes,injector:n._loadedInjector}):this.runCanLoadGuards(t,n,r).pipe(Tt(i=>i?this.configLoader.loadChildren(t,n).pipe(yn(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function Z2(e){return Oa(Qh(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`))}(n))):Ze({routes:[],injector:t})}runCanLoadGuards(t,n,r){const i=n.canLoad;return i&&0!==i.length?Ze(i.map(s=>{const l=t.get(s);let d;if(function $2(e){return e&&Qi(e.canLoad)}(l))d=l.canLoad(n,r);else{if(!Qi(l))throw new Error("Invalid CanLoad guard");d=l(n,r)}return Wr(d)})).pipe(Wa(),yn(s=>{if(!Eo(s))return;const l=Qh(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw l.url=s,l}),L(s=>!0===s)):Ze(!0)}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ze(r);if(i.numberOfChildren>1||!i.children[it])return Oa(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));i=i.children[it]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreatreUrlTree(t,n,r,i){const o=this.createSegmentGroup(t,n.root,r,i);return new wo(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return En(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);r[o]=n[l]}else r[o]=i}),r}createSegmentGroup(t,n,r,i){const o=this.createSegments(t,n.segments,r,i);let s={};return En(n.children,(l,d)=>{s[d]=this.createSegmentGroup(t,l,r,i)}),new ut(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}function cp(e){const t={};for(const r of Object.keys(e.children)){const o=cp(e.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function tk(e){if(1===e.numberOfChildren&&e.children[it]){const t=e.children[it];return new ut(e.segments.concat(t.segments),t.children)}return e}(new ut(e.segments,t))}class vE{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Zl{constructor(t,n){this.component=t,this.route=n}}function rk(e,t,n){const r=e._root;return Ka(r,t?t._root:null,n,[r.value])}function Xl(e,t,n){const r=dE(t);return(null!=r?r:n).get(e)}function Ka(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Fs(t);return e.children.forEach(s=>{(function ok(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,l=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const d=function sk(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!bo(e.url,t.url);case"pathParamsOrQueryParamsChange":return!bo(e.url,t.url)||!si(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rp(e,t)||!si(e.queryParams,t.queryParams);default:return!rp(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new vE(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ka(e,t,o.component?l?l.children:null:n,r,i),d&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new Zl(l.outlet.component,s))}else s&&Ga(t,l,i),i.canActivateChecks.push(new vE(r)),Ka(e,null,o.component?l?l.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),En(o,(s,l)=>Ga(s,n.getContext(l),i)),i}function Ga(e,t,n){const r=Fs(e),i=e.value;En(r,(o,s)=>{Ga(o,i.component?t?t.children.getContext(s):null:t,n)}),n.canDeactivateChecks.push(new Zl(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class gk{}function _E(e){return new Le(t=>t.error(e))}class vk{constructor(t,n,r,i,o,s){this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}recognize(){const t=Jl(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,it);if(null===n)return null;const r=new Wl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},it,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ti(r,n),o=new tE(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(t){const n=t.value,r=eE(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,r)}processChildren(t,n){const r=[];for(const o of Object.keys(n.children)){const s=n.children[o],l=cE(t,o),d=this.processSegmentGroup(l,s,o);if(null===d)return null;r.push(...d)}const i=wE(r);return function yk(e){e.sort((t,n)=>t.value.outlet===it?-1:n.value.outlet===it?1:t.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(t,n,r,i){for(const o of t){const s=this.processSegmentAgainstRoute(o,n,r,i);if(null!==s)return s}return pE(n,r,i)?[]:null}processSegmentAgainstRoute(t,n,r,i){var o,s,l,d;if(t.redirectTo||!hE(t,n,r,i))return null;let h,g=[],b=[];if("**"===t.path){const ge=r.length>0?Bb(r).parameters:{},Ce=EE(n)+r.length;h=new Wl(r,ge,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,DE(t),Mr(t),null!==(s=null!==(o=t.component)&&void 0!==o?o:t._loadedComponent)&&void 0!==s?s:null,t,bE(n),Ce,SE(t),Ce)}else{const ge=Gl(n,t,r);if(!ge.matched)return null;g=ge.consumedSegments,b=ge.remainingSegments;const Ce=EE(n)+g.length;h=new Wl(g,ge.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,DE(t),Mr(t),null!==(d=null!==(l=t.component)&&void 0!==l?l:t._loadedComponent)&&void 0!==d?d:null,t,bE(n),Ce,SE(t),Ce)}const I=function _k(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:se}=Jl(n,g,b,I.filter(ge=>void 0===ge.redirectTo),this.relativeLinkResolution);if(0===se.length&&U.hasChildren()){const ge=this.processChildren(I,U);return null===ge?null:[new Ti(h,ge)]}if(0===I.length&&0===se.length)return[new Ti(h,[])];const he=Mr(t)===i,Ee=this.processSegment(I,U,se,he?it:i);return null===Ee?null:[new Ti(h,Ee)]}}function wk(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function wE(e){const t=[],n=new Set;for(const r of e){if(!wk(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=wE(r.children);t.push(new Ti(r.value,i))}return t.filter(r=>!n.has(r))}function bE(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function EE(e){var t,n;let r=e,i=null!==(t=r._segmentIndexShift)&&void 0!==t?t:0;for(;r._sourceSegment;)r=r._sourceSegment,i+=null!==(n=r._segmentIndexShift)&&void 0!==n?n:0;return i-1}function DE(e){return e.data||{}}function SE(e){return e.resolve||{}}const dp=Symbol("RouteTitle");function FE(e){return"string"==typeof e.title||null===e.title}function fp(e){return yo(t=>{const n=e(t);return n?Nt(n).pipe(L(()=>t)):Ze(t)})}class Ik extends class xk{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const hp=new Je("ROUTES");let pp=(()=>{class e{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Ze(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Wr(n.loadComponent()).pipe(yn(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Jh(()=>{this.componentLoaders.delete(n)})),i=new Rb(r,()=>new Pt).pipe(zh());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ze({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(L(l=>{this.onLoadEndListener&&this.onLoadEndListener(r);let d,h,g=!1;Array.isArray(l)?h=l:(d=l.create(n).injector,h=jb(d.get(hp,[],Ue.Self|Ue.Optional)));return{routes:h.map(lp),injector:d}}),Jh(()=>{this.childrenLoaders.delete(r)})),s=new Rb(o,()=>new Pt).pipe(zh());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(n){return Wr(n()).pipe(Tt(r=>r instanceof a0||Array.isArray(r)?Ze(r):Nt(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)(Te(Kn),Te(Vf))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();class Mk{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function Pk(e){throw e}function kk(e,t,n){return t.parse("/")}const Nk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ok={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let On=(()=>{class e{constructor(n,r,i,o,s,l,d){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=d,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Pt,this.errorHandler=Pk,this.malformedUriErrorHandler=kk,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ze(void 0),this.urlHandlingStrategy=new Mk,this.routeReuseStrategy=new Ik,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(pp),this.configLoader.onLoadEndListener=I=>this.triggerEvent(new QP(I)),this.configLoader.onLoadStartListener=I=>this.triggerEvent(new YP(I)),this.ngModule=s.get($i),this.console=s.get(FI);const b=s.get(tn);this.isNgZoneEnabled=b instanceof tn&&tn.isInAngularZone(),this.resetConfig(d),this.currentUrlTree=function s2(){return new wo(new ut([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Xb(this.currentUrlTree,this.rootComponentType),this.transitions=new ir({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(Ai(i=>0!==i.id),L(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),yo(i=>{let o=!1,s=!1;return Ze(i).pipe(yn(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),yo(l=>{const d=this.browserUrlTree.toString(),h=!this.navigated||l.extractedUrl.toString()!==d||d!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return xE(l.source)&&(this.browserUrlTree=l.extractedUrl),Ze(l).pipe(yo(b=>{const I=this.transitions.getValue();return r.next(new Yh(b.id,this.serializeUrl(b.extractedUrl),b.source,b.restoredState)),I!==this.transitions.getValue()?lr:Promise.resolve(b)}),function nk(e,t,n,r){return yo(i=>function X2(e,t,n,r,i){return new ek(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(L(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),yn(b=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:b.urlAfterRedirects})}),function bk(e,t,n,r,i){return Tt(o=>function mk(e,t,n,r,i="emptyOnly",o="legacy"){try{const s=new vk(e,t,n,r,i,o).recognize();return null===s?_E(new gk):Ze(s)}catch(s){return _E(s)}}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(L(s=>Object.assign(Object.assign({},o),{targetSnapshot:s}))))}(this.rootComponentType,this.config,b=>this.serializeUrl(b),this.paramsInheritanceStrategy,this.relativeLinkResolution),yn(b=>{if("eager"===this.urlUpdateStrategy){if(!b.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);this.setBrowserUrl(U,b)}this.browserUrlTree=b.urlAfterRedirects}const I=new WP(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);r.next(I)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:I,extractedUrl:U,source:se,restoredState:he,extras:Ee}=l,ge=new Yh(I,this.serializeUrl(U),se,he);r.next(ge);const Ce=Xb(U,this.rootComponentType).snapshot;return Ze(Object.assign(Object.assign({},l),{targetSnapshot:Ce,urlAfterRedirects:U,extras:Object.assign(Object.assign({},Ee),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=l.rawUrl,l.resolve(null),lr}),yn(l=>{const d=new zP(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(d)}),L(l=>Object.assign(Object.assign({},l),{guards:rk(l.targetSnapshot,l.currentSnapshot,this.rootContexts)})),function ak(e,t){return Tt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Ze(Object.assign(Object.assign({},n),{guardsResult:!0})):function uk(e,t,n,r){return Nt(e).pipe(Tt(i=>function pk(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Ze(o.map(l=>{const d=Xl(l,t,i);let h;if(function z2(e){return e&&Qi(e.canDeactivate)}(d))h=Wr(d.canDeactivate(e,t,n,r));else{if(!Qi(d))throw new Error("Invalid CanDeactivate guard");h=Wr(d(e,t,n,r))}return h.pipe(_o())})).pipe(Wa()):Ze(!0)}(i.component,i.route,n,t,r)),_o(i=>!0!==i,!0))}(s,r,i,e).pipe(Tt(l=>l&&function H2(e){return"boolean"==typeof e}(l)?function lk(e,t,n,r){return Nt(t).pipe(Ds(i=>jl(function dk(e,t){return null!==e&&t&&t(new ZP(e)),Ze(!0)}(i.route.parent,r),function ck(e,t){return null!==e&&t&&t(new e2(e)),Ze(!0)}(i.route,r),function hk(e,t,n){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function ik(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>Mb(()=>Ze(s.guards.map(d=>{const h=Xl(d,s.node,n);let g;if(function W2(e){return e&&Qi(e.canActivateChild)}(h))g=Wr(h.canActivateChild(r,e));else{if(!Qi(h))throw new Error("Invalid CanActivateChild guard");g=Wr(h(r,e))}return g.pipe(_o())})).pipe(Wa())));return Ze(o).pipe(Wa())}(e,i.path,n),function fk(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Ze(!0);const i=r.map(o=>Mb(()=>{const s=Xl(o,t,n);let l;if(function q2(e){return e&&Qi(e.canActivate)}(s))l=Wr(s.canActivate(t,e));else{if(!Qi(s))throw new Error("Invalid CanActivate guard");l=Wr(s(t,e))}return l.pipe(_o())}));return Ze(i).pipe(Wa())}(e,i.route,n))),_o(i=>!0!==i,!0))}(r,o,e,t):Ze(l)),L(l=>Object.assign(Object.assign({},n),{guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),yn(l=>{if(Eo(l.guardsResult)){const h=Qh(`Redirecting to "${this.serializeUrl(l.guardsResult)}"`);throw h.url=l.guardsResult,h}const d=new KP(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(d)}),Ai(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,""),!1)),fp(l=>{if(l.guards.canActivateChecks.length)return Ze(l).pipe(yn(d=>{const h=new GP(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(h)}),yo(d=>{let h=!1;return Ze(d).pipe(function Ek(e,t){return Tt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ze(n);let o=0;return Nt(i).pipe(Ds(s=>function Ck(e,t,n,r){const i=e.routeConfig,o=e._resolve;return void 0!==(null==i?void 0:i.title)&&!FE(i)&&(o[dp]=i.title),function Dk(e,t,n,r){const i=function Sk(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return Ze({});const o={};return Nt(i).pipe(Tt(s=>function Fk(e,t,n,r){const i=Xl(e,t,r);return Wr(i.resolve?i.resolve(t,n):i(t,n))}(e[s],t,n,r).pipe(_o(),yn(l=>{o[s]=l}))),Kh(1),function $P(e){return L(()=>e)}(o),Ji(s=>s instanceof La?lr:Oa(s)))}(o,e,t,r).pipe(L(s=>(e._resolvedData=s,e.data=eE(e,n).resolve,i&&FE(i)&&(e.data[dp]=i.title),null)))}(s.route,r,e,t)),yn(()=>o++),Kh(1),Tt(s=>o===i.length?Ze(n):lr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),yn({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(d),this.cancelNavigationTransition(d,"At least one route resolver didn't emit any value."))}}))}),yn(d=>{const h=new JP(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(h)}))}),fp(()=>this.afterPreactivation()),fp(l=>{const d=h=>{var g;const b=[];(null===(g=h.routeConfig)||void 0===g?void 0:g.loadComponent)&&!h.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(h.routeConfig).pipe(yn(I=>{h.component=I}),L(()=>{})));for(const I of h.children)b.push(...d(I));return b};return Ib(d(l.targetSnapshot.root)).pipe(Gh(),a(1))}),L(l=>{const d=function D2(e,t,n){const r=Ua(e,t._root,n?n._root:void 0);return new Zb(r,t)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return Object.assign(Object.assign({},l),{targetRouterState:d})}),yn(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((e,t,n)=>L(r=>(new U2(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),yn({next(){o=!0},complete(){o=!0}}),Jh(()=>{var l;o||s||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(l=this.currentNavigation)||void 0===l?void 0:l.id)===i.id&&(this.currentNavigation=null)}),Ji(l=>{if(s=!0,function r2(e){return e&&e[Lb]}(l)){const d=Eo(l.url);d||(this.navigated=!0,this.restoreHistory(i,!0));const h=new Nb(i.id,this.serializeUrl(i.extractedUrl),l.message);if(r.next(h),d){const g=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),b={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||xE(i.source)};this.scheduleNavigation(g,"imperative",null,b,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const d=new qP(i.id,this.serializeUrl(i.extractedUrl),l);r.next(d);try{i.resolve(this.errorHandler(l))}catch(h){i.reject(h)}}return lr}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const o={replaceUrl:!0},s=null!==(i=n.state)&&void 0!==i&&i.navigationId?n.state:null;if(s){const d=Object.assign({},s);delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(o.state=d)}const l=this.parseUrl(n.url);this.scheduleNavigation(l,r,s,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(lp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:l,preserveFragment:d}=r,h=i||this.routerState.root,g=d?this.currentUrlTree.fragment:s;let b=null;switch(l){case"merge":b=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=o||null}return null!==b&&(b=this.removeEmptyProps(b)),function A2(e,t,n,r,i){var o;if(0===n.length)return ip(t.root,t.root,t.root,r,i);const l=function x2(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new iE(!0,0,e);let t=0,n=!1;const r=e.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const l={};return En(o.outlets,(d,h)=>{l[h]="string"==typeof d?d.split("/"):d}),[...i,{outlets:l}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((l,d)=>{0==d&&"."===l||(0==d&&""===l?n=!0:".."===l?t++:""!=l&&i.push(l))}),i):[...i,o]},[]);return new iE(n,t,r)}(n);return l.toRoot()?ip(t.root,t.root,new ut([],{}),r,i):function d(g){var b;const I=function I2(e,t,n,r){return e.isAbsolute?new op(t.root,!0,0):-1===r?new op(n,n===t.root,0):function T2(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new op(r,!1,i-o)}(n,r+(zl(e.commands[0])?0:1),e.numberOfDoubleDots)}(l,t,null===(b=e.snapshot)||void 0===b?void 0:b._urlSegment,g),U=I.processChildren?Kl(I.segmentGroup,I.index,l.commands):oE(I.segmentGroup,I.index,l.commands);return ip(t.root,I.segmentGroup,U,r,i)}(null===(o=e.snapshot)||void 0===o?void 0:o._lastPathIndex)}(h,this.currentUrlTree,n,b,null!=g?g:null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Eo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function Lk(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?Object.assign({},Nk):!1===r?Object.assign({},Ok):r,Eo(n))return Hb(this.currentUrlTree,n,i);const o=this.parseUrl(n);return Hb(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(n=>{var r;this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Va(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(r=this.titleStrategy)||void 0===r||r.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,o,s){var l,d;if(this.disposed)return Promise.resolve(!1);let h,g,b;s?(h=s.resolve,g=s.reject,b=s.promise):b=new Promise((se,he)=>{h=se,g=he});const I=++this.navigationId;let U;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),U=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(d=this.browserPageId)&&void 0!==d?d:0)+1):U=0,this.setTransition({id:I,targetPageId:U,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:h,reject:g,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(se=>Promise.reject(se))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(n,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===s?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new Nb(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){Ad()},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();function xE(e){return"imperative"!==e}let gp=(()=>{class e{constructor(n,r,i,o,s){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.commands=null,this.onChanges=new Pt,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==n?r.setAttribute(i,"tabindex",n):r.removeAttribute(i,"tabindex")}ngOnChanges(n){this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const n={skipLocationChange:Di(this.skipLocationChange),replaceUrl:Di(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,n),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Di(this.preserveFragment)})}}return e.\u0275fac=function(n){return new(n||e)(ye(On),ye(Yi),Ws("tabindex"),ye(wi),ye(yr))},e.\u0275dir=Ke({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(n,r){1&n&&Gn("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Sr]}),e})(),Ja=(()=>{class e{constructor(n,r,i){this.router=n,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Pt,this.subscription=n.events.subscribe(o=>{o instanceof Va&&this.updateTargetUrlAndHref()})}set routerLink(n){this.commands=null!=n?Array.isArray(n)?n:[n]:null}ngOnChanges(n){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(n,r,i,o,s){if(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const l={skipLocationChange:Di(this.skipLocationChange),replaceUrl:Di(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,l),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Di(this.preserveFragment)})}}return e.\u0275fac=function(n){return new(n||e)(ye(On),ye(Yi),ye(Es))},e.\u0275dir=Ke({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(n,r){1&n&&Gn("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&n&&jr("target",r.target)("href",r.href,Yc)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Sr]}),e})(),IE=(()=>{class e{constructor(n,r,i,o,s,l){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.linkWithHref=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Kt,this.routerEventsSubscription=n.events.subscribe(d=>{d instanceof Va&&this.update()})}ngAfterContentInit(){Ze(this.links.changes,this.linksWithHrefs.changes,Ze(null)).pipe(li()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var n;null===(n=this.linkInputChangesSubscription)||void 0===n||n.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Nt(r).pipe(li()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){var n;this.routerEventsSubscription.unsubscribe(),null===(n=this.linkInputChangesSubscription)||void 0===n||n.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const n=this.hasActiveLinks();this.isActive!==n&&(this.isActive=n,this.cdr.markForCheck(),this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function Vk(e){return!!e.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&n.isActive(i.urlTree,r)}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.linkWithHref&&n(this.linkWithHref)||this.links.some(n)||this.linksWithHrefs.some(n)}}return e.\u0275fac=function(n){return new(n||e)(ye(On),ye(yr),ye(wi),ye(ll),ye(gp,8),ye(Ja,8))},e.\u0275dir=Ke({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(n,r,i){if(1&n&&(If(i,gp,5),If(i,Ja,5)),2&n){let o;xf(o=Tf())&&(r.links=o),xf(o=Tf())&&(r.linksWithHrefs=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Sr]}),e})();class TE{buildTitle(t){var n;let r,i=t.root;for(;void 0!==i;)r=null!==(n=this.getResolvedTitleForRoute(i))&&void 0!==n?n:r,i=i.children.find(o=>o.outlet===it);return r}getResolvedTitleForRoute(t){return t.data[dp]}}let jk=(()=>{class e extends TE{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(Te(iw))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class ME{}class RE{preload(t,n){return Ze(null)}}let PE=(()=>{class e{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ai(n=>n instanceof Va),Ds(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){var i,o,s;const l=[];for(const d of r){d.providers&&!d._injector&&(d._injector=tl(d.providers,n,`Route: ${d.path}`));const h=null!==(i=d._injector)&&void 0!==i?i:n,g=null!==(o=d._loadedInjector)&&void 0!==o?o:h;d.loadChildren&&!d._loadedRoutes||d.loadComponent&&!d._loadedComponent?l.push(this.preloadConfig(h,d)):(d.children||d._loadedRoutes)&&l.push(this.processRoutes(g,null!==(s=d.children)&&void 0!==s?s:d._loadedRoutes))}return Nt(l).pipe(li())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):Ze(null);const o=i.pipe(Tt(s=>{var l;return null===s?Ze(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(null!==(l=s.injector)&&void 0!==l?l:n,s.routes))}));return r.loadComponent&&!r._loadedComponent?Nt([o,this.loader.loadComponent(r)]).pipe(li()):o})}}return e.\u0275fac=function(n){return new(n||e)(Te(On),Te(Vf),Te(lo),Te(ME),Te(pp))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})(),mp=(()=>{class e{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Yh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Va&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Ob&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new Ob(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){Ad()},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();const Co=new Je("ROUTER_CONFIGURATION"),kE=new Je("ROUTER_FORROOT_GUARD"),Uk=[Qf,{provide:zb,useClass:Kb},{provide:On,useFactory:function zk(e,t,n,r,i,o,s={},l,d,h,g){const b=new On(null,e,t,n,r,i,jb(o));return h&&(b.urlHandlingStrategy=h),g&&(b.routeReuseStrategy=g),b.titleStrategy=null!=d?d:l,function Kk(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(t.canceledNavigationResolution=e.canceledNavigationResolution)}(s,b),b},deps:[zb,$a,Qf,Kn,Vf,hp,Co,jk,[TE,new gi],[class Tk{},new gi],[class Ak{},new gi]]},$a,{provide:Yi,useFactory:function Gk(e){return e.routerState.root},deps:[On]},PE,RE,class Bk{preload(t,n){return n().pipe(Ji(()=>Ze(null)))}},{provide:Co,useValue:{enableTracing:!1}},pp];function Hk(){return new Z0("Router",On)}let NE=(()=>{class e{constructor(n,r){}static forRoot(n,r){return{ngModule:e,providers:[Uk,OE(n),{provide:kE,useFactory:Wk,deps:[[On,new gi,new Zs]]},{provide:Co,useValue:r||{}},{provide:Es,useFactory:qk,deps:[Fa,[new Au(Yf),new gi],Co]},{provide:mp,useFactory:$k,deps:[On,MM,Co]},{provide:ME,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:RE},{provide:Z0,multi:!0,useFactory:Hk},[vp,{provide:Nf,multi:!0,useFactory:Jk,deps:[vp]},{provide:LE,useFactory:Yk,deps:[vp]},{provide:z0,multi:!0,useExisting:LE}]]}}static forChild(n){return{ngModule:e,providers:[OE(n)]}}}return e.\u0275fac=function(n){return new(n||e)(Te(kE,8),Te(On,8))},e.\u0275mod=Cr({type:e}),e.\u0275inj=Qt({}),e})();function $k(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new mp(e,t,n)}function qk(e,t,n={}){return n.useHash?new gT(e,t):new b_(e,t)}function Wk(e){return"guarded"}function OE(e){return[{provide:qC,multi:!0,useValue:e},{provide:hp,multi:!0,useValue:e}]}let vp=(()=>{class e{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Pt}appInitializer(){return this.injector.get(fT,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(l=>r=l),o=this.injector.get(On),s=this.injector.get(Co);return"disabled"===s.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabledBlocking"===s.initialNavigation?(o.afterPreactivation=()=>this.initNavigation?Ze(void 0):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(n){const r=this.injector.get(Co),i=this.injector.get(PE),o=this.injector.get(mp),s=this.injector.get(On),l=this.injector.get(al);n===l.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&s.initialNavigation(),i.setUpPreloading(),o.init(),s.resetRootComponentType(l.componentTypes[0]),this.resultOfPreactivationDone.next(void 0),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(n){return new(n||e)(Te(Kn))},e.\u0275prov=Be({token:e,factory:e.\u0275fac}),e})();function Jk(e){return e.appInitializer.bind(e)}function Yk(e){return e.bootstrapListener.bind(e)}const LE=new Je("Router Initializer");function VE(e,t,n,r,i,o,s){try{var l=e[o](s),d=l.value}catch(h){return void n(h)}l.done?t(d):Promise.resolve(d).then(r,i)}function or(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(d){VE(o,r,i,s,l,"next",d)}function l(d){VE(o,r,i,s,l,"throw",d)}s(void 0)})}}var Zk=k(497);const jE="Northwind.Web.App";let ui={DefaultLoginRedirectPath:"/",ApiAuthorizationClientConfigurationUrl:`_configuration/${jE}`,Login:"authentication/login",LoginFailed:"authentication/login-failed",LoginCallback:"authentication/login-callback",Register:"authentication/register",Profile:"authentication/profile",LogOut:"authentication/logout",LoggedOut:"authentication/logged-out",LogOutCallback:"authentication/logout-callback",LoginPathComponents:[],LoginFailedPathComponents:[],LoginCallbackPathComponents:[],RegisterPathComponents:[],ProfilePathComponents:[],LogOutPathComponents:[],LoggedOutPathComponents:[],LogOutCallbackPathComponents:[],IdentityRegisterPath:"Identity/Account/Register",IdentityManagePath:"Identity/Account/Manage"};ui=Object.assign(Object.assign({},ui),{LoginPathComponents:ui.Login.split("/"),LoginFailedPathComponents:ui.LoginFailed.split("/"),RegisterPathComponents:ui.Register.split("/"),ProfilePathComponents:ui.Profile.split("/"),LogOutPathComponents:ui.LogOut.split("/"),LoggedOutPathComponents:ui.LoggedOut.split("/"),LogOutCallbackPathComponents:ui.LogOutCallback.split("/")});const Ln=ui;var _n=(()=>{return(e=_n||(_n={}))[e.Success=0]="Success",e[e.Redirect=1]="Redirect",e[e.Fail=2]="Fail",_n;var e})();let Ya=(()=>{class e{constructor(){this.popUpDisabled=!0,this.userSubject=new ir(null)}isAuthenticated(){return this.getUser().pipe(L(n=>!!n))}getUser(){return jl(this.userSubject.pipe(a(1),Ai(n=>!!n)),this.getUserFromStorage().pipe(Ai(n=>!!n),yn(n=>this.userSubject.next(n))),this.userSubject.asObservable())}getAccessToken(){return Nt(this.ensureUserManagerInitialized()).pipe(Tt(()=>Nt(this.userManager.getUser())),L(n=>n&&n.access_token))}signIn(n){var r=this;return or(function*(){yield r.ensureUserManagerInitialized();let i=null;try{return i=yield r.userManager.signinSilent(r.createArguments()),r.userSubject.next(i.profile),r.success(n)}catch(o){console.log("Silent authentication error: ",o);try{if(r.popUpDisabled)throw new Error("Popup disabled. Change 'authorize.service.ts:AuthorizeService.popupDisabled' to false to enable it.");return i=yield r.userManager.signinPopup(r.createArguments()),r.userSubject.next(i.profile),r.success(n)}catch(s){if("Popup window closed"===s.message)return r.error("The user closed the window.");r.popUpDisabled||console.log("Popup authentication error: ",s);try{return yield r.userManager.signinRedirect(r.createArguments(n)),r.redirect()}catch(l){return console.log("Redirect authentication error: ",l),r.error(l)}}}})()}completeSignIn(n){var r=this;return or(function*(){try{yield r.ensureUserManagerInitialized();const i=yield r.userManager.signinCallback(n);return r.userSubject.next(i&&i.profile),r.success(i&&i.state)}catch(i){return console.log("There was an error signing in: ",i),r.error("There was an error signing in.")}})()}signOut(n){var r=this;return or(function*(){try{if(r.popUpDisabled)throw new Error("Popup disabled. Change 'authorize.service.ts:AuthorizeService.popupDisabled' to false to enable it.");return yield r.ensureUserManagerInitialized(),yield r.userManager.signoutPopup(r.createArguments()),r.userSubject.next(null),r.success(n)}catch(i){console.log("Popup signout error: ",i);try{return yield r.userManager.signoutRedirect(r.createArguments(n)),r.redirect()}catch(o){return console.log("Redirect signout error: ",o),r.error(o)}}})()}completeSignOut(n){var r=this;return or(function*(){yield r.ensureUserManagerInitialized();try{const i=yield r.userManager.signoutCallback(n);return r.userSubject.next(null),r.success(i&&i.state)}catch(i){return console.log(`There was an error trying to log out '${i}'.`),r.error(i)}})()}createArguments(n){return{useReplaceToNavigate:!0,data:n}}error(n){return{status:_n.Fail,message:n}}success(n){return{status:_n.Success,state:n}}redirect(){return{status:_n.Redirect}}ensureUserManagerInitialized(){var n=this;return or(function*(){if(void 0!==n.userManager)return;const r=yield fetch(Ln.ApiAuthorizationClientConfigurationUrl);if(!r.ok)throw new Error(`Could not load settings for '${jE}'`);const i=yield r.json();i.automaticSilentRenew=!0,i.includeIdTokenInSilentRenew=!0,n.userManager=new Zk.UserManager(i),n.userManager.events.addUserSignedOut(or(function*(){yield n.userManager.removeUser(),n.userSubject.next(null)}))})()}getUserFromStorage(){return Nt(this.ensureUserManagerInitialized()).pipe(Tt(()=>this.userManager.getUser()),L(n=>n&&n.profile))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Xk=function(){return["/authentication/profile"]},eN=function(){return["/authentication/logout"]},tN=function(){return{local:!0}};function nN(e,t){if(1&e&&(He(0,"ul",1)(1,"li",2)(2,"a",3),Re(3),vs(4,"async"),Oe()(),He(5,"li",2)(6,"a",4),Re(7,"Logout"),Oe()()()),2&e){const n=af();xt(2),cn("routerLink",nr(6,Xk)),xt(1),Ju("Hello ",ys(4,4,n.userName),""),xt(3),cn("routerLink",nr(7,eN))("state",nr(8,tN))}}const rN=function(){return["/authentication/register"]},iN=function(){return["/authentication/login"]};function oN(e,t){1&e&&(He(0,"ul",1)(1,"li",2)(2,"a",5),Re(3,"Register"),Oe()(),He(4,"li",2)(5,"a",5),Re(6,"Login"),Oe()()()),2&e&&(xt(2),cn("routerLink",nr(2,rN)),xt(3),cn("routerLink",nr(3,iN)))}let sN=(()=>{class e{constructor(n){this.authorizeService=n}ngOnInit(){this.isAuthenticated=this.authorizeService.isAuthenticated(),this.userName=this.authorizeService.getUser().pipe(L(n=>n&&n.name))}}return e.\u0275fac=function(n){return new(n||e)(ye(Ya))},e.\u0275cmp=Rr({type:e,selectors:[["app-login-menu"]],decls:4,vars:6,consts:[["class","navbar-nav",4,"ngIf"],[1,"navbar-nav"],[1,"nav-item"],["title","Manage",1,"nav-link","text-dark",3,"routerLink"],["title","Logout",1,"nav-link","text-dark",3,"routerLink","state"],[1,"nav-link","text-dark",3,"routerLink"]],template:function(n,r){1&n&&(ds(0,nN,8,9,"ul",0),vs(1,"async"),ds(2,oN,7,4,"ul",0),vs(3,"async")),2&n&&(cn("ngIf",ys(1,2,r.isAuthenticated)),xt(2),cn("ngIf",!0!==ys(3,4,r.isAuthenticated)))},dependencies:[ah,Ja,Cl]}),e})();const BE=function(){return["/"]},aN=function(e){return{show:e}},_p=function(){return["link-active"]},uN=function(){return{exact:!0}},lN=function(){return["/counter"]},cN=function(){return["/fetch-data"]};let dN=(()=>{class e{constructor(){this.isExpanded=!1}collapse(){this.isExpanded=!1}toggle(){this.isExpanded=!this.isExpanded}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Rr({type:e,selectors:[["app-nav-menu"]],decls:19,vars:20,consts:[[1,"navbar","navbar-expand-sm","navbar-toggleable-sm","navbar-light","bg-white","border-bottom","box-shadow","mb-3"],[1,"container"],[1,"navbar-brand",3,"routerLink"],["type","button","data-toggle","collapse","data-target",".navbar-collapse","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],[1,"navbar-collapse","collapse","d-sm-inline-flex","justify-content-end",3,"ngClass"],[1,"navbar-nav","flex-grow"],[1,"nav-item",3,"routerLinkActive","routerLinkActiveOptions"],[1,"nav-link","text-dark",3,"routerLink"],[1,"nav-item",3,"routerLinkActive"]],template:function(n,r){1&n&&(He(0,"header")(1,"nav",0)(2,"div",1)(3,"a",2),Re(4,"Northwind.Web.App"),Oe(),He(5,"button",3),Gn("click",function(){return r.toggle()}),ho(6,"span",4),Oe(),He(7,"div",5)(8,"ul",6)(9,"li",7)(10,"a",8),Re(11,"Home"),Oe()(),He(12,"li",9)(13,"a",8),Re(14,"Counter"),Oe()(),He(15,"li",9)(16,"a",8),Re(17,"Fetch data"),Oe()()(),ho(18,"app-login-menu"),Oe()()()()),2&n&&(xt(3),cn("routerLink",nr(10,BE)),xt(2),jr("aria-expanded",r.isExpanded),xt(2),cn("ngClass",function f0(e,t,n,r){return h0(_e(),qn(),e,t,n,r)}(11,aN,r.isExpanded)),xt(2),cn("routerLinkActive",nr(13,_p))("routerLinkActiveOptions",nr(14,uN)),xt(1),cn("routerLink",nr(15,BE)),xt(2),cn("routerLinkActive",nr(16,_p)),xt(1),cn("routerLink",nr(17,lN)),xt(2),cn("routerLinkActive",nr(18,_p)),xt(1),cn("routerLink",nr(19,cN)))},dependencies:[R_,sN,Ja,IE],styles:["a.navbar-brand[_ngcontent-%COMP%]{white-space:normal;text-align:center;word-break:break-all}html[_ngcontent-%COMP%]{font-size:14px}@media (min-width: 768px){html[_ngcontent-%COMP%]{font-size:16px}}.box-shadow[_ngcontent-%COMP%]{box-shadow:0 .25rem .75rem #0000000d}"]}),e})(),fN=(()=>{class e{constructor(){this.title="app"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Rr({type:e,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"]],template:function(n,r){1&n&&(He(0,"body"),ho(1,"app-nav-menu"),He(2,"div",0),ho(3,"router-outlet"),Oe()())},dependencies:[ap,dN],encapsulation:2}),e})(),hN=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Rr({type:e,selectors:[["app-home"]],decls:67,vars:0,consts:[["href","https://get.asp.net/"],["href","https://msdn.microsoft.com/en-us/library/67ef8sbd.aspx"],["href","https://angular.io/"],["href","http://www.typescriptlang.org/"],["href","http://getbootstrap.com/"]],template:function(n,r){1&n&&(He(0,"h1"),Re(1,"Hello, world!"),Oe(),He(2,"p"),Re(3,"Welcome to your new single-page application, built with:"),Oe(),He(4,"ul")(5,"li")(6,"a",0),Re(7,"ASP.NET Core"),Oe(),Re(8," and "),He(9,"a",1),Re(10,"C#"),Oe(),Re(11," for cross-platform server-side code"),Oe(),He(12,"li")(13,"a",2),Re(14,"Angular"),Oe(),Re(15," and "),He(16,"a",3),Re(17,"TypeScript"),Oe(),Re(18," for client-side code"),Oe(),He(19,"li")(20,"a",4),Re(21,"Bootstrap"),Oe(),Re(22," for layout and styling"),Oe()(),He(23,"p"),Re(24,"To help you get started, we've also set up:"),Oe(),He(25,"ul")(26,"li")(27,"strong"),Re(28,"Client-side navigation"),Oe(),Re(29,". For example, click "),He(30,"em"),Re(31,"Counter"),Oe(),Re(32," then "),He(33,"em"),Re(34,"Back"),Oe(),Re(35," to return here."),Oe(),He(36,"li")(37,"strong"),Re(38,"Angular CLI integration"),Oe(),Re(39,". In development mode, there's no need to run "),He(40,"code"),Re(41,"ng serve"),Oe(),Re(42,". It runs in the background automatically, so your client-side resources are dynamically built on demand and the page refreshes when you modify any file."),Oe(),He(43,"li")(44,"strong"),Re(45,"Efficient production builds"),Oe(),Re(46,". In production mode, development-time features are disabled, and your "),He(47,"code"),Re(48,"dotnet publish"),Oe(),Re(49," configuration automatically invokes "),He(50,"code"),Re(51,"ng build"),Oe(),Re(52," to produce minified, ahead-of-time compiled JavaScript files."),Oe()(),He(53,"p"),Re(54,"The "),He(55,"code"),Re(56,"ClientApp"),Oe(),Re(57," subdirectory is a standard Angular CLI application. If you open a command prompt in that directory, you can run any "),He(58,"code"),Re(59,"ng"),Oe(),Re(60," command (e.g., "),He(61,"code"),Re(62,"ng test"),Oe(),Re(63,"), or use "),He(64,"code"),Re(65,"npm"),Oe(),Re(66," to install extra packages into it."),Oe())},encapsulation:2}),e})(),pN=(()=>{class e{constructor(){this.currentCount=0}incrementCounter(){this.currentCount++}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Rr({type:e,selectors:[["app-counter-component"]],decls:10,vars:1,consts:[["aria-live","polite"],[1,"btn","btn-primary",3,"click"]],template:function(n,r){1&n&&(He(0,"h1"),Re(1,"Counter"),Oe(),He(2,"p"),Re(3,"This is a simple example of an Angular component."),Oe(),He(4,"p",0),Re(5,"Current count: "),He(6,"strong"),Re(7),Oe()(),He(8,"button",1),Gn("click",function(){return r.incrementCounter()}),Re(9,"Increment"),Oe()),2&n&&(xt(7),_i(r.currentCount))},encapsulation:2}),e})();function gN(e,t){1&e&&(He(0,"p")(1,"em"),Re(2,"Loading..."),Oe()())}function mN(e,t){if(1&e&&(He(0,"tr")(1,"td"),Re(2),Oe(),He(3,"td"),Re(4),Oe(),He(5,"td"),Re(6),Oe(),He(7,"td"),Re(8),Oe()()),2&e){const n=t.$implicit;xt(2),_i(n.date),xt(2),_i(n.temperatureC),xt(2),_i(n.temperatureF),xt(2),_i(n.summary)}}function vN(e,t){if(1&e&&(He(0,"table",3)(1,"thead")(2,"tr")(3,"th"),Re(4,"Date"),Oe(),He(5,"th"),Re(6,"Temp. (C)"),Oe(),He(7,"th"),Re(8,"Temp. (F)"),Oe(),He(9,"th"),Re(10,"Summary"),Oe()()(),He(11,"tbody"),ds(12,mN,9,4,"tr",4),Oe()()),2&e){const n=af();xt(12),cn("ngForOf",n.forecasts)}}let yN=(()=>{class e{constructor(n,r){this.forecasts=[],n.get(r+"weatherforecast").subscribe(i=>{this.forecasts=i},i=>console.error(i))}}return e.\u0275fac=function(n){return new(n||e)(ye(Db),ye("BASE_URL"))},e.\u0275cmp=Rr({type:e,selectors:[["app-fetch-data"]],decls:6,vars:2,consts:[["id","tableLabel"],[4,"ngIf"],["class","table table-striped","aria-labelledby","tableLabel",4,"ngIf"],["aria-labelledby","tableLabel",1,"table","table-striped"],[4,"ngFor","ngForOf"]],template:function(n,r){1&n&&(He(0,"h1",0),Re(1,"Weather forecast"),Oe(),He(2,"p"),Re(3,"This component demonstrates fetching data from the server."),Oe(),ds(4,gN,3,0,"p",1),ds(5,vN,13,1,"table",2)),2&n&&(xt(4),cn("ngIf",!r.forecasts),xt(1),cn("ngIf",r.forecasts))},dependencies:[k_,ah],encapsulation:2}),e})(),Qa=(()=>{class e{constructor(n,r,i){this.authorizeService=n,this.activatedRoute=r,this.router=i,this.message=new ir(null)}ngOnInit(){var n=this;return or(function*(){const r=n.activatedRoute.snapshot.url[1];switch(r.path){case"login":yield n.login(n.getReturnUrl());break;case"login-callback":yield n.processLoginCallback();break;case"login-failed":const i=n.activatedRoute.snapshot.queryParamMap.get("message");n.message.next(i);break;case"profile":n.redirectToProfile();break;case"register":n.redirectToRegister();break;default:throw new Error(`Invalid action '${r}'`)}})()}login(n){var r=this;return or(function*(){const i={returnUrl:n},o=yield r.authorizeService.signIn(i);switch(r.message.next(void 0),o.status){case _n.Redirect:break;case _n.Success:yield r.navigateToReturnUrl(n);break;case _n.Fail:yield r.router.navigate(Ln.LoginFailedPathComponents,{queryParams:{message:o.message}});break;default:throw new Error(`Invalid status result ${o.status}.`)}})()}processLoginCallback(){var n=this;return or(function*(){const r=window.location.href,i=yield n.authorizeService.completeSignIn(r);switch(i.status){case _n.Redirect:throw new Error("Should not redirect.");case _n.Success:yield n.navigateToReturnUrl(n.getReturnUrl(i.state));break;case _n.Fail:n.message.next(i.message)}})()}redirectToRegister(){this.redirectToApiAuthorizationPath(`${Ln.IdentityRegisterPath}?returnUrl=${encodeURI("/"+Ln.Login)}`)}redirectToProfile(){this.redirectToApiAuthorizationPath(Ln.IdentityManagePath)}navigateToReturnUrl(n){var r=this;return or(function*(){yield r.router.navigateByUrl(n,{replaceUrl:!0})})()}getReturnUrl(n){const r=this.activatedRoute.snapshot.queryParams.returnUrl;if(r&&!r.startsWith(`${window.location.origin}/`)&&!/\/[^\/].*/.test(r))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return n&&n.returnUrl||r||Ln.DefaultLoginRedirectPath}redirectToApiAuthorizationPath(n){const r=`${window.location.origin}/${n}`;window.location.replace(r)}}return e.\u0275fac=function(n){return new(n||e)(ye(Ya),ye(Yi),ye(On))},e.\u0275cmp=Rr({type:e,selectors:[["app-login"]],decls:3,vars:3,template:function(n,r){1&n&&(He(0,"p"),Re(1),vs(2,"async"),Oe()),2&n&&(xt(1),_i(ys(2,1,r.message)))},dependencies:[Cl]}),e})(),wp=(()=>{class e{constructor(n,r,i){this.authorizeService=n,this.activatedRoute=r,this.router=i,this.message=new ir(null)}ngOnInit(){var n=this;return or(function*(){const r=n.activatedRoute.snapshot.url[1];switch(r.path){case"logout":window.history.state.local?yield n.logout(n.getReturnUrl()):n.message.next("The logout was not initiated from within the page.");break;case"logout-callback":yield n.processLogoutCallback();break;case"logged-out":n.message.next("You successfully logged out!");break;default:throw new Error(`Invalid action '${r}'`)}})()}logout(n){var r=this;return or(function*(){const i={returnUrl:n};if(yield r.authorizeService.isAuthenticated().pipe(a(1)).toPromise()){const s=yield r.authorizeService.signOut(i);switch(s.status){case _n.Redirect:break;case _n.Success:yield r.navigateToReturnUrl(n);break;case _n.Fail:r.message.next(s.message);break;default:throw new Error("Invalid authentication result status.")}}else r.message.next("You successfully logged out!")})()}processLogoutCallback(){var n=this;return or(function*(){const r=window.location.href,i=yield n.authorizeService.completeSignOut(r);switch(i.status){case _n.Redirect:throw new Error("Should not redirect.");case _n.Success:yield n.navigateToReturnUrl(n.getReturnUrl(i.state));break;case _n.Fail:n.message.next(i.message);break;default:throw new Error("Invalid authentication result status.")}})()}navigateToReturnUrl(n){var r=this;return or(function*(){yield r.router.navigateByUrl(n,{replaceUrl:!0})})()}getReturnUrl(n){const r=this.activatedRoute.snapshot.queryParams.returnUrl;if(r&&!r.startsWith(`${window.location.origin}/`)&&!/\/[^\/].*/.test(r))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return n&&n.returnUrl||r||Ln.LoggedOut}}return e.\u0275fac=function(n){return new(n||e)(ye(Ya),ye(Yi),ye(On))},e.\u0275cmp=Rr({type:e,selectors:[["app-logout"]],decls:3,vars:3,template:function(n,r){1&n&&(He(0,"p"),Re(1),vs(2,"async"),Oe()),2&n&&(xt(1),_i(ys(2,1,r.message)))},dependencies:[Cl]}),e})(),_N=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Cr({type:e}),e.\u0275inj=Qt({imports:[j_,xb,NE.forChild([{path:Ln.Register,component:Qa},{path:Ln.Profile,component:Qa},{path:Ln.Login,component:Qa},{path:Ln.LoginFailed,component:Qa},{path:Ln.LoginCallback,component:Qa},{path:Ln.LogOut,component:wp},{path:Ln.LoggedOut,component:wp},{path:Ln.LogOutCallback,component:wp}])]}),e})(),wN=(()=>{class e{constructor(n,r){this.authorize=n,this.router=r}canActivate(n,r){return this.authorize.isAuthenticated().pipe(yn(i=>this.handleAuthorization(i,r)))}handleAuthorization(n,r){n||this.router.navigate(Ln.LoginPathComponents,{queryParams:{returnUrl:r.url}})}}return e.\u0275fac=function(n){return new(n||e)(Te(Ya),Te(On))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),bN=(()=>{class e{constructor(n){this.authorize=n}intercept(n,r){return this.authorize.getAccessToken().pipe(Tt(i=>this.processRequestWithToken(i,n,r)))}processRequestWithToken(n,r,i){return!!n&&this.isSameOriginUrl(r)&&(r=r.clone({setHeaders:{Authorization:`Bearer ${n}`}})),i.handle(r)}isSameOriginUrl(n){return!!(n.url.startsWith(`${window.location.origin}/`)||n.url.startsWith(`//${window.location.host}/`)||/^\/[^\/].*/.test(n.url))}}return e.\u0275fac=function(n){return new(n||e)(Te(Ya))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),EN=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Cr({type:e,bootstrap:[fN]}),e.\u0275inj=Qt({providers:[{provide:Hh,useClass:bN,multi:!0}],imports:[iR.withServerTransition({appId:"ng-cli-universal"}),xb,bP,_N,NE.forRoot([{path:"",component:hN,pathMatch:"full"},{path:"counter",component:pN},{path:"fetch-data",component:yN,canActivate:[wN]}])]}),e})();const SN=[{provide:"BASE_URL",useFactory:function DN(){return document.getElementsByTagName("base")[0].href},deps:[]}];(function WI(){a_=!1})(),rR(SN).bootstrapModule(EN).catch(e=>console.log(e))},497:function(xs){xs.exports=function(Ne){var k={};function Q(G){if(k[G])return k[G].exports;var D=k[G]={i:G,l:!1,exports:{}};return Ne[G].call(D.exports,D,D.exports,Q),D.l=!0,D.exports}return Q.m=Ne,Q.c=k,Q.d=function(G,D,z){Q.o(G,D)||Object.defineProperty(G,D,{enumerable:!0,get:z})},Q.r=function(G){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(G,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(G,"__esModule",{value:!0})},Q.t=function(G,D){if(1&D&&(G=Q(G)),8&D||4&D&&"object"==typeof G&&G&&G.__esModule)return G;var z=Object.create(null);if(Q.r(z),Object.defineProperty(z,"default",{enumerable:!0,value:G}),2&D&&"string"!=typeof G)for(var R in G)Q.d(z,R,function(y){return G[y]}.bind(null,R));return z},Q.n=function(G){var D=G&&G.__esModule?function(){return G.default}:function(){return G};return Q.d(D,"a",D),D},Q.o=function(G,D){return Object.prototype.hasOwnProperty.call(G,D)},Q.p="",Q(Q.s=22)}([function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0});var G=function(){function y(_,m){for(var F=0;F<m.length;F++){var $=m[F];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(_,$.key,$)}}return function(_,m,F){return m&&y(_.prototype,m),F&&y(_,F),_}}(),D={debug:function(){},info:function(){},warn:function(){},error:function(){}},z=void 0,R=void 0;(k.Log=function(){function y(){!function(m,F){if(!(m instanceof F))throw new TypeError("Cannot call a class as a function")}(this,y)}return y.reset=function(){R=3,z=D},y.debug=function(){if(R>=4){for(var m=arguments.length,F=Array(m),$=0;$<m;$++)F[$]=arguments[$];z.debug.apply(z,Array.from(F))}},y.info=function(){if(R>=3){for(var m=arguments.length,F=Array(m),$=0;$<m;$++)F[$]=arguments[$];z.info.apply(z,Array.from(F))}},y.warn=function(){if(R>=2){for(var m=arguments.length,F=Array(m),$=0;$<m;$++)F[$]=arguments[$];z.warn.apply(z,Array.from(F))}},y.error=function(){if(R>=1){for(var m=arguments.length,F=Array(m),$=0;$<m;$++)F[$]=arguments[$];z.error.apply(z,Array.from(F))}},G(y,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return R},set:function(m){if(!(0<=m&&m<=4))throw new Error("Invalid log level");R=m}},{key:"logger",get:function(){return z},set:function(m){if(!m.debug&&m.info&&(m.debug=m.info),!(m.debug&&m.info&&m.warn&&m.error))throw new Error("Invalid logger");z=m}}]),y}()).reset()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0});var G=function(){function y(_,m){for(var F=0;F<m.length;F++){var $=m[F];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(_,$.key,$)}}return function(_,m,F){return m&&y(_.prototype,m),F&&y(_,F),_}}(),D={setInterval:function(y){function _(m,F){return y.apply(this,arguments)}return _.toString=function(){return y.toString()},_}(function(y,_){return setInterval(y,_)}),clearInterval:function(y){function _(m){return y.apply(this,arguments)}return _.toString=function(){return y.toString()},_}(function(y){return clearInterval(y)})},z=!1,R=null;k.Global=function(){function y(){!function(m,F){if(!(m instanceof F))throw new TypeError("Cannot call a class as a function")}(this,y)}return y._testing=function(){z=!0},y.setXMLHttpRequest=function(m){R=m},G(y,null,[{key:"location",get:function(){if(!z)return location}},{key:"localStorage",get:function(){if(!z&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!z&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!z&&"undefined"!=typeof window)return R||XMLHttpRequest}},{key:"timer",get:function(){if(!z)return D}}]),y}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.MetadataService=void 0;var G=function(){function _(m,F){for(var $=0;$<F.length;$++){var N=F[$];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,N.key,N)}}return function(m,F,$){return F&&_(m.prototype,F),$&&_(m,$),m}}(),D=Q(0),z=Q(7);function R(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}var y=".well-known/openid-configuration";k.MetadataService=function(){function _(m){var F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.JsonService;if(R(this,_),!m)throw D.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=m,this._jsonService=new F(["application/jwk-set+json"])}return _.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},_.prototype.getMetadata=function(){var F=this;return this._settings.metadata?(D.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(D.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function($){return D.Log.debug("MetadataService.getMetadata: json received"),F._settings.metadata=Object.assign({},F._settings.metadataSeed||{},$),F._settings.metadata})):(D.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},_.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},_.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},_.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},_.prototype.getTokenEndpoint=function(){return this._getMetadataProperty("token_endpoint",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},_.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},_.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},_.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},_.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},_.prototype._getMetadataProperty=function(F){var $=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return D.Log.debug("MetadataService.getMetadataProperty for: "+F),this.getMetadata().then(function(N){if(D.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===N[F]){if(!0===$)return void D.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+F);throw D.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+F),new Error("Metadata does not contain property "+F)}return N[F]})},_.prototype.getSigningKeys=function(){var F=this;return this._settings.signingKeys?(D.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function($){return D.Log.debug("MetadataService.getSigningKeys: jwks_uri received",$),F._jsonService.getJson($).then(function(N){if(D.Log.debug("MetadataService.getSigningKeys: key set received",N),!N.keys)throw D.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return F._settings.signingKeys=N.keys,F._settings.signingKeys})})},G(_,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(y)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=y))),this._metadataUrl}}]),_}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.UrlUtility=void 0;var G=Q(0),D=Q(1);k.UrlUtility=function(){function z(){!function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}(this,z)}return z.addQueryParam=function(y,_,m){return y.indexOf("?")<0&&(y+="?"),"?"!==y[y.length-1]&&(y+="&"),y+=encodeURIComponent(_),(y+="=")+encodeURIComponent(m)},z.parseUrlFragment=function(y){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";"string"!=typeof y&&(y=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.Global).location.href);var F=y.lastIndexOf(_);F>=0&&(y=y.substr(F+1)),"?"===_&&(F=y.indexOf("#"))>=0&&(y=y.substr(0,F));for(var $,N={},te=/([^&=]+)=([^&]*)/g,q=0;$=te.exec(y);)if(N[decodeURIComponent($[1])]=decodeURIComponent($[2].replace(/\+/g," ")),q++>50)return G.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",y),{error:"Response exceeded expected number of parameters"};for(var B in N)return N;return{}},z}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.JoseUtil=void 0;var R,G=Q(26),D=(R=Q(33))&&R.__esModule?R:{default:R};k.JoseUtil=(0,D.default)({jws:G.jws,KeyUtil:G.KeyUtil,X509:G.X509,crypto:G.crypto,hextob64u:G.hextob64u,b64tohex:G.b64tohex,AllowedSigningAlgs:G.AllowedSigningAlgs})},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.OidcClientSettings=void 0;var G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(B){return typeof B}:function(B){return B&&"function"==typeof Symbol&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},D=function(){function B(O,Z){for(var de=0;de<Z.length;de++){var ee=Z[de];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(O,ee.key,ee)}}return function(O,Z,de){return Z&&B(O.prototype,Z),de&&B(O,de),O}}(),z=Q(0),R=Q(23),y=Q(6),_=Q(24),m=Q(2);function F(B,O){if(!(B instanceof O))throw new TypeError("Cannot call a class as a function")}var $=".well-known/openid-configuration",N="id_token",q="client_secret_post";k.OidcClientSettings=function(){function B(){var O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Z=O.authority,de=O.metadataUrl,ee=O.metadata,ie=O.signingKeys,X=O.metadataSeed,ve=O.client_id,we=O.client_secret,Se=O.response_type,ne=void 0===Se?N:Se,ke=O.scope,wt=void 0===ke?"openid":ke,yt=O.redirect_uri,hn=O.post_logout_redirect_uri,bt=O.client_authentication,Gt=void 0===bt?q:bt,Jt=O.prompt,ot=O.display,Le=O.max_age,Ft=O.ui_locales,Cn=O.acr_values,wn=O.resource,Dn=O.response_mode,Pt=O.filterProtocolClaims,_r=void 0===Pt||Pt,Vn=O.loadUserInfo,lt=void 0===Vn||Vn,ft=O.staleStateAge,bn=void 0===ft?900:ft,L=O.clockSkew,w=void 0===L?300:L,E=O.clockService,Y=void 0===E?new R.ClockService:E,re=O.userInfoJwtIssuer,ce=void 0===re?"OP":re,pe=O.mergeClaims,Me=void 0!==pe&&pe,Ge=O.stateStore,ht=void 0===Ge?new y.WebStorageStateStore:Ge,st=O.ResponseValidatorCtor,Vt=void 0===st?_.ResponseValidator:st,sn=O.MetadataServiceCtor,Sn=void 0===sn?m.MetadataService:sn,wr=O.extraQueryParams,je=void 0===wr?{}:wr,kt=O.extraTokenParams,Xe=void 0===kt?{}:kt;F(this,B),this._authority=Z,this._metadataUrl=de,this._metadata=ee,this._metadataSeed=X,this._signingKeys=ie,this._client_id=ve,this._client_secret=we,this._response_type=ne,this._scope=wt,this._redirect_uri=yt,this._post_logout_redirect_uri=hn,this._client_authentication=Gt,this._prompt=Jt,this._display=ot,this._max_age=Le,this._ui_locales=Ft,this._acr_values=Cn,this._resource=wn,this._response_mode=Dn,this._filterProtocolClaims=!!_r,this._loadUserInfo=!!lt,this._staleStateAge=bn,this._clockSkew=w,this._clockService=Y,this._userInfoJwtIssuer=ce,this._mergeClaims=!!Me,this._stateStore=ht,this._validator=new Vt(this),this._metadataService=new Sn(this),this._extraQueryParams="object"===(void 0===je?"undefined":G(je))?je:{},this._extraTokenParams="object"===(void 0===Xe?"undefined":G(Xe))?Xe:{}}return B.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},D(B,[{key:"client_id",get:function(){return this._client_id},set:function(Z){if(this._client_id)throw z.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=Z}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(Z){if(this._authority)throw z.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=Z}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf($)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=$)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(Z){this._metadata=Z}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(Z){this._metadataSeed=Z}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(Z){this._signingKeys=Z}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(Z){this._extraQueryParams="object"===(void 0===Z?"undefined":G(Z))?Z:{}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(Z){this._extraTokenParams="object"===(void 0===Z?"undefined":G(Z))?Z:{}}}]),B}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.WebStorageStateStore=void 0;var G=Q(0),D=Q(1);function z(R,y){if(!(R instanceof y))throw new TypeError("Cannot call a class as a function")}k.WebStorageStateStore=function(){function R(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=y.prefix,m=void 0===_?"oidc.":_,F=y.store,$=void 0===F?D.Global.localStorage:F;z(this,R),this._store=$,this._prefix=m}return R.prototype.set=function(_,m){return G.Log.debug("WebStorageStateStore.set",_),this._store.setItem(_=this._prefix+_,m),Promise.resolve()},R.prototype.get=function(_){G.Log.debug("WebStorageStateStore.get",_);var m=this._store.getItem(_=this._prefix+_);return Promise.resolve(m)},R.prototype.remove=function(_){G.Log.debug("WebStorageStateStore.remove",_);var m=this._store.getItem(_=this._prefix+_);return this._store.removeItem(_),Promise.resolve(m)},R.prototype.getAllKeys=function(){G.Log.debug("WebStorageStateStore.getAllKeys");for(var _=[],m=0;m<this._store.length;m++){var F=this._store.key(m);0===F.indexOf(this._prefix)&&_.push(F.substr(this._prefix.length))}return Promise.resolve(_)},R}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.JsonService=void 0;var G=Q(0),D=Q(1);function z(R,y){if(!(R instanceof y))throw new TypeError("Cannot call a class as a function")}k.JsonService=function(){function R(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.Global.XMLHttpRequest,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;z(this,R),this._contentTypes=y&&Array.isArray(y)?y.slice():[],this._contentTypes.push("application/json"),m&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=_,this._jwtHandler=m}return R.prototype.getJson=function(_,m){var F=this;if(!_)throw G.Log.error("JsonService.getJson: No url passed"),new Error("url");return G.Log.debug("JsonService.getJson, url: ",_),new Promise(function($,N){var te=new F._XMLHttpRequest;te.open("GET",_);var q=F._contentTypes,B=F._jwtHandler;te.onload=function(){if(G.Log.debug("JsonService.getJson: HTTP response received, status",te.status),200===te.status){var O=te.getResponseHeader("Content-Type");if(O){var Z=q.find(function(de){if(O.startsWith(de))return!0});if("application/jwt"==Z)return void B(te).then($,N);if(Z)try{return void $(JSON.parse(te.responseText))}catch(de){return G.Log.error("JsonService.getJson: Error parsing JSON response",de.message),void N(de)}}N(Error("Invalid response Content-Type: "+O+", from URL: "+_))}else N(Error(te.statusText+" ("+te.status+")"))},te.onerror=function(){G.Log.error("JsonService.getJson: network error"),N(Error("Network Error"))},m&&(G.Log.debug("JsonService.getJson: token passed, setting Authorization header"),te.setRequestHeader("Authorization","Bearer "+m)),te.send()})},R.prototype.postForm=function(_,m,F){var $=this;if(!_)throw G.Log.error("JsonService.postForm: No url passed"),new Error("url");return G.Log.debug("JsonService.postForm, url: ",_),new Promise(function(N,te){var q=new $._XMLHttpRequest;q.open("POST",_);var B=$._contentTypes;q.onload=function(){if(G.Log.debug("JsonService.postForm: HTTP response received, status",q.status),200!==q.status){if(400===q.status&&(ie=q.getResponseHeader("Content-Type"))&&B.find(function(X){if(ie.startsWith(X))return!0}))try{var ee=JSON.parse(q.responseText);if(ee&&ee.error)return G.Log.error("JsonService.postForm: Error from server: ",ee.error),void te(new Error(ee.error))}catch(X){return G.Log.error("JsonService.postForm: Error parsing JSON response",X.message),void te(X)}te(Error(q.statusText+" ("+q.status+")"))}else{var ie;if((ie=q.getResponseHeader("Content-Type"))&&B.find(function(X){if(ie.startsWith(X))return!0}))try{return void N(JSON.parse(q.responseText))}catch(X){return G.Log.error("JsonService.postForm: Error parsing JSON response",X.message),void te(X)}te(Error("Invalid response Content-Type: "+ie+", from URL: "+_))}},q.onerror=function(){G.Log.error("JsonService.postForm: network error"),te(Error("Network Error"))};var O="";for(var Z in m){var de=m[Z];de&&(O.length>0&&(O+="&"),O+=encodeURIComponent(Z),O+="=",O+=encodeURIComponent(de))}q.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==F&&q.setRequestHeader("Authorization","Basic "+btoa(F)),q.send(O)})},R}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.SigninRequest=void 0;var G=Q(0),D=Q(3),z=Q(13);k.SigninRequest=function(){function R(y){var _=y.url,m=y.client_id,F=y.redirect_uri,$=y.response_type,N=y.scope,te=y.authority,q=y.data,B=y.prompt,O=y.display,Z=y.max_age,de=y.ui_locales,ee=y.id_token_hint,ie=y.login_hint,X=y.acr_values,ve=y.resource,we=y.response_mode,Se=y.request,ne=y.request_uri,ke=y.extraQueryParams,wt=y.request_type,yt=y.client_secret,hn=y.extraTokenParams,bt=y.skipUserInfo;if(function(wn,Dn){if(!(wn instanceof Dn))throw new TypeError("Cannot call a class as a function")}(this,R),!_)throw G.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!m)throw G.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!F)throw G.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!$)throw G.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!N)throw G.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!te)throw G.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var Gt=R.isOidc($),Jt=R.isCode($);we||(we=R.isCode($)?"query":null),this.state=new z.SigninState({nonce:Gt,data:q,client_id:m,authority:te,redirect_uri:F,code_verifier:Jt,request_type:wt,response_mode:we,client_secret:yt,scope:N,extraTokenParams:hn,skipUserInfo:bt}),_=D.UrlUtility.addQueryParam(_,"client_id",m),_=D.UrlUtility.addQueryParam(_,"redirect_uri",F),_=D.UrlUtility.addQueryParam(_,"response_type",$),_=D.UrlUtility.addQueryParam(_,"scope",N),_=D.UrlUtility.addQueryParam(_,"state",this.state.id),Gt&&(_=D.UrlUtility.addQueryParam(_,"nonce",this.state.nonce)),Jt&&(_=D.UrlUtility.addQueryParam(_,"code_challenge",this.state.code_challenge),_=D.UrlUtility.addQueryParam(_,"code_challenge_method","S256"));var ot={prompt:B,display:O,max_age:Z,ui_locales:de,id_token_hint:ee,login_hint:ie,acr_values:X,resource:ve,request:Se,request_uri:ne,response_mode:we};for(var Le in ot)ot[Le]&&(_=D.UrlUtility.addQueryParam(_,Le,ot[Le]));for(var Ft in ke)_=D.UrlUtility.addQueryParam(_,Ft,ke[Ft]);this.url=_}return R.isOidc=function(_){return!!_.split(/\s+/g).filter(function(m){return"id_token"===m})[0]},R.isOAuth=function(_){return!!_.split(/\s+/g).filter(function(m){return"token"===m})[0]},R.isCode=function(_){return!!_.split(/\s+/g).filter(function(m){return"code"===m})[0]},R}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.State=void 0;var _,G=function(){function y(_,m){for(var F=0;F<m.length;F++){var $=m[F];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(_,$.key,$)}}return function(_,m,F){return m&&y(_.prototype,m),F&&y(_,F),_}}(),D=Q(0),z=(_=Q(14))&&_.__esModule?_:{default:_};function R(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}k.State=function(){function y(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=_.id,F=_.data,$=_.created,N=_.request_type;R(this,y),this._id=m||(0,z.default)(),this._data=F,this._created="number"==typeof $&&$>0?$:parseInt(Date.now()/1e3),this._request_type=N}return y.prototype.toStorageString=function(){return D.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},y.fromStorageString=function(m){return D.Log.debug("State.fromStorageString"),new y(JSON.parse(m))},y.clearStaleState=function(m,F){var $=Date.now()/1e3-F;return m.getAllKeys().then(function(N){D.Log.debug("State.clearStaleState: got keys",N);for(var te=[],q=function(de){var ee=N[de];O=m.get(ee).then(function(ie){var X=!1;if(ie)try{var ve=y.fromStorageString(ie);D.Log.debug("State.clearStaleState: got item from key: ",ee,ve.created),ve.created<=$&&(X=!0)}catch(we){D.Log.error("State.clearStaleState: Error parsing state for key",ee,we.message),X=!0}else D.Log.debug("State.clearStaleState: no item in storage for key: ",ee),X=!0;if(X)return D.Log.debug("State.clearStaleState: removed item for key: ",ee),m.remove(ee)}),te.push(O)},B=0;B<N.length;B++){var O;q(B)}return D.Log.debug("State.clearStaleState: waiting on promise count:",te.length),Promise.all(te)})},G(y,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),y}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.OidcClient=void 0;var G=function(){function q(B,O){for(var Z=0;Z<O.length;Z++){var de=O[Z];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(B,de.key,de)}}return function(B,O,Z){return O&&q(B.prototype,O),Z&&q(B,Z),B}}(),D=Q(0),z=Q(5),R=Q(12),y=Q(8),_=Q(34),m=Q(35),F=Q(36),$=Q(13),N=Q(9);function te(q,B){if(!(q instanceof B))throw new TypeError("Cannot call a class as a function")}k.OidcClient=function(){function q(){var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};te(this,q),this._settings=B instanceof z.OidcClientSettings?B:new z.OidcClientSettings(B)}return q.prototype.createSigninRequest=function(){var O=this,Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},de=Z.response_type,ee=Z.scope,ie=Z.redirect_uri,X=Z.data,ve=Z.state,we=Z.prompt,Se=Z.display,ne=Z.max_age,ke=Z.ui_locales,wt=Z.id_token_hint,yt=Z.login_hint,hn=Z.acr_values,bt=Z.resource,Gt=Z.request,Jt=Z.request_uri,ot=Z.response_mode,Le=Z.extraQueryParams,Ft=Z.extraTokenParams,Cn=Z.request_type,wn=Z.skipUserInfo,Dn=arguments[1];D.Log.debug("OidcClient.createSigninRequest");var Pt=this._settings.client_id;ee=ee||this._settings.scope,ie=ie||this._settings.redirect_uri,we=we||this._settings.prompt,Se=Se||this._settings.display,ne=ne||this._settings.max_age,ke=ke||this._settings.ui_locales,hn=hn||this._settings.acr_values,bt=bt||this._settings.resource,ot=ot||this._settings.response_mode,Le=Le||this._settings.extraQueryParams,Ft=Ft||this._settings.extraTokenParams;var _r=this._settings.authority;return y.SigninRequest.isCode(de=de||this._settings.response_type)&&"code"!==de?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(Vn){D.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",Vn);var lt=new y.SigninRequest({url:Vn,client_id:Pt,redirect_uri:ie,response_type:de,scope:ee,data:X||ve,authority:_r,prompt:we,display:Se,max_age:ne,ui_locales:ke,id_token_hint:wt,login_hint:yt,acr_values:hn,resource:bt,request:Gt,request_uri:Jt,extraQueryParams:Le,extraTokenParams:Ft,request_type:Cn,response_mode:ot,client_secret:O._settings.client_secret,skipUserInfo:wn}),ft=lt.state;return(Dn=Dn||O._stateStore).set(ft.id,ft.toStorageString()).then(function(){return lt})})},q.prototype.readSigninResponseState=function(O,Z){var de=arguments.length>2&&void 0!==arguments[2]&&arguments[2];D.Log.debug("OidcClient.readSigninResponseState");var ee="query"===this._settings.response_mode||!this._settings.response_mode&&y.SigninRequest.isCode(this._settings.response_type),X=new _.SigninResponse(O,ee?"?":"#");return X.state?(Z=Z||this._stateStore,(de?Z.remove.bind(Z):Z.get.bind(Z))(X.state).then(function(we){if(!we)throw D.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:$.SigninState.fromStorageString(we),response:X}})):(D.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},q.prototype.processSigninResponse=function(O,Z){var de=this;return D.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(O,Z,!0).then(function(ee){var ie=ee.state,X=ee.response;return D.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),de._validator.validateSigninResponse(ie,X)})},q.prototype.createSignoutRequest=function(){var O=this,Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},de=Z.id_token_hint,ee=Z.data,ie=Z.state,X=Z.post_logout_redirect_uri,ve=Z.extraQueryParams,we=Z.request_type,Se=arguments[1];return D.Log.debug("OidcClient.createSignoutRequest"),X=X||this._settings.post_logout_redirect_uri,ve=ve||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(ne){if(!ne)throw D.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");D.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",ne);var ke=new m.SignoutRequest({url:ne,id_token_hint:de,post_logout_redirect_uri:X,data:ee||ie,extraQueryParams:ve,request_type:we}),wt=ke.state;return wt&&(D.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(Se=Se||O._stateStore).set(wt.id,wt.toStorageString())),ke})},q.prototype.readSignoutResponseState=function(O,Z){var de=arguments.length>2&&void 0!==arguments[2]&&arguments[2];D.Log.debug("OidcClient.readSignoutResponseState");var ee=new F.SignoutResponse(O);if(!ee.state)return D.Log.debug("OidcClient.readSignoutResponseState: No state in response"),ee.error?(D.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",ee.error),Promise.reject(new R.ErrorResponse(ee))):Promise.resolve({state:void 0,response:ee});var ie=ee.state;return Z=Z||this._stateStore,(de?Z.remove.bind(Z):Z.get.bind(Z))(ie).then(function(ve){if(!ve)throw D.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:N.State.fromStorageString(ve),response:ee}})},q.prototype.processSignoutResponse=function(O,Z){var de=this;return D.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(O,Z,!0).then(function(ee){var ie=ee.state,X=ee.response;return ie?(D.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),de._validator.validateSignoutResponse(ie,X)):(D.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),X)})},q.prototype.clearStaleState=function(O){return D.Log.debug("OidcClient.clearStaleState"),N.State.clearStaleState(O=O||this._stateStore,this.settings.staleStateAge)},G(q,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),q}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.TokenClient=void 0;var G=Q(7),D=Q(2),z=Q(0);function R(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}k.TokenClient=function(){function y(_){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.JsonService,F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.MetadataService;if(R(this,y),!_)throw z.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=_,this._jsonService=new m,this._metadataService=new F(this._settings)}return y.prototype.exchangeCode=function(){var m=this,F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(F=Object.assign({},F)).grant_type=F.grant_type||"authorization_code",F.client_id=F.client_id||this._settings.client_id,F.client_secret=F.client_secret||this._settings.client_secret,F.redirect_uri=F.redirect_uri||this._settings.redirect_uri;var $=void 0,N=F._client_authentication||this._settings._client_authentication;return delete F._client_authentication,F.code?F.redirect_uri?F.code_verifier?F.client_id?F.client_secret||"client_secret_basic"!=N?("client_secret_basic"==N&&($=F.client_id+":"+F.client_secret,delete F.client_id,delete F.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(te){return z.Log.debug("TokenClient.exchangeCode: Received token endpoint"),m._jsonService.postForm(te,F,$).then(function(q){return z.Log.debug("TokenClient.exchangeCode: response received"),q})})):(z.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(z.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(z.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(z.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(z.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},y.prototype.exchangeRefreshToken=function(){var m=this,F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(F=Object.assign({},F)).grant_type=F.grant_type||"refresh_token",F.client_id=F.client_id||this._settings.client_id,F.client_secret=F.client_secret||this._settings.client_secret;var $=void 0,N=F._client_authentication||this._settings._client_authentication;return delete F._client_authentication,F.refresh_token?F.client_id?("client_secret_basic"==N&&($=F.client_id+":"+F.client_secret,delete F.client_id,delete F.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(te){return z.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),m._jsonService.postForm(te,F,$).then(function(q){return z.Log.debug("TokenClient.exchangeRefreshToken: response received"),q})})):(z.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(z.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},y}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.ErrorResponse=void 0;var G=Q(0);function D(R,y){if(!(R instanceof y))throw new TypeError("Cannot call a class as a function")}function z(R,y){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?R:y}k.ErrorResponse=function(R){function y(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=_.error,F=_.error_description,$=_.error_uri,N=_.state,te=_.session_state;if(D(this,y),!m)throw G.Log.error("No error passed to ErrorResponse"),new Error("error");var q=z(this,R.call(this,F||m));return q.name="ErrorResponse",q.error=m,q.error_description=F,q.error_uri=$,q.state=N,q.session_state=te,q}return function(m,F){if("function"!=typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function, not "+typeof F);m.prototype=Object.create(F&&F.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(m,F):m.__proto__=F)}(y,R),y}(Error)},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.SigninState=void 0;var $,G=function(){function F($,N){for(var te=0;te<N.length;te++){var q=N[te];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty($,q.key,q)}}return function($,N,te){return N&&F($.prototype,N),te&&F($,te),$}}(),D=Q(0),z=Q(9),R=Q(4),y=($=Q(14))&&$.__esModule?$:{default:$};function _(F,$){if(!(F instanceof $))throw new TypeError("Cannot call a class as a function")}function m(F,$){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!$||"object"!=typeof $&&"function"!=typeof $?F:$}k.SigninState=function(F){function $(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},te=N.nonce,q=N.authority,B=N.client_id,O=N.redirect_uri,Z=N.code_verifier,de=N.response_mode,ee=N.client_secret,ie=N.scope,X=N.extraTokenParams,ve=N.skipUserInfo;_(this,$);var we=m(this,F.call(this,arguments[0]));if(!0===te?we._nonce=(0,y.default)():te&&(we._nonce=te),!0===Z?we._code_verifier=(0,y.default)()+(0,y.default)()+(0,y.default)():Z&&(we._code_verifier=Z),we.code_verifier){var Se=R.JoseUtil.hashString(we.code_verifier,"SHA256");we._code_challenge=R.JoseUtil.hexToBase64Url(Se)}return we._redirect_uri=O,we._authority=q,we._client_id=B,we._response_mode=de,we._client_secret=ee,we._scope=ie,we._extraTokenParams=X,we._skipUserInfo=ve,we}return function(te,q){if("function"!=typeof q&&null!==q)throw new TypeError("Super expression must either be null or a function, not "+typeof q);te.prototype=Object.create(q&&q.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(te,q):te.__proto__=q)}($,F),$.prototype.toStorageString=function(){return D.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},$.fromStorageString=function(te){return D.Log.debug("SigninState.fromStorageString"),new $(JSON.parse(te))},G($,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),$}(z.State)},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.default=function(){return("undefined"!=G&&null!==G&&void 0!==G.getRandomValues?D:z)().replace(/-/g,"")};var G="undefined"!=typeof window?window.crypto||window.msCrypto:null;function D(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(R){return(R^G.getRandomValues(new Uint8Array(1))[0]&15>>R/4).toString(16)})}function z(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(R){return(R^16*Math.random()>>R/4).toString(16)})}Ne.exports=k.default},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.User=void 0;var G=function(){function z(R,y){for(var _=0;_<y.length;_++){var m=y[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(R,m.key,m)}}return function(R,y,_){return y&&z(R.prototype,y),_&&z(R,_),R}}(),D=Q(0);k.User=function(){function z(R){var y=R.id_token,_=R.session_state,m=R.access_token,F=R.refresh_token,$=R.token_type,N=R.scope,te=R.profile,q=R.expires_at,B=R.state;(function(Z,de){if(!(Z instanceof de))throw new TypeError("Cannot call a class as a function")})(this,z),this.id_token=y,this.session_state=_,this.access_token=m,this.refresh_token=F,this.token_type=$,this.scope=N,this.profile=te,this.expires_at=q,this.state=B}return z.prototype.toStorageString=function(){return D.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},z.fromStorageString=function(y){return D.Log.debug("User.fromStorageString"),new z(JSON.parse(y))},G(z,[{key:"expires_in",get:function(){if(this.expires_at){var y=parseInt(Date.now()/1e3);return this.expires_at-y}},set:function(y){var _=parseInt(y);if("number"==typeof _&&_>0){var m=parseInt(Date.now()/1e3);this.expires_at=m+_}}},{key:"expired",get:function(){var y=this.expires_in;if(void 0!==y)return y<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),z}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.AccessTokenEvents=void 0;var G=Q(0),D=Q(46);function z(R,y){if(!(R instanceof y))throw new TypeError("Cannot call a class as a function")}k.AccessTokenEvents=function(){function R(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=y.accessTokenExpiringNotificationTime,m=void 0===_?60:_,F=y.accessTokenExpiringTimer,$=void 0===F?new D.Timer("Access token expiring"):F,N=y.accessTokenExpiredTimer,te=void 0===N?new D.Timer("Access token expired"):N;z(this,R),this._accessTokenExpiringNotificationTime=m,this._accessTokenExpiring=$,this._accessTokenExpired=te}return R.prototype.load=function(_){if(_.access_token&&void 0!==_.expires_in){var m=_.expires_in;if(G.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",m),m>0){var F=m-this._accessTokenExpiringNotificationTime;F<=0&&(F=1),G.Log.debug("AccessTokenEvents.load: registering expiring timer in:",F),this._accessTokenExpiring.init(F)}else G.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var $=m+1;G.Log.debug("AccessTokenEvents.load: registering expired timer in:",$),this._accessTokenExpired.init($)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},R.prototype.unload=function(){G.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},R.prototype.addAccessTokenExpiring=function(_){this._accessTokenExpiring.addHandler(_)},R.prototype.removeAccessTokenExpiring=function(_){this._accessTokenExpiring.removeHandler(_)},R.prototype.addAccessTokenExpired=function(_){this._accessTokenExpired.addHandler(_)},R.prototype.removeAccessTokenExpired=function(_){this._accessTokenExpired.removeHandler(_)},R}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.Event=void 0;var G=Q(0);k.Event=function(){function D(z){(function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")})(this,D),this._name=z,this._callbacks=[]}return D.prototype.addHandler=function(R){this._callbacks.push(R)},D.prototype.removeHandler=function(R){var y=this._callbacks.findIndex(function(_){return _===R});y>=0&&this._callbacks.splice(y,1)},D.prototype.raise=function(){G.Log.debug("Event: Raising event: "+this._name);for(var R=0;R<this._callbacks.length;R++){var y;(y=this._callbacks)[R].apply(y,arguments)}},D}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.SessionMonitor=void 0;var G=function(){function _(m,F){for(var $=0;$<F.length;$++){var N=F[$];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,N.key,N)}}return function(m,F,$){return F&&_(m.prototype,F),$&&_(m,$),m}}(),D=Q(0),z=Q(19),R=Q(1);function y(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}k.SessionMonitor=function(){function _(m){var F=this,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.CheckSessionIFrame,N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.Global.timer;if(y(this,_),!m)throw D.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=m,this._CheckSessionIFrameCtor=$,this._timer=N,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(te){te?F._start(te):F._settings.monitorAnonymousSession&&F._userManager.querySessionStatus().then(function(q){var B={session_state:q.session_state};q.sub&&q.sid&&(B.profile={sub:q.sub,sid:q.sid}),F._start(B)}).catch(function(q){D.Log.error("SessionMonitor ctor: error from querySessionStatus:",q.message)})}).catch(function(te){D.Log.error("SessionMonitor ctor: error from getUser:",te.message)}))}return _.prototype._start=function(F){var $=this,N=F.session_state;N&&(F.profile?(this._sub=F.profile.sub,this._sid=F.profile.sid,D.Log.debug("SessionMonitor._start: session_state:",N,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,D.Log.debug("SessionMonitor._start: session_state:",N,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(N):this._metadataService.getCheckSessionIframe().then(function(te){if(te){D.Log.debug("SessionMonitor._start: Initializing check session iframe");var q=$._client_id,B=$._checkSessionInterval,O=$._stopCheckSessionOnError;$._checkSessionIFrame=new $._CheckSessionIFrameCtor($._callback.bind($),q,te,B,O),$._checkSessionIFrame.load().then(function(){$._checkSessionIFrame.start(N)})}else D.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(te){D.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",te.message)}))},_.prototype._stop=function(){var F=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(D.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var $=this._timer.setInterval(function(){F._timer.clearInterval($),F._userManager.querySessionStatus().then(function(N){var te={session_state:N.session_state};N.sub&&N.sid&&(te.profile={sub:N.sub,sid:N.sid}),F._start(te)}).catch(function(N){D.Log.error("SessionMonitor: error from querySessionStatus:",N.message)})},1e3)},_.prototype._callback=function(){var F=this;this._userManager.querySessionStatus().then(function($){var N=!0;$?$.sub===F._sub?(N=!1,F._checkSessionIFrame.start($.session_state),$.sid===F._sid?D.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",$.session_state):(D.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",$.session_state),F._userManager.events._raiseUserSessionChanged())):D.Log.debug("SessionMonitor._callback: Different subject signed into OP:",$.sub):D.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),N&&(F._sub?(D.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),F._userManager.events._raiseUserSignedOut()):(D.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),F._userManager.events._raiseUserSignedIn()))}).catch(function($){F._sub&&(D.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",$.message),F._userManager.events._raiseUserSignedOut())})},G(_,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),_}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.CheckSessionIFrame=void 0;var G=Q(0);function D(z,R){if(!(z instanceof R))throw new TypeError("Cannot call a class as a function")}k.CheckSessionIFrame=function(){function z(R,y,_,m){var F=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];D(this,z),this._callback=R,this._client_id=y,this._url=_,this._interval=m||2e3,this._stopOnError=F;var $=_.indexOf("/",_.indexOf("//")+2);this._frame_origin=_.substr(0,$),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=_}return z.prototype.load=function(){var y=this;return new Promise(function(_){y._frame.onload=function(){_()},window.document.body.appendChild(y._frame),y._boundMessageEvent=y._message.bind(y),window.addEventListener("message",y._boundMessageEvent,!1)})},z.prototype._message=function(y){y.origin===this._frame_origin&&y.source===this._frame.contentWindow&&("error"===y.data?(G.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===y.data?(G.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):G.Log.debug("CheckSessionIFrame: "+y.data+" message from check session op iframe"))},z.prototype.start=function(y){var _=this;if(this._session_state!==y){G.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=y;var m=function(){_._frame.contentWindow.postMessage(_._client_id+" "+_._session_state,_._frame_origin)};m(),this._timer=window.setInterval(m,this._interval)}},z.prototype.stop=function(){this._session_state=null,this._timer&&(G.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},z}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.TokenRevocationClient=void 0;var G=Q(0),D=Q(2),z=Q(1);function R(m,F){if(!(m instanceof F))throw new TypeError("Cannot call a class as a function")}var y="access_token",_="refresh_token";k.TokenRevocationClient=function(){function m(F){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Global.XMLHttpRequest,N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.MetadataService;if(R(this,m),!F)throw G.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=F,this._XMLHttpRequestCtor=$,this._metadataService=new N(this._settings)}return m.prototype.revoke=function($,N){var te=this,q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!$)throw G.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(q!==y&&q!=_)throw G.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(B){if(B)return G.Log.debug("TokenRevocationClient.revoke: Revoking "+q),te._revoke(B,te._settings.client_id,te._settings.client_secret,$,q);if(N)throw G.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},m.prototype._revoke=function($,N,te,q,B){var O=this;return new Promise(function(Z,de){var ee=new O._XMLHttpRequestCtor;ee.open("POST",$),ee.onload=function(){G.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",ee.status),200===ee.status?Z():de(Error(ee.statusText+" ("+ee.status+")"))},ee.onerror=function(){G.Log.debug("TokenRevocationClient.revoke: Network Error."),de("Network Error")};var ie="client_id="+encodeURIComponent(N);te&&(ie+="&client_secret="+encodeURIComponent(te)),ie+="&token_type_hint="+encodeURIComponent(B),ie+="&token="+encodeURIComponent(q),ee.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),ee.send(ie)})},m}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.CordovaPopupWindow=void 0;var G=function(){function z(R,y){for(var _=0;_<y.length;_++){var m=y[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(R,m.key,m)}}return function(R,y,_){return y&&z(R.prototype,y),_&&z(R,_),R}}(),D=Q(0);k.CordovaPopupWindow=function(){function z(R){var y=this;(function(m,F){if(!(m instanceof F))throw new TypeError("Cannot call a class as a function")})(this,z),this._promise=new Promise(function(_,m){y._resolve=_,y._reject=m}),this.features=R.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=R.popupWindowTarget||"_blank",this.redirect_uri=R.startUrl,D.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return z.prototype._isInAppBrowserInstalled=function(y){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(_){return y.hasOwnProperty(_)})},z.prototype.navigate=function(y){if(y&&y.url){if(!window.cordova)return this._error("cordova is undefined");var _=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(_))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(y.url,this.target,this.features),this._popup?(D.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},z.prototype._loadStartCallback=function(y){0===y.url.indexOf(this.redirect_uri)&&this._success({url:y.url})},z.prototype._exitCallback=function(y){this._error(y)},z.prototype._success=function(y){this._cleanup(),D.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(y)},z.prototype._error=function(y){this._cleanup(),D.Log.error(y),this._reject(new Error(y))},z.prototype.close=function(){this._cleanup()},z.prototype._cleanup=function(){this._popup&&(D.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},G(z,[{key:"promise",get:function(){return this._promise}}]),z}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0});var G=Q(0),D=Q(10),z=Q(5),R=Q(6),y=Q(37),_=Q(38),m=Q(16),F=Q(2),$=Q(48),N=Q(49),te=Q(19),q=Q(20),B=Q(18),O=Q(1),Z=Q(15),de=Q(50);k.default={Version:de.Version,Log:G.Log,OidcClient:D.OidcClient,OidcClientSettings:z.OidcClientSettings,WebStorageStateStore:R.WebStorageStateStore,InMemoryWebStorage:y.InMemoryWebStorage,UserManager:_.UserManager,AccessTokenEvents:m.AccessTokenEvents,MetadataService:F.MetadataService,CordovaPopupNavigator:$.CordovaPopupNavigator,CordovaIFrameNavigator:N.CordovaIFrameNavigator,CheckSessionIFrame:te.CheckSessionIFrame,TokenRevocationClient:q.TokenRevocationClient,SessionMonitor:B.SessionMonitor,Global:O.Global,User:Z.User},Ne.exports=k.default},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.ClockService=function(){function G(){!function(z,R){if(!(z instanceof R))throw new TypeError("Cannot call a class as a function")}(this,G)}return G.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},G}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.ResponseValidator=void 0;var G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},D=Q(0),z=Q(2),R=Q(25),y=Q(11),_=Q(12),m=Q(4);function F(N,te){if(!(N instanceof te))throw new TypeError("Cannot call a class as a function")}var $=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];k.ResponseValidator=function(){function N(te){var q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.MetadataService,B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.UserInfoService,O=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m.JoseUtil,Z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:y.TokenClient;if(F(this,N),!te)throw D.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=te,this._metadataService=new q(this._settings),this._userInfoService=new B(this._settings),this._joseUtil=O,this._tokenClient=new Z(this._settings)}return N.prototype.validateSigninResponse=function(q,B){var O=this;return D.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(q,B).then(function(Z){return D.Log.debug("ResponseValidator.validateSigninResponse: state processed"),O._validateTokens(q,Z).then(function(de){return D.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),O._processClaims(q,de).then(function(ee){return D.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),ee})})})},N.prototype.validateSignoutResponse=function(q,B){return q.id!==B.state?(D.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(D.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),B.state=q.data,B.error?(D.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",B.error),Promise.reject(new _.ErrorResponse(B))):Promise.resolve(B))},N.prototype._processSigninParams=function(q,B){if(q.id!==B.state)return D.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!q.client_id)return D.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!q.authority)return D.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==q.authority)return D.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=q.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==q.client_id)return D.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=q.client_id;return D.Log.debug("ResponseValidator._processSigninParams: state validated"),B.state=q.data,B.error?(D.Log.warn("ResponseValidator._processSigninParams: Response was error",B.error),Promise.reject(new _.ErrorResponse(B))):q.nonce&&!B.id_token?(D.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!q.nonce&&B.id_token?(D.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):q.code_verifier&&!B.code?(D.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!q.code_verifier&&B.code?(D.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(B.scope||(B.scope=q.scope),Promise.resolve(B))},N.prototype._processClaims=function(q,B){var O=this;if(B.isOpenIdConnect){if(D.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),B.profile=this._filterProtocolClaims(B.profile),!0!==q.skipUserInfo&&this._settings.loadUserInfo&&B.access_token)return D.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(B.access_token).then(function(Z){return D.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),Z.sub!==B.profile.sub?(D.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(B.profile=O._mergeClaims(B.profile,Z),D.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",B.profile),B)});D.Log.debug("ResponseValidator._processClaims: not loading user info")}else D.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(B)},N.prototype._mergeClaims=function(q,B){var O=Object.assign({},q);for(var Z in B){var de=B[Z];Array.isArray(de)||(de=[de]);for(var ee=0;ee<de.length;ee++){var ie=de[ee];O[Z]?Array.isArray(O[Z])?O[Z].indexOf(ie)<0&&O[Z].push(ie):O[Z]!==ie&&(O[Z]="object"===(void 0===ie?"undefined":G(ie))&&this._settings.mergeClaims?this._mergeClaims(O[Z],ie):[O[Z],ie]):O[Z]=ie}}return O},N.prototype._filterProtocolClaims=function(q){D.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",q);var B=Object.assign({},q);return this._settings._filterProtocolClaims?($.forEach(function(O){delete B[O]}),D.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",B)):D.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),B},N.prototype._validateTokens=function(q,B){return B.code?(D.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(q,B)):B.id_token?B.access_token?(D.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(q,B)):(D.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(q,B)):(D.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(B))},N.prototype._processCode=function(q,B){var O=this,Z={client_id:q.client_id,client_secret:q.client_secret,code:B.code,redirect_uri:q.redirect_uri,code_verifier:q.code_verifier};return q.extraTokenParams&&"object"===G(q.extraTokenParams)&&Object.assign(Z,q.extraTokenParams),this._tokenClient.exchangeCode(Z).then(function(de){for(var ee in de)B[ee]=de[ee];return B.id_token?(D.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),O._validateIdTokenAttributes(q,B)):(D.Log.debug("ResponseValidator._processCode: token response successful, returning response"),B)})},N.prototype._validateIdTokenAttributes=function(q,B){var O=this;return this._metadataService.getIssuer().then(function(Z){var de=q.client_id,ee=O._settings.clockSkew;return D.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",ee),O._settings.getEpochTime().then(function(ie){return O._joseUtil.validateJwtAttributes(B.id_token,Z,de,ee,ie).then(function(X){return q.nonce&&q.nonce!==X.nonce?(D.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):X.sub?(B.profile=X,B):(D.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},N.prototype._validateIdTokenAndAccessToken=function(q,B){var O=this;return this._validateIdToken(q,B).then(function(Z){return O._validateAccessToken(Z)})},N.prototype._getSigningKeyForJwt=function(q){var B=this;return this._metadataService.getSigningKeys().then(function(O){var Z=q.header.kid;if(!O)return D.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));D.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var de=void 0;if(Z)de=O.filter(function(ee){return ee.kid===Z})[0];else{if((O=B._filterByAlg(O,q.header.alg)).length>1)return D.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));de=O[0]}return Promise.resolve(de)})},N.prototype._getSigningKeyForJwtWithSingleRetry=function(q){var B=this;return this._getSigningKeyForJwt(q).then(function(O){return O?Promise.resolve(O):(B._metadataService.resetSigningKeys(),B._getSigningKeyForJwt(q))})},N.prototype._validateIdToken=function(q,B){var O=this;if(!q.nonce)return D.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var Z=this._joseUtil.parseJwt(B.id_token);return Z&&Z.header&&Z.payload?q.nonce!==Z.payload.nonce?(D.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(de){return D.Log.debug("ResponseValidator._validateIdToken: Received issuer"),O._getSigningKeyForJwtWithSingleRetry(Z).then(function(ee){if(!ee)return D.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var ie=q.client_id,X=O._settings.clockSkew;return D.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",X),O._joseUtil.validateJwt(B.id_token,ee,de,ie,X).then(function(){return D.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),Z.payload.sub?(B.profile=Z.payload,B):(D.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(D.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",Z),Promise.reject(new Error("Failed to parse id_token")))},N.prototype._filterByAlg=function(q,B){var O=null;if(B.startsWith("RS"))O="RSA";else if(B.startsWith("PS"))O="PS";else{if(!B.startsWith("ES"))return D.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",B),[];O="EC"}return D.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",O),q=q.filter(function(Z){return Z.kty===O}),D.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",O,q.length),q},N.prototype._validateAccessToken=function(q){if(!q.profile)return D.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!q.profile.at_hash)return D.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!q.id_token)return D.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var B=this._joseUtil.parseJwt(q.id_token);if(!B||!B.header)return D.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",B),Promise.reject(new Error("Failed to parse id_token"));var O=B.header.alg;if(!O||5!==O.length)return D.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",O),Promise.reject(new Error("Unsupported alg: "+O));var Z=O.substr(2,3);if(!Z)return D.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",O,Z),Promise.reject(new Error("Unsupported alg: "+O));if(256!==(Z=parseInt(Z))&&384!==Z&&512!==Z)return D.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",O,Z),Promise.reject(new Error("Unsupported alg: "+O));var de="sha"+Z,ee=this._joseUtil.hashString(q.access_token,de);if(!ee)return D.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",de),Promise.reject(new Error("Failed to validate at_hash"));var ie=ee.substr(0,ee.length/2),X=this._joseUtil.hexToBase64Url(ie);return X!==q.profile.at_hash?(D.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",X,q.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(D.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(q))},N}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.UserInfoService=void 0;var G=Q(7),D=Q(2),z=Q(0),R=Q(4);function y(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}k.UserInfoService=function(){function _(m){var F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.JsonService,$=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.MetadataService,N=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R.JoseUtil;if(y(this,_),!m)throw z.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=m,this._jsonService=new F(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new $(this._settings),this._joseUtil=N}return _.prototype.getClaims=function(F){var $=this;return F?this._metadataService.getUserInfoEndpoint().then(function(N){return z.Log.debug("UserInfoService.getClaims: received userinfo url",N),$._jsonService.getJson(N,F).then(function(te){return z.Log.debug("UserInfoService.getClaims: claims received",te),te})}):(z.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},_.prototype._getClaimsFromJwt=function(F){var $=this;try{var N=this._joseUtil.parseJwt(F.responseText);if(!N||!N.header||!N.payload)return z.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",N),Promise.reject(new Error("Failed to parse id_token"));var te=N.header.kid,q=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":q=this._metadataService.getIssuer();break;case"ANY":q=Promise.resolve(N.payload.iss);break;default:q=Promise.resolve(this._settings.userInfoJwtIssuer)}return q.then(function(B){return z.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+B),$._metadataService.getSigningKeys().then(function(O){if(!O)return z.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));z.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var Z=void 0;if(te)Z=O.filter(function(ie){return ie.kid===te})[0];else{if((O=$._filterByAlg(O,N.header.alg)).length>1)return z.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));Z=O[0]}if(!Z)return z.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var de=$._settings.client_id,ee=$._settings.clockSkew;return z.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",ee),$._joseUtil.validateJwt(F.responseText,Z,B,de,ee,void 0,!0).then(function(){return z.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),N.payload})})})}catch(B){return z.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",B.message),void reject(B)}},_.prototype._filterByAlg=function(F,$){var N=null;if($.startsWith("RS"))N="RSA";else if($.startsWith("PS"))N="PS";else{if(!$.startsWith("ES"))return z.Log.debug("UserInfoService._filterByAlg: alg not supported: ",$),[];N="EC"}return z.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",N),F=F.filter(function(te){return te.kty===N}),z.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",N,F.length),F},_}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.AllowedSigningAlgs=k.b64tohex=k.hextob64u=k.crypto=k.X509=k.KeyUtil=k.jws=void 0;var G=Q(27);k.jws=G.jws,k.KeyUtil=G.KEYUTIL,k.X509=G.X509,k.crypto=G.crypto,k.hextob64u=G.hextob64u,k.b64tohex=G.b64tohex,k.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(Ne,k,Q){"use strict";(function(G){Object.defineProperty(k,"__esModule",{value:!0});var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},z={userAgent:!1},R={};if(void 0===y)var y={};y.lang={extend:function(a,c,f){if(!c||!a)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var p=function(){};if(p.prototype=c.prototype,a.prototype=new p,a.prototype.constructor=a,a.superclass=c.prototype,c.prototype.constructor==Object.prototype.constructor&&(c.prototype.constructor=c),f){var v;for(v in f)a.prototype[v]=f[v];var C=function(){},P=["toString","valueOf"];try{/MSIE/.test(z.userAgent)&&(C=function(x,A){for(v=0;v<P.length;v+=1){var V=P[v],J=A[V];"function"==typeof J&&J!=Object.prototype[V]&&(x[V]=J)}})}catch(M){}C(a.prototype,f)}}};var _,m,F,$,N,te,q,B,O,Z,de,a,c,f,p,ee=ee||(_=Math,F=(m={}).lib={},$=F.Base=function(){function u(){}return{extend:function(c){u.prototype=this;var f=new u;return c&&f.mixIn(c),f.hasOwnProperty("init")||(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(c){for(var f in c)c.hasOwnProperty(f)&&(this[f]=c[f]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),N=F.WordArray=$.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=null!=c?c:4*a.length},toString:function(a){return(a||q).stringify(this)},concat:function(a){var c=this.words,f=a.words,p=this.sigBytes,v=a.sigBytes;if(this.clamp(),p%4)for(var C=0;C<v;C++)c[p+C>>>2]|=(f[C>>>2]>>>24-C%4*8&255)<<24-(p+C)%4*8;else for(C=0;C<v;C+=4)c[p+C>>>2]=f[C>>>2];return this.sigBytes+=v,this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-c%4*8,a.length=_.ceil(c/4)},clone:function(){var a=$.clone.call(this);return a.words=this.words.slice(0),a},random:function(a){for(var c=[],f=0;f<a;f+=4)c.push(4294967296*_.random()|0);return new N.init(c,a)}}),te=m.enc={},q=te.Hex={stringify:function(a){for(var c=a.words,f=a.sigBytes,p=[],v=0;v<f;v++){var C=c[v>>>2]>>>24-v%4*8&255;p.push((C>>>4).toString(16)),p.push((15&C).toString(16))}return p.join("")},parse:function(a){for(var c=a.length,f=[],p=0;p<c;p+=2)f[p>>>3]|=parseInt(a.substr(p,2),16)<<24-p%8*4;return new N.init(f,c/2)}},B=te.Latin1={stringify:function(a){for(var c=a.words,f=a.sigBytes,p=[],v=0;v<f;v++)p.push(String.fromCharCode(c[v>>>2]>>>24-v%4*8&255));return p.join("")},parse:function(a){for(var c=a.length,f=[],p=0;p<c;p++)f[p>>>2]|=(255&a.charCodeAt(p))<<24-p%4*8;return new N.init(f,c)}},O=te.Utf8={stringify:function(a){try{return decodeURIComponent(escape(B.stringify(a)))}catch(c){throw new Error("Malformed UTF-8 data")}},parse:function(a){return B.parse(unescape(encodeURIComponent(a)))}},Z=F.BufferedBlockAlgorithm=$.extend({reset:function(){this._data=new N.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=O.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,f=c.words,p=c.sigBytes,v=this.blockSize,C=p/(4*v),P=(C=a?_.ceil(C):_.max((0|C)-this._minBufferSize,0))*v,M=_.min(4*P,p);if(P){for(var x=0;x<P;x+=v)this._doProcessBlock(f,x);var A=f.splice(0,P);c.sigBytes-=M}return new N.init(A,M)},clone:function(){var a=$.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0}),F.Hasher=Z.extend({cfg:$.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){Z.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(c,f){return new a.init(f).finalize(c)}},_createHmacHelper:function(a){return function(c,f){return new de.HMAC.init(a,f).finalize(c)}}}),de=m.algo={},m);c=(a=ee).lib,f=c.Base,p=c.WordArray,(a=a.x64={}).Word=f.extend({init:function(C,P){this.high=C,this.low=P}}),a.WordArray=f.extend({init:function(C,P){C=this.words=C||[],this.sigBytes=null!=P?P:8*C.length},toX32:function(){for(var C=this.words,P=C.length,M=[],x=0;x<P;x++){var A=C[x];M.push(A.high),M.push(A.low)}return p.create(M,this.sigBytes)},clone:function(){for(var C=f.clone.call(this),P=C.words=this.words.slice(0),M=P.length,x=0;x<M;x++)P[x]=P[x].clone();return C}}),function(){var a=ee.lib.WordArray;ee.enc.Base64={stringify:function(f){var p=f.words,v=f.sigBytes,C=this._map;f.clamp(),f=[];for(var P=0;P<v;P+=3)for(var M=(p[P>>>2]>>>24-P%4*8&255)<<16|(p[P+1>>>2]>>>24-(P+1)%4*8&255)<<8|p[P+2>>>2]>>>24-(P+2)%4*8&255,x=0;4>x&&P+.75*x<v;x++)f.push(C.charAt(M>>>6*(3-x)&63));if(p=C.charAt(64))for(;f.length%4;)f.push(p);return f.join("")},parse:function(f){var p=f.length,v=this._map;(C=v.charAt(64))&&-1!=(C=f.indexOf(C))&&(p=C);for(var C=[],P=0,M=0;M<p;M++)if(M%4){var x=v.indexOf(f.charAt(M-1))<<M%4*2,A=v.indexOf(f.charAt(M))>>>6-M%4*2;C[P>>>2]|=(x|A)<<24-P%4*8,P++}return a.create(C,P)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(u){for(var a=ee,c=(p=a.lib).WordArray,f=p.Hasher,p=a.algo,v=[],C=[],P=function(oe){return 4294967296*(oe-(0|oe))|0},M=2,x=0;64>x;){var A;e:{for(var V=u.sqrt(A=M),J=2;J<=V;J++)if(!(A%J)){A=!1;break e}A=!0}A&&(8>x&&(v[x]=P(u.pow(M,.5))),C[x]=P(u.pow(M,1/3)),x++),M++}var H=[];p=p.SHA256=f.extend({_doReset:function(){this._hash=new c.init(v.slice(0))},_doProcessBlock:function(oe,ae){for(var S=this._hash.words,j=S[0],W=S[1],K=S[2],ue=S[3],fe=S[4],Ie=S[5],be=S[6],ze=S[7],xe=0;64>xe;xe++){if(16>xe)H[xe]=0|oe[ae+xe];else{var Ve=H[xe-15],Et=H[xe-2];H[xe]=((Ve<<25|Ve>>>7)^(Ve<<14|Ve>>>18)^Ve>>>3)+H[xe-7]+((Et<<15|Et>>>17)^(Et<<13|Et>>>19)^Et>>>10)+H[xe-16]}Ve=ze+((fe<<26|fe>>>6)^(fe<<21|fe>>>11)^(fe<<7|fe>>>25))+(fe&Ie^~fe&be)+C[xe]+H[xe],Et=((j<<30|j>>>2)^(j<<19|j>>>13)^(j<<10|j>>>22))+(j&W^j&K^W&K),ze=be,be=Ie,Ie=fe,fe=ue+Ve|0,ue=K,K=W,W=j,j=Ve+Et|0}S[0]=S[0]+j|0,S[1]=S[1]+W|0,S[2]=S[2]+K|0,S[3]=S[3]+ue|0,S[4]=S[4]+fe|0,S[5]=S[5]+Ie|0,S[6]=S[6]+be|0,S[7]=S[7]+ze|0},_doFinalize:function(){var oe=this._data,ae=oe.words,S=8*this._nDataBytes,j=8*oe.sigBytes;return ae[j>>>5]|=128<<24-j%32,ae[14+(j+64>>>9<<4)]=u.floor(S/4294967296),ae[15+(j+64>>>9<<4)]=S,oe.sigBytes=4*ae.length,this._process(),this._hash},clone:function(){var oe=f.clone.call(this);return oe._hash=this._hash.clone(),oe}}),a.SHA256=f._createHelper(p),a.HmacSHA256=f._createHmacHelper(p)}(Math),function(){function u(){return f.create.apply(f,arguments)}for(var a=ee,c=a.lib.Hasher,f=(v=a.x64).Word,p=v.WordArray,v=a.algo,C=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],P=[],M=0;80>M;M++)P[M]=u();v=v.SHA512=c.extend({_doReset:function(){this._hash=new p.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(A,V){for(var J=(W=this._hash.words)[0],H=W[1],le=W[2],oe=W[3],ae=W[4],S=W[5],j=W[6],W=W[7],K=J.high,ue=J.low,fe=H.high,Ie=H.low,be=le.high,ze=le.low,xe=oe.high,Ve=oe.low,Et=ae.high,Mt=ae.low,Ct=S.high,jn=S.low,pn=j.high,xn=j.low,ct=W.high,qe=W.low,gn=K,In=ue,Io=fe,Be=Ie,To=be,Qt=ze,eo=xe,Pi=Ve,cr=Et,Xn=Mt,to=Ct,Gr=jn,ki=pn,Ni=xn,Ns=ct,Ue=qe,Bn=0;80>Bn;Bn++){var ci=P[Bn];if(16>Bn)var Zt=ci.high=0|A[V+2*Bn],Dt=ci.low=0|A[V+2*Bn+1];else{Zt=((Dt=(Zt=P[Bn-15]).high)>>>1|(Jr=Zt.low)<<31)^(Dt>>>8|Jr<<24)^Dt>>>7;var Jr=(Jr>>>1|Dt<<31)^(Jr>>>8|Dt<<24)^(Jr>>>7|Dt<<25),Un=((Dt=(Un=P[Bn-2]).high)>>>19|(pt=Un.low)<<13)^(Dt<<3|pt>>>29)^Dt>>>6,pt=(pt>>>19|Dt<<13)^(pt<<3|Dt>>>29)^(pt>>>6|Dt<<26),ru=(Dt=P[Bn-7]).high,Oi=(mn=P[Bn-16]).high,mn=mn.low;Zt=(Zt=(Zt=Zt+ru+((Dt=Jr+Dt.low)>>>0<Jr>>>0?1:0))+Un+((Dt+=pt)>>>0<pt>>>0?1:0))+Oi+((Dt+=mn)>>>0<mn>>>0?1:0),ci.high=Zt,ci.low=Dt}ru=cr&to^~cr&ki,mn=Xn&Gr^~Xn&Ni,ci=gn&Io^gn&To^Io&To;var mt=In&Be^In&Qt^Be&Qt,Tp=(Jr=(gn>>>28|In<<4)^(gn<<30|In>>>2)^(gn<<25|In>>>7),Un=(In>>>28|gn<<4)^(In<<30|gn>>>2)^(In<<25|gn>>>7),(pt=C[Bn]).high),dc=pt.low;Oi=Ns+((cr>>>14|Xn<<18)^(cr>>>18|Xn<<14)^(cr<<23|Xn>>>9))+((pt=Ue+((Xn>>>14|cr<<18)^(Xn>>>18|cr<<14)^(Xn<<23|cr>>>9)))>>>0<Ue>>>0?1:0),Ns=ki,Ue=Ni,ki=to,Ni=Gr,to=cr,Gr=Xn,cr=eo+(Oi=(Oi=(Oi=Oi+ru+((pt+=mn)>>>0<mn>>>0?1:0))+Tp+((pt+=dc)>>>0<dc>>>0?1:0))+Zt+((pt+=Dt)>>>0<Dt>>>0?1:0))+((Xn=Pi+pt|0)>>>0<Pi>>>0?1:0)|0,eo=To,Pi=Qt,To=Io,Qt=Be,Io=gn,Be=In,gn=Oi+(ci=Jr+ci+((Dt=Un+mt)>>>0<Un>>>0?1:0))+((In=pt+Dt|0)>>>0<pt>>>0?1:0)|0}ue=J.low=ue+In,J.high=K+gn+(ue>>>0<In>>>0?1:0),Ie=H.low=Ie+Be,H.high=fe+Io+(Ie>>>0<Be>>>0?1:0),ze=le.low=ze+Qt,le.high=be+To+(ze>>>0<Qt>>>0?1:0),Ve=oe.low=Ve+Pi,oe.high=xe+eo+(Ve>>>0<Pi>>>0?1:0),Mt=ae.low=Mt+Xn,ae.high=Et+cr+(Mt>>>0<Xn>>>0?1:0),jn=S.low=jn+Gr,S.high=Ct+to+(jn>>>0<Gr>>>0?1:0),xn=j.low=xn+Ni,j.high=pn+ki+(xn>>>0<Ni>>>0?1:0),qe=W.low=qe+Ue,W.high=ct+Ns+(qe>>>0<Ue>>>0?1:0)},_doFinalize:function(){var A=this._data,V=A.words,J=8*this._nDataBytes,H=8*A.sigBytes;return V[H>>>5]|=128<<24-H%32,V[30+(H+128>>>10<<5)]=Math.floor(J/4294967296),V[31+(H+128>>>10<<5)]=J,A.sigBytes=4*V.length,this._process(),this._hash.toX32()},clone:function(){var A=c.clone.call(this);return A._hash=this._hash.clone(),A},blockSize:32}),a.SHA512=c._createHelper(v),a.HmacSHA512=c._createHmacHelper(v)}(),function(){var u=ee,a=(p=u.x64).Word,c=p.WordArray,f=(p=u.algo).SHA512,p=p.SHA384=f.extend({_doReset:function(){this._hash=new c.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var C=f._doFinalize.call(this);return C.sigBytes-=16,C}});u.SHA384=f._createHelper(p),u.HmacSHA384=f._createHmacHelper(p)}();var ie,X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function ve(u){var a,c,f="";for(a=0;a+3<=u.length;a+=3)c=parseInt(u.substring(a,a+3),16),f+=X.charAt(c>>6)+X.charAt(63&c);for(a+1==u.length?(c=parseInt(u.substring(a,a+1),16),f+=X.charAt(c<<2)):a+2==u.length&&(c=parseInt(u.substring(a,a+2),16),f+=X.charAt(c>>2)+X.charAt((3&c)<<4));(3&f.length)>0;)f+="=";return f}function we(u){var a,c,f,p="",v=0;for(a=0;a<u.length&&"="!=u.charAt(a);++a)(f=X.indexOf(u.charAt(a)))<0||(0==v?(p+=bt(f>>2),c=3&f,v=1):1==v?(p+=bt(c<<2|f>>4),c=15&f,v=2):2==v?(p+=bt(c),p+=bt(f>>2),c=3&f,v=3):(p+=bt(c<<2|f>>4),p+=bt(15&f),v=0));return 1==v&&(p+=bt(c<<2)),p}function Se(u){var a,c=we(u),f=new Array;for(a=0;2*a<c.length;++a)f[a]=parseInt(c.substring(2*a,2*a+2),16);return f}function ne(u,a,c){null!=u&&("number"==typeof u?this.fromNumber(u,a,c):this.fromString(u,null==a&&"string"!=typeof u?256:a))}function ke(){return new ne(null)}"Microsoft Internet Explorer"==z.appName?(ne.prototype.am=function(a,c,f,p,v,C){for(var P=32767&c,M=c>>15;--C>=0;){var x=32767&this[a],A=this[a++]>>15,V=M*x+A*P;v=((x=P*x+((32767&V)<<15)+f[p]+(1073741823&v))>>>30)+(V>>>15)+M*A+(v>>>30),f[p++]=1073741823&x}return v},ie=30):"Netscape"!=z.appName?(ne.prototype.am=function(a,c,f,p,v,C){for(;--C>=0;){var P=c*this[a++]+f[p]+v;v=Math.floor(P/67108864),f[p++]=67108863&P}return v},ie=26):(ne.prototype.am=function(a,c,f,p,v,C){for(var P=16383&c,M=c>>14;--C>=0;){var x=16383&this[a],A=this[a++]>>14,V=M*x+A*P;v=((x=P*x+((16383&V)<<14)+f[p]+v)>>28)+(V>>14)+M*A,f[p++]=268435455&x}return v},ie=28),ne.prototype.DB=ie,ne.prototype.DM=(1<<ie)-1,ne.prototype.DV=1<<ie,ne.prototype.FV=Math.pow(2,52),ne.prototype.F1=52-ie,ne.prototype.F2=2*ie-52;var wt,yt,hn=new Array;for(wt="0".charCodeAt(0),yt=0;yt<=9;++yt)hn[wt++]=yt;for(wt="a".charCodeAt(0),yt=10;yt<36;++yt)hn[wt++]=yt;for(wt="A".charCodeAt(0),yt=10;yt<36;++yt)hn[wt++]=yt;function bt(u){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(u)}function Gt(u,a){var c=hn[u.charCodeAt(a)];return null==c?-1:c}function Jt(u){var a=ke();return a.fromInt(u),a}function ot(u){var a,c=1;return 0!=(a=u>>>16)&&(u=a,c+=16),0!=(a=u>>8)&&(u=a,c+=8),0!=(a=u>>4)&&(u=a,c+=4),0!=(a=u>>2)&&(u=a,c+=2),0!=(a=u>>1)&&(u=a,c+=1),c}function Le(u){this.m=u}function Ft(u){this.m=u,this.mp=u.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<u.DB-15)-1,this.mt2=2*u.t}function Cn(u,a){return u&a}function wn(u,a){return u|a}function Dn(u,a){return u^a}function Pt(u,a){return u&~a}function _r(u){if(0==u)return-1;var a=0;return 0==(65535&u)&&(u>>=16,a+=16),0==(255&u)&&(u>>=8,a+=8),0==(15&u)&&(u>>=4,a+=4),0==(3&u)&&(u>>=2,a+=2),0==(1&u)&&++a,a}function Vn(u){for(var a=0;0!=u;)u&=u-1,++a;return a}function lt(){}function ft(u){return u}function bn(u){this.r2=ke(),this.q3=ke(),ne.ONE.dlShiftTo(2*u.t,this.r2),this.mu=this.r2.divide(u),this.m=u}Le.prototype.convert=function(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a},Le.prototype.revert=function(a){return a},Le.prototype.reduce=function(a){a.divRemTo(this.m,null,a)},Le.prototype.mulTo=function(a,c,f){a.multiplyTo(c,f),this.reduce(f)},Le.prototype.sqrTo=function(a,c){a.squareTo(c),this.reduce(c)},Ft.prototype.convert=function(a){var c=ke();return a.abs().dlShiftTo(this.m.t,c),c.divRemTo(this.m,null,c),a.s<0&&c.compareTo(ne.ZERO)>0&&this.m.subTo(c,c),c},Ft.prototype.revert=function(a){var c=ke();return a.copyTo(c),this.reduce(c),c},Ft.prototype.reduce=function(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var c=0;c<this.m.t;++c){var f=32767&a[c],p=f*this.mpl+((f*this.mph+(a[c]>>15)*this.mpl&this.um)<<15)&a.DM;for(a[f=c+this.m.t]+=this.m.am(0,p,a,c,0,this.m.t);a[f]>=a.DV;)a[f]-=a.DV,a[++f]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)},Ft.prototype.mulTo=function(a,c,f){a.multiplyTo(c,f),this.reduce(f)},Ft.prototype.sqrTo=function(a,c){a.squareTo(c),this.reduce(c)},ne.prototype.copyTo=function(a){for(var c=this.t-1;c>=0;--c)a[c]=this[c];a.t=this.t,a.s=this.s},ne.prototype.fromInt=function(a){this.t=1,this.s=a<0?-1:0,a>0?this[0]=a:a<-1?this[0]=a+this.DV:this.t=0},ne.prototype.fromString=function(a,c){var f;if(16==c)f=4;else if(8==c)f=3;else if(256==c)f=8;else if(2==c)f=1;else if(32==c)f=5;else{if(4!=c)return void this.fromRadix(a,c);f=2}this.t=0,this.s=0;for(var p=a.length,v=!1,C=0;--p>=0;){var P=8==f?255&a[p]:Gt(a,p);P<0?"-"==a.charAt(p)&&(v=!0):(v=!1,0==C?this[this.t++]=P:C+f>this.DB?(this[this.t-1]|=(P&(1<<this.DB-C)-1)<<C,this[this.t++]=P>>this.DB-C):this[this.t-1]|=P<<C,(C+=f)>=this.DB&&(C-=this.DB))}8==f&&0!=(128&a[0])&&(this.s=-1,C>0&&(this[this.t-1]|=(1<<this.DB-C)-1<<C)),this.clamp(),v&&ne.ZERO.subTo(this,this)},ne.prototype.clamp=function(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t},ne.prototype.dlShiftTo=function(a,c){var f;for(f=this.t-1;f>=0;--f)c[f+a]=this[f];for(f=a-1;f>=0;--f)c[f]=0;c.t=this.t+a,c.s=this.s},ne.prototype.drShiftTo=function(a,c){for(var f=a;f<this.t;++f)c[f-a]=this[f];c.t=Math.max(this.t-a,0),c.s=this.s},ne.prototype.lShiftTo=function(a,c){var f,p=a%this.DB,v=this.DB-p,C=(1<<v)-1,P=Math.floor(a/this.DB),M=this.s<<p&this.DM;for(f=this.t-1;f>=0;--f)c[f+P+1]=this[f]>>v|M,M=(this[f]&C)<<p;for(f=P-1;f>=0;--f)c[f]=0;c[P]=M,c.t=this.t+P+1,c.s=this.s,c.clamp()},ne.prototype.rShiftTo=function(a,c){c.s=this.s;var f=Math.floor(a/this.DB);if(f>=this.t)c.t=0;else{var p=a%this.DB,v=this.DB-p,C=(1<<p)-1;c[0]=this[f]>>p;for(var P=f+1;P<this.t;++P)c[P-f-1]|=(this[P]&C)<<v,c[P-f]=this[P]>>p;p>0&&(c[this.t-f-1]|=(this.s&C)<<v),c.t=this.t-f,c.clamp()}},ne.prototype.subTo=function(a,c){for(var f=0,p=0,v=Math.min(a.t,this.t);f<v;)p+=this[f]-a[f],c[f++]=p&this.DM,p>>=this.DB;if(a.t<this.t){for(p-=a.s;f<this.t;)p+=this[f],c[f++]=p&this.DM,p>>=this.DB;p+=this.s}else{for(p+=this.s;f<a.t;)p-=a[f],c[f++]=p&this.DM,p>>=this.DB;p-=a.s}c.s=p<0?-1:0,p<-1?c[f++]=this.DV+p:p>0&&(c[f++]=p),c.t=f,c.clamp()},ne.prototype.multiplyTo=function(a,c){var f=this.abs(),p=a.abs(),v=f.t;for(c.t=v+p.t;--v>=0;)c[v]=0;for(v=0;v<p.t;++v)c[v+f.t]=f.am(0,p[v],c,v,0,f.t);c.s=0,c.clamp(),this.s!=a.s&&ne.ZERO.subTo(c,c)},ne.prototype.squareTo=function(a){for(var c=this.abs(),f=a.t=2*c.t;--f>=0;)a[f]=0;for(f=0;f<c.t-1;++f){var p=c.am(f,c[f],a,2*f,0,1);(a[f+c.t]+=c.am(f+1,2*c[f],a,2*f+1,p,c.t-f-1))>=c.DV&&(a[f+c.t]-=c.DV,a[f+c.t+1]=1)}a.t>0&&(a[a.t-1]+=c.am(f,c[f],a,2*f,0,1)),a.s=0,a.clamp()},ne.prototype.divRemTo=function(a,c,f){var p=a.abs();if(!(p.t<=0)){var v=this.abs();if(v.t<p.t)return null!=c&&c.fromInt(0),void(null!=f&&this.copyTo(f));null==f&&(f=ke());var C=ke(),P=this.s,M=a.s,x=this.DB-ot(p[p.t-1]);x>0?(p.lShiftTo(x,C),v.lShiftTo(x,f)):(p.copyTo(C),v.copyTo(f));var A=C.t,V=C[A-1];if(0!=V){var J=V*(1<<this.F1)+(A>1?C[A-2]>>this.F2:0),H=this.FV/J,le=(1<<this.F1)/J,oe=1<<this.F2,ae=f.t,S=ae-A,j=null==c?ke():c;for(C.dlShiftTo(S,j),f.compareTo(j)>=0&&(f[f.t++]=1,f.subTo(j,f)),ne.ONE.dlShiftTo(A,j),j.subTo(C,C);C.t<A;)C[C.t++]=0;for(;--S>=0;){var W=f[--ae]==V?this.DM:Math.floor(f[ae]*H+(f[ae-1]+oe)*le);if((f[ae]+=C.am(0,W,f,S,0,A))<W)for(C.dlShiftTo(S,j),f.subTo(j,f);f[ae]<--W;)f.subTo(j,f)}null!=c&&(f.drShiftTo(A,c),P!=M&&ne.ZERO.subTo(c,c)),f.t=A,f.clamp(),x>0&&f.rShiftTo(x,f),P<0&&ne.ZERO.subTo(f,f)}}},ne.prototype.invDigit=function(){if(this.t<1)return 0;var a=this[0];if(0==(1&a))return 0;var c=3&a;return(c=(c=(c=(c=c*(2-(15&a)*c)&15)*(2-(255&a)*c)&255)*(2-((65535&a)*c&65535))&65535)*(2-a*c%this.DV)%this.DV)>0?this.DV-c:-c},ne.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},ne.prototype.exp=function(a,c){if(a>4294967295||a<1)return ne.ONE;var f=ke(),p=ke(),v=c.convert(this),C=ot(a)-1;for(v.copyTo(f);--C>=0;)if(c.sqrTo(f,p),(a&1<<C)>0)c.mulTo(p,v,f);else{var P=f;f=p,p=P}return c.revert(f)},ne.prototype.toString=function(a){if(this.s<0)return"-"+this.negate().toString(a);var c;if(16==a)c=4;else if(8==a)c=3;else if(2==a)c=1;else if(32==a)c=5;else{if(4!=a)return this.toRadix(a);c=2}var f,p=(1<<c)-1,v=!1,C="",P=this.t,M=this.DB-P*this.DB%c;if(P-- >0)for(M<this.DB&&(f=this[P]>>M)>0&&(v=!0,C=bt(f));P>=0;)M<c?(f=(this[P]&(1<<M)-1)<<c-M,f|=this[--P]>>(M+=this.DB-c)):(f=this[P]>>(M-=c)&p,M<=0&&(M+=this.DB,--P)),f>0&&(v=!0),v&&(C+=bt(f));return v?C:"0"},ne.prototype.negate=function(){var a=ke();return ne.ZERO.subTo(this,a),a},ne.prototype.abs=function(){return this.s<0?this.negate():this},ne.prototype.compareTo=function(a){var c=this.s-a.s;if(0!=c)return c;var f=this.t;if(0!=(c=f-a.t))return this.s<0?-c:c;for(;--f>=0;)if(0!=(c=this[f]-a[f]))return c;return 0},ne.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+ot(this[this.t-1]^this.s&this.DM)},ne.prototype.mod=function(a){var c=ke();return this.abs().divRemTo(a,null,c),this.s<0&&c.compareTo(ne.ZERO)>0&&a.subTo(c,c),c},ne.prototype.modPowInt=function(a,c){var f;return f=a<256||c.isEven()?new Le(c):new Ft(c),this.exp(a,f)},ne.ZERO=Jt(0),ne.ONE=Jt(1),lt.prototype.convert=ft,lt.prototype.revert=ft,lt.prototype.mulTo=function(a,c,f){a.multiplyTo(c,f)},lt.prototype.sqrTo=function(a,c){a.squareTo(c)},bn.prototype.convert=function(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var c=ke();return a.copyTo(c),this.reduce(c),c},bn.prototype.revert=function(a){return a},bn.prototype.reduce=function(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)},bn.prototype.mulTo=function(a,c,f){a.multiplyTo(c,f),this.reduce(f)},bn.prototype.sqrTo=function(a,c){a.squareTo(c),this.reduce(c)};var Y,re,ce,L=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],w=(1<<26)/L[L.length-1];function E(){this.i=0,this.j=0,this.S=new Array}function pe(){!function(a){re[ce++]^=255&a,re[ce++]^=a>>8&255,re[ce++]^=a>>16&255,re[ce++]^=a>>24&255,ce>=256&&(ce-=256)}((new Date).getTime())}if(ne.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))},ne.prototype.toRadix=function(a){if(null==a&&(a=10),0==this.signum()||a<2||a>36)return"0";var c=this.chunkSize(a),f=Math.pow(a,c),p=Jt(f),v=ke(),C=ke(),P="";for(this.divRemTo(p,v,C);v.signum()>0;)P=(f+C.intValue()).toString(a).substr(1)+P,v.divRemTo(p,v,C);return C.intValue().toString(a)+P},ne.prototype.fromRadix=function(a,c){this.fromInt(0),null==c&&(c=10);for(var f=this.chunkSize(c),p=Math.pow(c,f),v=!1,C=0,P=0,M=0;M<a.length;++M){var x=Gt(a,M);x<0?"-"==a.charAt(M)&&0==this.signum()&&(v=!0):(P=c*P+x,++C>=f&&(this.dMultiply(p),this.dAddOffset(P,0),C=0,P=0))}C>0&&(this.dMultiply(Math.pow(c,C)),this.dAddOffset(P,0)),v&&ne.ZERO.subTo(this,this)},ne.prototype.fromNumber=function(a,c,f){if("number"==typeof c)if(a<2)this.fromInt(1);else for(this.fromNumber(a,f),this.testBit(a-1)||this.bitwiseTo(ne.ONE.shiftLeft(a-1),wn,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(c);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(ne.ONE.shiftLeft(a-1),this);else{var p=new Array,v=7&a;p.length=1+(a>>3),c.nextBytes(p),v>0?p[0]&=(1<<v)-1:p[0]=0,this.fromString(p,256)}},ne.prototype.bitwiseTo=function(a,c,f){var p,v,C=Math.min(a.t,this.t);for(p=0;p<C;++p)f[p]=c(this[p],a[p]);if(a.t<this.t){for(v=a.s&this.DM,p=C;p<this.t;++p)f[p]=c(this[p],v);f.t=this.t}else{for(v=this.s&this.DM,p=C;p<a.t;++p)f[p]=c(v,a[p]);f.t=a.t}f.s=c(this.s,a.s),f.clamp()},ne.prototype.changeBit=function(a,c){var f=ne.ONE.shiftLeft(a);return this.bitwiseTo(f,c,f),f},ne.prototype.addTo=function(a,c){for(var f=0,p=0,v=Math.min(a.t,this.t);f<v;)p+=this[f]+a[f],c[f++]=p&this.DM,p>>=this.DB;if(a.t<this.t){for(p+=a.s;f<this.t;)p+=this[f],c[f++]=p&this.DM,p>>=this.DB;p+=this.s}else{for(p+=this.s;f<a.t;)p+=a[f],c[f++]=p&this.DM,p>>=this.DB;p+=a.s}c.s=p<0?-1:0,p>0?c[f++]=p:p<-1&&(c[f++]=this.DV+p),c.t=f,c.clamp()},ne.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()},ne.prototype.dAddOffset=function(a,c){if(0!=a){for(;this.t<=c;)this[this.t++]=0;for(this[c]+=a;this[c]>=this.DV;)this[c]-=this.DV,++c>=this.t&&(this[this.t++]=0),++this[c]}},ne.prototype.multiplyLowerTo=function(a,c,f){var p,v=Math.min(this.t+a.t,c);for(f.s=0,f.t=v;v>0;)f[--v]=0;for(p=f.t-this.t;v<p;++v)f[v+this.t]=this.am(0,a[v],f,v,0,this.t);for(p=Math.min(a.t,c);v<p;++v)this.am(0,a[v],f,v,0,c-v);f.clamp()},ne.prototype.multiplyUpperTo=function(a,c,f){--c;var p=f.t=this.t+a.t-c;for(f.s=0;--p>=0;)f[p]=0;for(p=Math.max(c-this.t,0);p<a.t;++p)f[this.t+p-c]=this.am(c-p,a[p],f,0,0,this.t+p-c);f.clamp(),f.drShiftTo(1,f)},ne.prototype.modInt=function(a){if(a<=0)return 0;var c=this.DV%a,f=this.s<0?a-1:0;if(this.t>0)if(0==c)f=this[0]%a;else for(var p=this.t-1;p>=0;--p)f=(c*f+this[p])%a;return f},ne.prototype.millerRabin=function(a){var c=this.subtract(ne.ONE),f=c.getLowestSetBit();if(f<=0)return!1;var p=c.shiftRight(f);(a=a+1>>1)>L.length&&(a=L.length);for(var v=ke(),C=0;C<a;++C){v.fromInt(L[Math.floor(Math.random()*L.length)]);var P=v.modPow(p,this);if(0!=P.compareTo(ne.ONE)&&0!=P.compareTo(c)){for(var M=1;M++<f&&0!=P.compareTo(c);)if(0==(P=P.modPowInt(2,this)).compareTo(ne.ONE))return!1;if(0!=P.compareTo(c))return!1}}return!0},ne.prototype.clone=function(){var a=ke();return this.copyTo(a),a},ne.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},ne.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},ne.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},ne.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},ne.prototype.toByteArray=function(){var a=this.t,c=new Array;c[0]=this.s;var f,p=this.DB-a*this.DB%8,v=0;if(a-- >0)for(p<this.DB&&(f=this[a]>>p)!=(this.s&this.DM)>>p&&(c[v++]=f|this.s<<this.DB-p);a>=0;)p<8?(f=(this[a]&(1<<p)-1)<<8-p,f|=this[--a]>>(p+=this.DB-8)):(f=this[a]>>(p-=8)&255,p<=0&&(p+=this.DB,--a)),0!=(128&f)&&(f|=-256),0==v&&(128&this.s)!=(128&f)&&++v,(v>0||f!=this.s)&&(c[v++]=f);return c},ne.prototype.equals=function(a){return 0==this.compareTo(a)},ne.prototype.min=function(a){return this.compareTo(a)<0?this:a},ne.prototype.max=function(a){return this.compareTo(a)>0?this:a},ne.prototype.and=function(a){var c=ke();return this.bitwiseTo(a,Cn,c),c},ne.prototype.or=function(a){var c=ke();return this.bitwiseTo(a,wn,c),c},ne.prototype.xor=function(a){var c=ke();return this.bitwiseTo(a,Dn,c),c},ne.prototype.andNot=function(a){var c=ke();return this.bitwiseTo(a,Pt,c),c},ne.prototype.not=function(){for(var a=ke(),c=0;c<this.t;++c)a[c]=this.DM&~this[c];return a.t=this.t,a.s=~this.s,a},ne.prototype.shiftLeft=function(a){var c=ke();return a<0?this.rShiftTo(-a,c):this.lShiftTo(a,c),c},ne.prototype.shiftRight=function(a){var c=ke();return a<0?this.lShiftTo(-a,c):this.rShiftTo(a,c),c},ne.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a])return a*this.DB+_r(this[a]);return this.s<0?this.t*this.DB:-1},ne.prototype.bitCount=function(){for(var a=0,c=this.s&this.DM,f=0;f<this.t;++f)a+=Vn(this[f]^c);return a},ne.prototype.testBit=function(a){var c=Math.floor(a/this.DB);return c>=this.t?0!=this.s:0!=(this[c]&1<<a%this.DB)},ne.prototype.setBit=function(a){return this.changeBit(a,wn)},ne.prototype.clearBit=function(a){return this.changeBit(a,Pt)},ne.prototype.flipBit=function(a){return this.changeBit(a,Dn)},ne.prototype.add=function(a){var c=ke();return this.addTo(a,c),c},ne.prototype.subtract=function(a){var c=ke();return this.subTo(a,c),c},ne.prototype.multiply=function(a){var c=ke();return this.multiplyTo(a,c),c},ne.prototype.divide=function(a){var c=ke();return this.divRemTo(a,c,null),c},ne.prototype.remainder=function(a){var c=ke();return this.divRemTo(a,null,c),c},ne.prototype.divideAndRemainder=function(a){var c=ke(),f=ke();return this.divRemTo(a,c,f),new Array(c,f)},ne.prototype.modPow=function(a,c){var f,p,v=a.bitLength(),C=Jt(1);if(v<=0)return C;f=v<18?1:v<48?3:v<144?4:v<768?5:6,p=v<8?new Le(c):c.isEven()?new bn(c):new Ft(c);var P=new Array,M=3,x=f-1,A=(1<<f)-1;if(P[1]=p.convert(this),f>1){var V=ke();for(p.sqrTo(P[1],V);M<=A;)P[M]=ke(),p.mulTo(V,P[M-2],P[M]),M+=2}var J,H,le=a.t-1,oe=!0,ae=ke();for(v=ot(a[le])-1;le>=0;){for(v>=x?J=a[le]>>v-x&A:(J=(a[le]&(1<<v+1)-1)<<x-v,le>0&&(J|=a[le-1]>>this.DB+v-x)),M=f;0==(1&J);)J>>=1,--M;if((v-=M)<0&&(v+=this.DB,--le),oe)P[J].copyTo(C),oe=!1;else{for(;M>1;)p.sqrTo(C,ae),p.sqrTo(ae,C),M-=2;M>0?p.sqrTo(C,ae):(H=C,C=ae,ae=H),p.mulTo(ae,P[J],C)}for(;le>=0&&0==(a[le]&1<<v);)p.sqrTo(C,ae),H=C,C=ae,ae=H,--v<0&&(v=this.DB-1,--le)}return p.revert(C)},ne.prototype.modInverse=function(a){var c=a.isEven();if(this.isEven()&&c||0==a.signum())return ne.ZERO;for(var f=a.clone(),p=this.clone(),v=Jt(1),C=Jt(0),P=Jt(0),M=Jt(1);0!=f.signum();){for(;f.isEven();)f.rShiftTo(1,f),c?(v.isEven()&&C.isEven()||(v.addTo(this,v),C.subTo(a,C)),v.rShiftTo(1,v)):C.isEven()||C.subTo(a,C),C.rShiftTo(1,C);for(;p.isEven();)p.rShiftTo(1,p),c?(P.isEven()&&M.isEven()||(P.addTo(this,P),M.subTo(a,M)),P.rShiftTo(1,P)):M.isEven()||M.subTo(a,M),M.rShiftTo(1,M);f.compareTo(p)>=0?(f.subTo(p,f),c&&v.subTo(P,v),C.subTo(M,C)):(p.subTo(f,p),c&&P.subTo(v,P),M.subTo(C,M))}return 0!=p.compareTo(ne.ONE)?ne.ZERO:M.compareTo(a)>=0?M.subtract(a):M.signum()<0?(M.addTo(a,M),M.signum()<0?M.add(a):M):M},ne.prototype.pow=function(a){return this.exp(a,new lt)},ne.prototype.gcd=function(a){var c=this.s<0?this.negate():this.clone(),f=a.s<0?a.negate():a.clone();if(c.compareTo(f)<0){var p=c;c=f,f=p}var v=c.getLowestSetBit(),C=f.getLowestSetBit();if(C<0)return c;for(v<C&&(C=v),C>0&&(c.rShiftTo(C,c),f.rShiftTo(C,f));c.signum()>0;)(v=c.getLowestSetBit())>0&&c.rShiftTo(v,c),(v=f.getLowestSetBit())>0&&f.rShiftTo(v,f),c.compareTo(f)>=0?(c.subTo(f,c),c.rShiftTo(1,c)):(f.subTo(c,f),f.rShiftTo(1,f));return C>0&&f.lShiftTo(C,f),f},ne.prototype.isProbablePrime=function(a){var c,f=this.abs();if(1==f.t&&f[0]<=L[L.length-1]){for(c=0;c<L.length;++c)if(f[0]==L[c])return!0;return!1}if(f.isEven())return!1;for(c=1;c<L.length;){for(var p=L[c],v=c+1;v<L.length&&p<w;)p*=L[v++];for(p=f.modInt(p);c<v;)if(p%L[c++]==0)return!1}return f.millerRabin(a)},ne.prototype.square=function(){var a=ke();return this.squareTo(a),a},E.prototype.init=function(a){var c,f,p;for(c=0;c<256;++c)this.S[c]=c;for(f=0,c=0;c<256;++c)p=this.S[c],this.S[c]=this.S[f=f+this.S[c]+a[c%a.length]&255],this.S[f]=p;this.i=0,this.j=0},E.prototype.next=function(){var a;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,a=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=a,this.S[a+this.S[this.i]&255]},null==re){var Me;if(re=new Array,ce=0,void 0!==R&&(void 0!==R.crypto||void 0!==R.msCrypto)){var Ge=R.crypto||R.msCrypto;if(Ge.getRandomValues){var ht=new Uint8Array(32);for(Ge.getRandomValues(ht),Me=0;Me<32;++Me)re[ce++]=ht[Me]}else if("Netscape"==z.appName&&z.appVersion<"5"){var st=R.crypto.random(32);for(Me=0;Me<st.length;++Me)re[ce++]=255&st.charCodeAt(Me)}}for(;ce<256;)Me=Math.floor(65536*Math.random()),re[ce++]=Me>>>8,re[ce++]=255&Me;ce=0,pe()}function Vt(){if(null==Y){for(pe(),(Y=new E).init(re),ce=0;ce<re.length;++ce)re[ce]=0;ce=0}return Y.next()}function sn(){}function Sn(u,a){return new ne(u,a)}function wr(u,a,c){for(var f="",p=0;f.length<a;)f+=c(String.fromCharCode.apply(String,u.concat([(4278190080&p)>>24,(16711680&p)>>16,(65280&p)>>8,255&p]))),p+=1;return f}function je(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function kt(u,a){this.x=a,this.q=u}function Xe(u,a,c,f){this.curve=u,this.x=a,this.y=c,this.z=null==f?ne.ONE:f,this.zinv=null}function zr(u,a,c){this.q=u,this.a=this.fromBigInteger(a),this.b=this.fromBigInteger(c),this.infinity=new Xe(this,null,null)}sn.prototype.nextBytes=function(a){var c;for(c=0;c<a.length;++c)a[c]=Vt()},je.prototype.doPublic=function(a){return a.modPowInt(this.e,this.n)},je.prototype.setPublic=function(a,c){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof a)this.n=a,this.e=c;else{if(!(null!=a&&null!=c&&a.length>0&&c.length>0))throw"Invalid RSA public key";this.n=Sn(a,16),this.e=parseInt(c,16)}},je.prototype.encrypt=function(a){var c=function(C,P){if(P<C.length+11)throw"Message too long for RSA";for(var M=new Array,x=C.length-1;x>=0&&P>0;){var A=C.charCodeAt(x--);A<128?M[--P]=A:A>127&&A<2048?(M[--P]=63&A|128,M[--P]=A>>6|192):(M[--P]=63&A|128,M[--P]=A>>6&63|128,M[--P]=A>>12|224)}M[--P]=0;for(var V=new sn,J=new Array;P>2;){for(J[0]=0;0==J[0];)V.nextBytes(J);M[--P]=J[0]}return M[--P]=2,M[--P]=0,new ne(M)}(a,this.n.bitLength()+7>>3);if(null==c)return null;var f=this.doPublic(c);if(null==f)return null;var p=f.toString(16);return 0==(1&p.length)?p:"0"+p},je.prototype.encryptOAEP=function(a,c,f){var p=function(M,x,A,V){var J=T.crypto.MessageDigest,H=T.crypto.Util,le=null;if(A||(A="sha1"),"string"==typeof A&&(le=J.getCanonicalAlgName(A),V=J.getHashLength(le),A=function(be){return Fn(H.hashHex(ar(be),le))}),M.length+2*V+2>x)throw"Message too long for RSA";var oe,ae="";for(oe=0;oe<x-M.length-2*V-2;oe+=1)ae+="\0";var S=A("")+ae+"\x01"+M,j=new Array(V);(new sn).nextBytes(j);var W=wr(j,S.length,A),K=[];for(oe=0;oe<S.length;oe+=1)K[oe]=S.charCodeAt(oe)^W.charCodeAt(oe);var ue=wr(K,j.length,A),fe=[0];for(oe=0;oe<j.length;oe+=1)fe[oe+1]=j[oe]^ue.charCodeAt(oe);return new ne(fe.concat(K))}(a,this.n.bitLength()+7>>3,c,f);if(null==p)return null;var v=this.doPublic(p);if(null==v)return null;var C=v.toString(16);return 0==(1&C.length)?C:"0"+C},je.prototype.type="RSA",kt.prototype.equals=function(a){return a==this||this.q.equals(a.q)&&this.x.equals(a.x)},kt.prototype.toBigInteger=function(){return this.x},kt.prototype.negate=function(){return new kt(this.q,this.x.negate().mod(this.q))},kt.prototype.add=function(a){return new kt(this.q,this.x.add(a.toBigInteger()).mod(this.q))},kt.prototype.subtract=function(a){return new kt(this.q,this.x.subtract(a.toBigInteger()).mod(this.q))},kt.prototype.multiply=function(a){return new kt(this.q,this.x.multiply(a.toBigInteger()).mod(this.q))},kt.prototype.square=function(){return new kt(this.q,this.x.square().mod(this.q))},kt.prototype.divide=function(a){return new kt(this.q,this.x.multiply(a.toBigInteger().modInverse(this.q)).mod(this.q))},Xe.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Xe.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Xe.prototype.equals=function(a){return a==this||(this.isInfinity()?a.isInfinity():a.isInfinity()?this.isInfinity():!!a.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(a.z)).mod(this.curve.q).equals(ne.ZERO)&&a.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(a.z)).mod(this.curve.q).equals(ne.ZERO))},Xe.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(ne.ZERO)&&!this.y.toBigInteger().equals(ne.ZERO)},Xe.prototype.negate=function(){return new Xe(this.curve,this.x,this.y.negate(),this.z)},Xe.prototype.add=function(a){if(this.isInfinity())return a;if(a.isInfinity())return this;var c=a.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(a.z)).mod(this.curve.q),f=a.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(a.z)).mod(this.curve.q);if(ne.ZERO.equals(f))return ne.ZERO.equals(c)?this.twice():this.curve.getInfinity();var p=new ne("3"),v=this.x.toBigInteger(),C=this.y.toBigInteger(),P=(a.x.toBigInteger(),a.y.toBigInteger(),f.square()),M=P.multiply(f),x=v.multiply(P),A=c.square().multiply(this.z),V=A.subtract(x.shiftLeft(1)).multiply(a.z).subtract(M).multiply(f).mod(this.curve.q),J=x.multiply(p).multiply(c).subtract(C.multiply(M)).subtract(A.multiply(c)).multiply(a.z).add(c.multiply(M)).mod(this.curve.q),H=M.multiply(this.z).multiply(a.z).mod(this.curve.q);return new Xe(this.curve,this.curve.fromBigInteger(V),this.curve.fromBigInteger(J),H)},Xe.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var a=new ne("3"),c=this.x.toBigInteger(),f=this.y.toBigInteger(),p=f.multiply(this.z),v=p.multiply(f).mod(this.curve.q),C=this.curve.a.toBigInteger(),P=c.square().multiply(a);ne.ZERO.equals(C)||(P=P.add(this.z.square().multiply(C)));var M=(P=P.mod(this.curve.q)).square().subtract(c.shiftLeft(3).multiply(v)).shiftLeft(1).multiply(p).mod(this.curve.q),x=P.multiply(a).multiply(c).subtract(v.shiftLeft(1)).shiftLeft(2).multiply(v).subtract(P.square().multiply(P)).mod(this.curve.q),A=p.square().multiply(p).shiftLeft(3).mod(this.curve.q);return new Xe(this.curve,this.curve.fromBigInteger(M),this.curve.fromBigInteger(x),A)},Xe.prototype.multiply=function(a){if(this.isInfinity())return this;if(0==a.signum())return this.curve.getInfinity();var c,f=a,p=f.multiply(new ne("3")),v=this.negate(),C=this,P=this.curve.q.subtract(a),M=P.multiply(new ne("3")),x=new Xe(this.curve,this.x,this.y),A=x.negate();for(c=p.bitLength()-2;c>0;--c){C=C.twice();var V=p.testBit(c);V!=f.testBit(c)&&(C=C.add(V?this:v))}for(c=M.bitLength()-2;c>0;--c){x=x.twice();var J=M.testBit(c);J!=P.testBit(c)&&(x=x.add(J?x:A))}return C},Xe.prototype.multiplyTwo=function(a,c,f){var p;p=a.bitLength()>f.bitLength()?a.bitLength()-1:f.bitLength()-1;for(var v=this.curve.getInfinity(),C=this.add(c);p>=0;)v=v.twice(),a.testBit(p)?v=f.testBit(p)?v.add(C):v.add(this):f.testBit(p)&&(v=v.add(c)),--p;return v},zr.prototype.getQ=function(){return this.q},zr.prototype.getA=function(){return this.a},zr.prototype.getB=function(){return this.b},zr.prototype.equals=function(a){return a==this||this.q.equals(a.q)&&this.a.equals(a.a)&&this.b.equals(a.b)},zr.prototype.getInfinity=function(){return this.infinity},zr.prototype.fromBigInteger=function(a){return new kt(this.q,a)},zr.prototype.decodePointHex=function(a){switch(parseInt(a.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var c=(a.length-2)/2,f=a.substr(2,c),p=a.substr(c+2,c);return new Xe(this,this.fromBigInteger(new ne(f,16)),this.fromBigInteger(new ne(p,16)))}},kt.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Xe.prototype.getEncoded=function(u){var a=function(C,P){var M=C.toByteArrayUnsigned();if(P<M.length)M=M.slice(M.length-P);else for(;P>M.length;)M.unshift(0);return M},c=this.getX().toBigInteger(),f=this.getY().toBigInteger(),p=a(c,32);return u?f.isEven()?p.unshift(2):p.unshift(3):(p.unshift(4),p=p.concat(a(f,32))),p},Xe.decodeFrom=function(u,a){var c=a.length-1,f=a.slice(1,1+c/2),p=a.slice(1+c/2,1+c);f.unshift(0),p.unshift(0);var v=new ne(f),C=new ne(p);return new Xe(u,u.fromBigInteger(v),u.fromBigInteger(C))},Xe.decodeFromHex=function(u,a){a.substr(0,2);var c=a.length-2,f=a.substr(2,c/2),p=a.substr(2+c/2,c/2),v=new ne(f,16),C=new ne(p,16);return new Xe(u,u.fromBigInteger(v),u.fromBigInteger(C))},Xe.prototype.add2D=function(u){if(this.isInfinity())return u;if(u.isInfinity())return this;if(this.x.equals(u.x))return this.y.equals(u.y)?this.twice():this.curve.getInfinity();var a=u.x.subtract(this.x),c=u.y.subtract(this.y).divide(a),f=c.square().subtract(this.x).subtract(u.x),p=c.multiply(this.x.subtract(f)).subtract(this.y);return new Xe(this.curve,f,p)},Xe.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var u=this.curve.fromBigInteger(ne.valueOf(2)),a=this.curve.fromBigInteger(ne.valueOf(3)),c=this.x.square().multiply(a).add(this.curve.a).divide(this.y.multiply(u)),f=c.square().subtract(this.x.multiply(u)),p=c.multiply(this.x.subtract(f)).subtract(this.y);return new Xe(this.curve,f,p)},Xe.prototype.multiply2D=function(u){if(this.isInfinity())return this;if(0==u.signum())return this.curve.getInfinity();var a,c=u,f=c.multiply(new ne("3")),p=this.negate(),v=this;for(a=f.bitLength()-2;a>0;--a){v=v.twice();var C=f.testBit(a);C!=c.testBit(a)&&(v=v.add2D(C?this:p))}return v},Xe.prototype.isOnCurve=function(){var u=this.getX().toBigInteger(),a=this.getY().toBigInteger(),c=this.curve.getA().toBigInteger(),f=this.curve.getB().toBigInteger(),p=this.curve.getQ(),v=a.multiply(a).mod(p),C=u.multiply(u).multiply(u).add(c.multiply(u)).add(f).mod(p);return v.equals(C)},Xe.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Xe.prototype.validate=function(){var u=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var a=this.getX().toBigInteger(),c=this.getY().toBigInteger();if(a.compareTo(ne.ONE)<0||a.compareTo(u.subtract(ne.ONE))>0)throw new Error("x coordinate out of bounds");if(c.compareTo(ne.ONE)<0||c.compareTo(u.subtract(ne.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(u).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ec=function(){var u=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),a=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),c={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function f(C,P,M){return P?c[P]:String.fromCharCode(parseInt(M,16))}var p=new String(""),v=Object.hasOwnProperty;return function(C,P){var M,x,A=C.match(u),V=A[0],J=!1;"{"===V?M={}:"["===V?M=[]:(M=[],J=!0);for(var H=[M],le=1-J,oe=A.length;le<oe;++le){var ae;switch((V=A[le]).charCodeAt(0)){default:(ae=H[0])[x||ae.length]=+V,x=void 0;break;case 34:if(-1!==(V=V.substring(1,V.length-1)).indexOf("\\")&&(V=V.replace(a,f)),ae=H[0],!x){if(!(ae instanceof Array)){x=V||p;break}x=ae.length}ae[x]=V,x=void 0;break;case 91:H.unshift((ae=H[0])[x||ae.length]=[]),x=void 0;break;case 93:case 125:H.shift();break;case 102:(ae=H[0])[x||ae.length]=!1,x=void 0;break;case 110:(ae=H[0])[x||ae.length]=null,x=void 0;break;case 116:(ae=H[0])[x||ae.length]=!0,x=void 0;break;case 123:H.unshift((ae=H[0])[x||ae.length]={}),x=void 0}}if(J){if(1!==H.length)throw new Error;M=M[0]}else if(H.length)throw new Error;return P&&(M=function S(j,W){var K=j[W];if(K&&"object"===(void 0===K?"undefined":D(K))){var ue=null;for(var fe in K)if(v.call(K,fe)&&K!==j){var Ie=S(K,fe);void 0!==Ie?K[fe]=Ie:(ue||(ue=[]),ue.push(fe))}if(ue)for(var be=ue.length;--be>=0;)delete K[ue[be]]}return P.call(j,W,K)}({"":M},"")),M}}();void 0!==T&&T||(k.KJUR=T={}),void 0!==T.asn1&&T.asn1||(T.asn1={}),T.asn1.ASN1Util=new function(){this.integerToByteHex=function(u){var a=u.toString(16);return a.length%2==1&&(a="0"+a),a},this.bigIntToMinTwosComplementsHex=function(u){var a=u.toString(16);if("-"!=a.substr(0,1))a.length%2==1?a="0"+a:a.match(/^[0-7]/)||(a="00"+a);else{var c=a.substr(1).length;c%2==1?c+=1:a.match(/^[0-7]/)||(c+=2);for(var f="",p=0;p<c;p++)f+="f";a=new ne(f,16).xor(u).add(ne.ONE).toString(16).replace(/^-/,"")}return a},this.getPEMStringFromHex=function(u,a){return An(u,a)},this.newObject=function(u){var a=T.asn1,c=a.ASN1Object,f=a.DERBoolean,p=a.DERInteger,v=a.DERBitString,C=a.DEROctetString,P=a.DERNull,M=a.DERObjectIdentifier,x=a.DEREnumerated,A=a.DERUTF8String,V=a.DERNumericString,J=a.DERPrintableString,H=a.DERTeletexString,le=a.DERIA5String,oe=a.DERUTCTime,ae=a.DERGeneralizedTime,S=a.DERVisibleString,j=a.DERBMPString,W=a.DERSequence,K=a.DERSet,ue=a.DERTaggedObject,fe=a.ASN1Util.newObject;if(u instanceof a.ASN1Object)return u;var Ie=Object.keys(u);if(1!=Ie.length)throw new Error("key of param shall be only one.");var be=Ie[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+be+":"))throw new Error("undefined key: "+be);if("bool"==be)return new f(u[be]);if("int"==be)return new p(u[be]);if("bitstr"==be)return new v(u[be]);if("octstr"==be)return new C(u[be]);if("null"==be)return new P(u[be]);if("oid"==be)return new M(u[be]);if("enum"==be)return new x(u[be]);if("utf8str"==be)return new A(u[be]);if("numstr"==be)return new V(u[be]);if("prnstr"==be)return new J(u[be]);if("telstr"==be)return new H(u[be]);if("ia5str"==be)return new le(u[be]);if("utctime"==be)return new oe(u[be]);if("gentime"==be)return new ae(u[be]);if("visstr"==be)return new S(u[be]);if("bmpstr"==be)return new j(u[be]);if("asn1"==be)return new c(u[be]);if("seq"==be){for(var ze=u[be],xe=[],Ve=0;Ve<ze.length;Ve++){var Et=fe(ze[Ve]);xe.push(Et)}return new W({array:xe})}if("set"==be){for(ze=u[be],xe=[],Ve=0;Ve<ze.length;Ve++)Et=fe(ze[Ve]),xe.push(Et);return new K({array:xe})}if("tag"==be){var Mt=u[be];if("[object Array]"===Object.prototype.toString.call(Mt)&&3==Mt.length){var Ct=fe(Mt[2]);return new ue({tag:Mt[0],explicit:Mt[1],obj:Ct})}return new ue(Mt)}},this.jsonToASN1HEX=function(u){return this.newObject(u).getEncodedHex()}},T.asn1.ASN1Util.oidHexToInt=function(u){for(var a="",c=parseInt(u.substr(0,2),16),f=(a=Math.floor(c/40)+"."+c%40,""),p=2;p<u.length;p+=2){var v=("00000000"+parseInt(u.substr(p,2),16).toString(2)).slice(-8);f+=v.substr(1,7),"0"==v.substr(0,1)&&(a=a+"."+new ne(f,2).toString(10),f="")}return a},T.asn1.ASN1Util.oidIntToHex=function(u){var a=function(M){var x=M.toString(16);return 1==x.length&&(x="0"+x),x},c=function(M){var x="",A=new ne(M,10).toString(2),V=7-A.length%7;7==V&&(V=0);for(var J="",H=0;H<V;H++)J+="0";for(A=J+A,H=0;H<A.length-1;H+=7){var le=A.substr(H,7);H!=A.length-7&&(le="1"+le),x+=a(parseInt(le,2))}return x};if(!u.match(/^[0-9.]+$/))throw"malformed oid string: "+u;var f="",p=u.split("."),v=40*parseInt(p[0])+parseInt(p[1]);f+=a(v),p.splice(0,2);for(var C=0;C<p.length;C++)f+=c(p[C]);return f},T.asn1.ASN1Object=function(u){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var a=this.hV.length/2,c=a.toString(16);if(c.length%2==1&&(c="0"+c),a<128)return c;var f=c.length/2;if(f>15)throw"ASN.1 length too long to represent by 8x: n = "+a.toString(16);return(128+f).toString(16)+c},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(a){this.params=a},null!=u&&null!=u.tlv&&(this.hTLV=u.tlv,this.isModified=!1)},T.asn1.DERAbstractString=function(u){T.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(a){this.hTLV=null,this.isModified=!0,this.s=a,this.hV=Fo(this.s).toLowerCase()},this.setStringHex=function(a){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=a},this.getFreshValueHex=function(){return this.hV},void 0!==u&&("string"==typeof u?this.setString(u):void 0!==u.str?this.setString(u.str):void 0!==u.hex&&this.setStringHex(u.hex))},y.lang.extend(T.asn1.DERAbstractString,T.asn1.ASN1Object),T.asn1.DERAbstractTime=function(u){T.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(a){var c=a.getTime()+6e4*a.getTimezoneOffset();return new Date(c)},this.formatDate=function(a,c,f){var p=this.zeroPadding,v=this.localDateToUTC(a),C=String(v.getFullYear());"utc"==c&&(C=C.substr(2,2));var P=C+p(String(v.getMonth()+1),2)+p(String(v.getDate()),2)+p(String(v.getHours()),2)+p(String(v.getMinutes()),2)+p(String(v.getSeconds()),2);if(!0===f){var M=v.getMilliseconds();if(0!=M){var x=p(String(M),3);P=P+"."+(x=x.replace(/[0]+$/,""))}}return P+"Z"},this.zeroPadding=function(a,c){return a.length>=c?a:new Array(c-a.length+1).join("0")+a},this.getString=function(){return this.s},this.setString=function(a){this.hTLV=null,this.isModified=!0,this.s=a,this.hV=Kr(a)},this.setByDateValue=function(a,c,f,p,v,C){var P=new Date(Date.UTC(a,c-1,f,p,v,C,0));this.setByDate(P)},this.getFreshValueHex=function(){return this.hV}},y.lang.extend(T.asn1.DERAbstractTime,T.asn1.ASN1Object),T.asn1.DERAbstractStructured=function(u){T.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(a){this.hTLV=null,this.isModified=!0,this.asn1Array=a},this.appendASN1Object=function(a){this.hTLV=null,this.isModified=!0,this.asn1Array.push(a)},this.asn1Array=new Array,void 0!==u&&void 0!==u.array&&(this.asn1Array=u.array)},y.lang.extend(T.asn1.DERAbstractStructured,T.asn1.ASN1Object),T.asn1.DERBoolean=function(u){T.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==u?"010100":"0101ff"},y.lang.extend(T.asn1.DERBoolean,T.asn1.ASN1Object),T.asn1.DERInteger=function(u){T.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(a){this.hTLV=null,this.isModified=!0,this.hV=T.asn1.ASN1Util.bigIntToMinTwosComplementsHex(a)},this.setByInteger=function(a){var c=new ne(String(a),10);this.setByBigInteger(c)},this.setValueHex=function(a){this.hV=a},this.getFreshValueHex=function(){return this.hV},void 0!==u&&(void 0!==u.bigint?this.setByBigInteger(u.bigint):void 0!==u.int?this.setByInteger(u.int):"number"==typeof u?this.setByInteger(u):void 0!==u.hex&&this.setValueHex(u.hex))},y.lang.extend(T.asn1.DERInteger,T.asn1.ASN1Object),T.asn1.DERBitString=function(u){if(void 0!==u&&void 0!==u.obj){var a=T.asn1.ASN1Util.newObject(u.obj);u.hex="00"+a.getEncodedHex()}T.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(c){this.hTLV=null,this.isModified=!0,this.hV=c},this.setUnusedBitsAndHexValue=function(c,f){if(c<0||7<c)throw"unused bits shall be from 0 to 7: u = "+c;var p="0"+c;this.hTLV=null,this.isModified=!0,this.hV=p+f},this.setByBinaryString=function(c){var f=8-(c=c.replace(/0+$/,"")).length%8;8==f&&(f=0);for(var p=0;p<=f;p++)c+="0";var v="";for(p=0;p<c.length-1;p+=8){var C=c.substr(p,8),P=parseInt(C,2).toString(16);1==P.length&&(P="0"+P),v+=P}this.hTLV=null,this.isModified=!0,this.hV="0"+f+v},this.setByBooleanArray=function(c){for(var f="",p=0;p<c.length;p++)f+=1==c[p]?"1":"0";this.setByBinaryString(f)},this.newFalseArray=function(c){for(var f=new Array(c),p=0;p<c;p++)f[p]=!1;return f},this.getFreshValueHex=function(){return this.hV},void 0!==u&&("string"==typeof u&&u.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(u):void 0!==u.hex?this.setHexValueIncludingUnusedBits(u.hex):void 0!==u.bin?this.setByBinaryString(u.bin):void 0!==u.array&&this.setByBooleanArray(u.array))},y.lang.extend(T.asn1.DERBitString,T.asn1.ASN1Object),T.asn1.DEROctetString=function(u){if(void 0!==u&&void 0!==u.obj){var a=T.asn1.ASN1Util.newObject(u.obj);u.hex=a.getEncodedHex()}T.asn1.DEROctetString.superclass.constructor.call(this,u),this.hT="04"},y.lang.extend(T.asn1.DEROctetString,T.asn1.DERAbstractString),T.asn1.DERNull=function(){T.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},y.lang.extend(T.asn1.DERNull,T.asn1.ASN1Object),T.asn1.DERObjectIdentifier=function(u){T.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(a){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=a},this.setValueOidString=function(a){var c=function(p){var v=function(J){var H=J.toString(16);return 1==H.length&&(H="0"+H),H},C=function(J){var H="",le=parseInt(J,10).toString(2),oe=7-le.length%7;7==oe&&(oe=0);for(var ae="",S=0;S<oe;S++)ae+="0";for(le=ae+le,S=0;S<le.length-1;S+=7){var j=le.substr(S,7);S!=le.length-7&&(j="1"+j),H+=v(parseInt(j,2))}return H};try{if(!p.match(/^[0-9.]+$/))return null;var P="",M=p.split("."),x=40*parseInt(M[0],10)+parseInt(M[1],10);P+=v(x),M.splice(0,2);for(var A=0;A<M.length;A++)P+=C(M[A]);return P}catch(V){return null}}(a);if(null==c)throw new Error("malformed oid string: "+a);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=c},this.setValueName=function(a){var c=T.asn1.x509.OID.name2oid(a);if(""===c)throw new Error("DERObjectIdentifier oidName undefined: "+a);this.setValueOidString(c)},this.setValueNameOrOid=function(a){a.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(a):this.setValueName(a)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(a){"string"==typeof a?this.setValueNameOrOid(a):void 0!==a.oid?this.setValueNameOrOid(a.oid):void 0!==a.name?this.setValueNameOrOid(a.name):void 0!==a.hex&&this.setValueHex(a.hex)},void 0!==u&&this.setByParam(u)},y.lang.extend(T.asn1.DERObjectIdentifier,T.asn1.ASN1Object),T.asn1.DEREnumerated=function(u){T.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(a){this.hTLV=null,this.isModified=!0,this.hV=T.asn1.ASN1Util.bigIntToMinTwosComplementsHex(a)},this.setByInteger=function(a){var c=new ne(String(a),10);this.setByBigInteger(c)},this.setValueHex=function(a){this.hV=a},this.getFreshValueHex=function(){return this.hV},void 0!==u&&(void 0!==u.int?this.setByInteger(u.int):"number"==typeof u?this.setByInteger(u):void 0!==u.hex&&this.setValueHex(u.hex))},y.lang.extend(T.asn1.DEREnumerated,T.asn1.ASN1Object),T.asn1.DERUTF8String=function(u){T.asn1.DERUTF8String.superclass.constructor.call(this,u),this.hT="0c"},y.lang.extend(T.asn1.DERUTF8String,T.asn1.DERAbstractString),T.asn1.DERNumericString=function(u){T.asn1.DERNumericString.superclass.constructor.call(this,u),this.hT="12"},y.lang.extend(T.asn1.DERNumericString,T.asn1.DERAbstractString),T.asn1.DERPrintableString=function(u){T.asn1.DERPrintableString.superclass.constructor.call(this,u),this.hT="13"},y.lang.extend(T.asn1.DERPrintableString,T.asn1.DERAbstractString),T.asn1.DERTeletexString=function(u){T.asn1.DERTeletexString.superclass.constructor.call(this,u),this.hT="14"},y.lang.extend(T.asn1.DERTeletexString,T.asn1.DERAbstractString),T.asn1.DERIA5String=function(u){T.asn1.DERIA5String.superclass.constructor.call(this,u),this.hT="16"},y.lang.extend(T.asn1.DERIA5String,T.asn1.DERAbstractString),T.asn1.DERVisibleString=function(u){T.asn1.DERIA5String.superclass.constructor.call(this,u),this.hT="1a"},y.lang.extend(T.asn1.DERVisibleString,T.asn1.DERAbstractString),T.asn1.DERBMPString=function(u){T.asn1.DERBMPString.superclass.constructor.call(this,u),this.hT="1e"},y.lang.extend(T.asn1.DERBMPString,T.asn1.DERAbstractString),T.asn1.DERUTCTime=function(u){T.asn1.DERUTCTime.superclass.constructor.call(this,u),this.hT="17",this.setByDate=function(a){this.hTLV=null,this.isModified=!0,this.date=a,this.s=this.formatDate(this.date,"utc"),this.hV=Kr(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=Kr(this.s)),this.hV},void 0!==u&&(void 0!==u.str?this.setString(u.str):"string"==typeof u&&u.match(/^[0-9]{12}Z$/)?this.setString(u):void 0!==u.hex?this.setStringHex(u.hex):void 0!==u.date&&this.setByDate(u.date))},y.lang.extend(T.asn1.DERUTCTime,T.asn1.DERAbstractTime),T.asn1.DERGeneralizedTime=function(u){T.asn1.DERGeneralizedTime.superclass.constructor.call(this,u),this.hT="18",this.withMillis=!1,this.setByDate=function(a){this.hTLV=null,this.isModified=!0,this.date=a,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Kr(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Kr(this.s)),this.hV},void 0!==u&&(void 0!==u.str?this.setString(u.str):"string"==typeof u&&u.match(/^[0-9]{14}Z$/)?this.setString(u):void 0!==u.hex?this.setStringHex(u.hex):void 0!==u.date&&this.setByDate(u.date),!0===u.millis&&(this.withMillis=!0))},y.lang.extend(T.asn1.DERGeneralizedTime,T.asn1.DERAbstractTime),T.asn1.DERSequence=function(u){T.asn1.DERSequence.superclass.constructor.call(this,u),this.hT="30",this.getFreshValueHex=function(){for(var a="",c=0;c<this.asn1Array.length;c++)a+=this.asn1Array[c].getEncodedHex();return this.hV=a,this.hV}},y.lang.extend(T.asn1.DERSequence,T.asn1.DERAbstractStructured),T.asn1.DERSet=function(u){T.asn1.DERSet.superclass.constructor.call(this,u),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var a=new Array,c=0;c<this.asn1Array.length;c++)a.push(this.asn1Array[c].getEncodedHex());return 1==this.sortFlag&&a.sort(),this.hV=a.join(""),this.hV},void 0!==u&&void 0!==u.sortflag&&0==u.sortflag&&(this.sortFlag=!1)},y.lang.extend(T.asn1.DERSet,T.asn1.DERAbstractStructured),T.asn1.DERTaggedObject=function(u){T.asn1.DERTaggedObject.superclass.constructor.call(this);var a=T.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(c,f,p){this.hT=f,this.isExplicit=c,this.asn1Object=p,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=p.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,f),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(c){null!=c.tag&&(this.hT=c.tag),null!=c.explicit&&(this.isExplicit=c.explicit),null!=c.tage&&(this.hT=c.tage,this.isExplicit=!0),null!=c.tagi&&(this.hT=c.tagi,this.isExplicit=!1),null!=c.obj&&(c.obj instanceof a.ASN1Object?(this.asn1Object=c.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==D(c.obj)&&(this.asn1Object=a.ASN1Util.newObject(c.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=u&&this.setByParam(u)},y.lang.extend(T.asn1.DERTaggedObject,T.asn1.ASN1Object);var T,So,sr,De=new function(){};function tc(u){for(var a=new Array,c=0;c<u.length;c++)a[c]=u.charCodeAt(c);return a}function nc(u){for(var a="",c=0;c<u.length;c++)a+=String.fromCharCode(u[c]);return a}function Is(u){for(var a="",c=0;c<u.length;c++){var f=u[c].toString(16);1==f.length&&(f="0"+f),a+=f}return a}function Kr(u){return Is(tc(u))}function Zi(u){return(u=(u=u.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Mi(u){return u.length%4==2?u+="==":u.length%4==3&&(u+="="),(u=u.replace(/-/g,"+")).replace(/_/g,"/")}function Ut(u){return u.length%2==1&&(u="0"+u),Zi(ve(u))}function _t(u){return we(Mi(u))}function Fo(u){return Xi(Tt(u))}function an(u){return decodeURIComponent(Ao(u))}function Fn(u){for(var a="",c=0;c<u.length-1;c+=2)a+=String.fromCharCode(parseInt(u.substr(c,2),16));return a}function ar(u){for(var a="",c=0;c<u.length;c++)a+=("0"+u.charCodeAt(c).toString(16)).slice(-2);return a}function Ts(u){return ve(u)}function Ms(u){return Ts(u).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function ur(u){return we(u.replace(/[^0-9A-Za-z\/+=]*/g,""))}function An(u,a){return"-----BEGIN "+a+"-----\r\n"+Ms(u)+"\r\n-----END "+a+"-----\r\n"}function br(u,a){if(-1==u.indexOf("-----BEGIN "))throw"can't find PEM header: "+a;return ur(u=void 0!==a?(u=u.replace(new RegExp("^[^]*-----BEGIN "+a+"-----"),"")).replace(new RegExp("-----END "+a+"-----[^]*$"),""):(u=u.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Rs(u){var a,c,f,p,v,C,P,M,x,A,V;if(V=u.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return M=V[1],a=parseInt(M),2===M.length&&(50<=a&&a<100?a=1900+a:0<=a&&a<50&&(a=2e3+a)),c=parseInt(V[2])-1,f=parseInt(V[3]),p=parseInt(V[4]),v=parseInt(V[5]),C=parseInt(V[6]),P=0,""!==(x=V[7])&&(A=(x.substr(1)+"00").substr(0,3),P=parseInt(A)),Date.UTC(a,c,f,p,v,C,P);throw"unsupported zulu format: "+u}function Za(u){return~~(Rs(u)/1e3)}function Xi(u){return u.replace(/%/g,"")}function Ao(u){return u.replace(/(..)/g,"%$1")}function Xa(u){var a="malformed IPv6 address";if(!u.match(/^[0-9A-Fa-f:]+$/))throw a;var c=(u=u.toLowerCase()).split(":").length-1;if(c<2)throw a;var f=":".repeat(7-c+2),p=(u=u.replace("::",f)).split(":");if(8!=p.length)throw a;for(var v=0;v<8;v++)p[v]=("0000"+p[v]).slice(-4);return p.join("")}function Er(u){if(!u.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var a=(u=u.toLowerCase()).match(/.{1,4}/g),c=0;c<8;c++)a[c]=a[c].replace(/^0+/,""),""==a[c]&&(a[c]="0");var f=(u=":"+a.join(":")+":").match(/:(0:){2,}/g);if(null===f)return u.slice(1,-1);var p="";for(c=0;c<f.length;c++)f[c].length>p.length&&(p=f[c]);return(u=u.replace(p,"::")).slice(1,-1)}function Ps(u){var a="malformed hex value";if(!u.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw a;if(8!=u.length)return 32==u.length?Er(u):u;try{return parseInt(u.substr(0,2),16)+"."+parseInt(u.substr(2,2),16)+"."+parseInt(u.substr(4,2),16)+"."+parseInt(u.substr(6,2),16)}catch(c){throw a}}function Tt(u){for(var a=encodeURIComponent(u),c="",f=0;f<a.length;f++)"%"==a[f]?(c+=a.substr(f,3),f+=2):c=c+"%"+Kr(a[f]);return c}function li(u){return!(u.length%2!=0||!u.match(/^[0-9a-f]+$/)&&!u.match(/^[0-9A-F]+$/))}function lr(u){return u.length%2==1?"0"+u:u.substr(0,1)>"7"?"00"+u:u}De.getLblen=function(u,a){if("8"!=u.substr(a+2,1))return 1;var c=parseInt(u.substr(a+3,1));return 0==c?-1:0<c&&c<10?c+1:-2},De.getL=function(u,a){var c=De.getLblen(u,a);return c<1?"":u.substr(a+2,2*c)},De.getVblen=function(u,a){var c;return""==(c=De.getL(u,a))?-1:("8"===c.substr(0,1)?new ne(c.substr(2),16):new ne(c,16)).intValue()},De.getVidx=function(u,a){var c=De.getLblen(u,a);return c<0?c:a+2*(c+1)},De.getV=function(u,a){var c=De.getVidx(u,a),f=De.getVblen(u,a);return u.substr(c,2*f)},De.getTLV=function(u,a){return u.substr(a,2)+De.getL(u,a)+De.getV(u,a)},De.getTLVblen=function(u,a){return 2+2*De.getLblen(u,a)+2*De.getVblen(u,a)},De.getNextSiblingIdx=function(u,a){return De.getVidx(u,a)+2*De.getVblen(u,a)},De.getChildIdx=function(u,a){var c,f,p,v=De,C=[];c=v.getVidx(u,a),f=2*v.getVblen(u,a),"03"==u.substr(a,2)&&(c+=2,f-=2),p=0;for(var P=c;p<=f;){var M=v.getTLVblen(u,P);if((p+=M)<=f&&C.push(P),P+=M,p>=f)break}return C},De.getNthChildIdx=function(u,a,c){return De.getChildIdx(u,a)[c]},De.getIdxbyList=function(u,a,c,f){var p,v,C=De;return 0==c.length?void 0!==f&&u.substr(a,2)!==f?-1:a:(p=c.shift())>=(v=C.getChildIdx(u,a)).length?-1:C.getIdxbyList(u,v[p],c,f)},De.getIdxbyListEx=function(u,a,c,f){var p,v,C=De;if(0==c.length)return void 0!==f&&u.substr(a,2)!==f?-1:a;p=c.shift(),v=C.getChildIdx(u,a);for(var P=0,M=0;M<v.length;M++){var x=u.substr(v[M],2);if("number"==typeof p&&!C.isContextTag(x)&&P==p||"string"==typeof p&&C.isContextTag(x,p))return C.getIdxbyListEx(u,v[M],c,f);C.isContextTag(x)||P++}return-1},De.getTLVbyList=function(u,a,c,f){var p=De,v=p.getIdxbyList(u,a,c,f);return-1==v||v>=u.length?null:p.getTLV(u,v)},De.getTLVbyListEx=function(u,a,c,f){var p=De,v=p.getIdxbyListEx(u,a,c,f);return-1==v?null:p.getTLV(u,v)},De.getVbyList=function(u,a,c,f,p){var v,C,P=De;return-1==(v=P.getIdxbyList(u,a,c,f))||v>=u.length?null:(C=P.getV(u,v),!0===p&&(C=C.substr(2)),C)},De.getVbyListEx=function(u,a,c,f,p){var v,C,P=De;return-1==(v=P.getIdxbyListEx(u,a,c,f))?null:(C=P.getV(u,v),"03"==u.substr(v,2)&&!1!==p&&(C=C.substr(2)),C)},De.getInt=function(u,a,c){null==c&&(c=-1);try{var f=u.substr(a,2);if("02"!=f&&"03"!=f)return c;var p=De.getV(u,a);return"02"==f?parseInt(p,16):function(C){try{var P=C.substr(0,2);if("00"==P)return parseInt(C.substr(2),16);var M=parseInt(P,16),x=C.substr(2),A=parseInt(x,16).toString(2);return"0"==A&&(A="00000000"),A=A.slice(0,0-M),parseInt(A,2)}catch(V){return-1}}(p)}catch(v){return c}},De.getOID=function(u,a,c){null==c&&(c=null);try{return"06"!=u.substr(a,2)?c:function(p){if(!li(p))return null;try{var v=[],C=p.substr(0,2),P=parseInt(C,16);v[0]=new String(Math.floor(P/40)),v[1]=new String(P%40);for(var M=p.substr(2),x=[],A=0;A<M.length/2;A++)x.push(parseInt(M.substr(2*A,2),16));var V=[],J="";for(A=0;A<x.length;A++)128&x[A]?J+=rc((127&x[A]).toString(2),7):(J+=rc((127&x[A]).toString(2),7),V.push(new String(parseInt(J,2))),J="");var H=v.join(".");return V.length>0&&(H=H+"."+V.join(".")),H}catch(le){return null}}(De.getV(u,a))}catch(f){return c}},De.getOIDName=function(u,a,c){null==c&&(c=null);try{var f=De.getOID(u,a,c);if(f==c)return c;var p=T.asn1.x509.OID.oid2name(f);return""==p?f:p}catch(v){return c}},De.getString=function(u,a,c){null==c&&(c=null);try{return Fn(De.getV(u,a))}catch(f){return c}},De.hextooidstr=function(u){var a=function(J,H){return J.length>=H?J:new Array(H-J.length+1).join("0")+J},c=[],f=u.substr(0,2),p=parseInt(f,16);c[0]=new String(Math.floor(p/40)),c[1]=new String(p%40);for(var v=u.substr(2),C=[],P=0;P<v.length/2;P++)C.push(parseInt(v.substr(2*P,2),16));var M=[],x="";for(P=0;P<C.length;P++)128&C[P]?x+=a((127&C[P]).toString(2),7):(x+=a((127&C[P]).toString(2),7),M.push(new String(parseInt(x,2))),x="");var A=c.join(".");return M.length>0&&(A=A+"."+M.join(".")),A},De.dump=function(u,a,c,f){var p=De,v=p.getV,C=p.dump,P=p.getChildIdx,M=u;u instanceof T.asn1.ASN1Object&&(M=u.getEncodedHex());var x=function(be,ze){return be.length<=2*ze?be:be.substr(0,ze)+"..(total "+be.length/2+"bytes).."+be.substr(be.length-ze,ze)};void 0===a&&(a={ommit_long_octet:32}),void 0===c&&(c=0),void 0===f&&(f="");var A,V=a.ommit_long_octet;if("01"==(A=M.substr(c,2)))return"00"==(J=v(M,c))?f+"BOOLEAN FALSE\n":f+"BOOLEAN TRUE\n";if("02"==A)return f+"INTEGER "+x(J=v(M,c),V)+"\n";if("03"==A){var J=v(M,c);return p.isASN1HEX(J.substr(2))?(H=f+"BITSTRING, encapsulates\n")+C(J.substr(2),a,0,f+"  "):f+"BITSTRING "+x(J,V)+"\n"}if("04"==A)return J=v(M,c),p.isASN1HEX(J)?(H=f+"OCTETSTRING, encapsulates\n",H+=C(J,a,0,f+"  ")):f+"OCTETSTRING "+x(J,V)+"\n";if("05"==A)return f+"NULL\n";if("06"==A){var le=v(M,c),oe=T.asn1.ASN1Util.oidHexToInt(le),ae=T.asn1.x509.OID.oid2name(oe),S=oe.replace(/\./g," ");return""!=ae?f+"ObjectIdentifier "+ae+" ("+S+")\n":f+"ObjectIdentifier ("+S+")\n"}if("0a"==A)return f+"ENUMERATED "+parseInt(v(M,c))+"\n";if("0c"==A)return f+"UTF8String '"+an(v(M,c))+"'\n";if("13"==A)return f+"PrintableString '"+an(v(M,c))+"'\n";if("14"==A)return f+"TeletexString '"+an(v(M,c))+"'\n";if("16"==A)return f+"IA5String '"+an(v(M,c))+"'\n";if("17"==A)return f+"UTCTime "+an(v(M,c))+"\n";if("18"==A)return f+"GeneralizedTime "+an(v(M,c))+"\n";if("1a"==A)return f+"VisualString '"+an(v(M,c))+"'\n";if("1e"==A)return f+"BMPString '"+an(v(M,c))+"'\n";if("30"==A){if("3000"==M.substr(c,4))return f+"SEQUENCE {}\n";H=f+"SEQUENCE\n";var j=a;if((2==(ue=P(M,c)).length||3==ue.length)&&"06"==M.substr(ue[0],2)&&"04"==M.substr(ue[ue.length-1],2)){ae=p.oidname(v(M,ue[0]));var W=JSON.parse(JSON.stringify(a));W.x509ExtName=ae,j=W}for(var K=0;K<ue.length;K++)H+=C(M,j,ue[K],f+"  ");return H}if("31"==A){H=f+"SET\n";var ue=P(M,c);for(K=0;K<ue.length;K++)H+=C(M,a,ue[K],f+"  ");return H}if(0!=(128&(A=parseInt(A,16)))){var H,fe=31&A;if(0!=(32&A)){for(H=f+"["+fe+"]\n",ue=P(M,c),K=0;K<ue.length;K++)H+=C(M,a,ue[K],f+"  ");return H}return J=v(M,c),De.isASN1HEX(J)?(H=f+"["+fe+"]\n")+C(J,a,0,f+"  "):(("68747470"==J.substr(0,8)||"subjectAltName"===a.x509ExtName&&2==fe)&&(J=an(J)),f+"["+fe+"] "+J+"\n")}return f+"UNKNOWN("+A+") "+v(M,c)+"\n"},De.isContextTag=function(u,a){var c,f;u=u.toLowerCase();try{c=parseInt(u,16)}catch(p){return-1}if(void 0===a)return 128==(192&c);try{return null!=a.match(/^\[[0-9]+\]$/)&&!((f=parseInt(a.substr(1,a.length-1),10))>31)&&128==(192&c)&&(31&c)==f}catch(p){return!1}},De.isASN1HEX=function(u){var a=De;if(u.length%2==1)return!1;var c=a.getVblen(u,0),f=u.substr(0,2),p=a.getL(u,0);return u.length-f.length-p.length==2*c},De.checkStrictDER=function(u,a,c,f,p){var v=De;if(void 0===c){if("string"!=typeof u)throw new Error("not hex string");if(u=u.toLowerCase(),!T.lang.String.isHex(u))throw new Error("not hex string");c=u.length,p=(f=u.length/2)<128?1:Math.ceil(f.toString(16))+1}if(v.getL(u,a).length>2*p)throw new Error("L of TLV too long: idx="+a);var C=v.getVblen(u,a);if(C>f)throw new Error("value of L too long than hex: idx="+a);var P=v.getTLV(u,a),M=P.length-2-v.getL(u,a).length;if(M!==2*C)throw new Error("V string length and L's value not the same:"+M+"/"+2*C);if(0===a&&u.length!=P.length)throw new Error("total length and TLV length unmatch:"+u.length+"!="+P.length);var x=u.substr(a,2);if("02"===x){var A=v.getVidx(u,a);if("00"==u.substr(A,2)&&u.charCodeAt(A+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(x,16)){for(var V=v.getVblen(u,a),J=0,H=v.getChildIdx(u,a),le=0;le<H.length;le++)J+=v.getTLV(u,H[le]).length,v.checkStrictDER(u,H[le],c,f,p);if(2*V!=J)throw new Error("sum of children's TLV length and L unmatch: "+2*V+"!="+J)}},De.oidname=function(u){var a=T.asn1;T.lang.String.isHex(u)&&(u=a.ASN1Util.oidHexToInt(u));var c=a.x509.OID.oid2name(u);return""===c&&(c=u),c},void 0!==T&&T||(k.KJUR=T={}),void 0!==T.lang&&T.lang||(T.lang={}),T.lang.String=function(){},"function"==typeof G?(k.utf8tob64u=So=function(a){return Zi(G.from(a,"utf8").toString("base64"))},k.b64utoutf8=sr=function(a){return G.from(Mi(a),"base64").toString("utf8")}):(k.utf8tob64u=So=function(a){return Ut(Xi(Tt(a)))},k.b64utoutf8=sr=function(a){return decodeURIComponent(Ao(_t(a)))}),T.lang.String.isInteger=function(u){return!!u.match(/^[0-9]+$/)||!!u.match(/^-[0-9]+$/)},T.lang.String.isHex=function(u){return li(u)},T.lang.String.isBase64=function(u){return!(!(u=u.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||u.length%4!=0)},T.lang.String.isBase64URL=function(u){return!u.match(/[+/=]/)&&(u=Mi(u),T.lang.String.isBase64(u))},T.lang.String.isIntegerArray=function(u){return!!(u=u.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},T.lang.String.isPrintable=function(u){return null!==u.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},T.lang.String.isIA5=function(u){return null!==u.match(/^[\x20-\x21\x23-\x7f]*$/)},T.lang.String.isMail=function(u){return null!==u.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var rc=function(a,c,f){return null==f&&(f="0"),a.length>=c?a:new Array(c-a.length+1).join(f)+a};void 0!==T&&T||(k.KJUR=T={}),void 0!==T.crypto&&T.crypto||(T.crypto={}),T.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:ee.algo.MD5,sha1:ee.algo.SHA1,sha224:ee.algo.SHA224,sha256:ee.algo.SHA256,sha384:ee.algo.SHA384,sha512:ee.algo.SHA512,ripemd160:ee.algo.RIPEMD160},this.getDigestInfoHex=function(u,a){if(void 0===this.DIGESTINFOHEAD[a])throw"alg not supported in Util.DIGESTINFOHEAD: "+a;return this.DIGESTINFOHEAD[a]+u},this.getPaddedDigestInfoHex=function(u,a,c){var f=this.getDigestInfoHex(u,a),p=c/4;if(f.length+22>p)throw"key is too short for SigAlg: keylen="+c+","+a;for(var v="0001",C="00"+f,P="",M=p-v.length-C.length,x=0;x<M;x+=2)P+="ff";return v+P+C},this.hashString=function(u,a){return new T.crypto.MessageDigest({alg:a}).digestString(u)},this.hashHex=function(u,a){return new T.crypto.MessageDigest({alg:a}).digestHex(u)},this.sha1=function(u){return this.hashString(u,"sha1")},this.sha256=function(u){return this.hashString(u,"sha256")},this.sha256Hex=function(u){return this.hashHex(u,"sha256")},this.sha512=function(u){return this.hashString(u,"sha512")},this.sha512Hex=function(u){return this.hashHex(u,"sha512")},this.isKey=function(u){return u instanceof je||u instanceof T.crypto.DSA||u instanceof T.crypto.ECDSA}},T.crypto.Util.md5=function(u){return new T.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(u)},T.crypto.Util.ripemd160=function(u){return new T.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(u)},T.crypto.Util.SECURERANDOMGEN=new sn,T.crypto.Util.getRandomHexOfNbytes=function(u){var a=new Array(u);return T.crypto.Util.SECURERANDOMGEN.nextBytes(a),Is(a)},T.crypto.Util.getRandomBigIntegerOfNbytes=function(u){return new ne(T.crypto.Util.getRandomHexOfNbytes(u),16)},T.crypto.Util.getRandomHexOfNbits=function(u){var a=u%8,c=new Array((u-a)/8+1);return T.crypto.Util.SECURERANDOMGEN.nextBytes(c),c[0]=(255<<a&255^255)&c[0],Is(c)},T.crypto.Util.getRandomBigIntegerOfNbits=function(u){return new ne(T.crypto.Util.getRandomHexOfNbits(u),16)},T.crypto.Util.getRandomBigIntegerZeroToMax=function(u){for(var a=u.bitLength();;){var c=T.crypto.Util.getRandomBigIntegerOfNbits(a);if(-1!=u.compareTo(c))return c}},T.crypto.Util.getRandomBigIntegerMinToMax=function(u,a){var c=u.compareTo(a);if(1==c)throw"biMin is greater than biMax";if(0==c)return u;var f=a.subtract(u);return T.crypto.Util.getRandomBigIntegerZeroToMax(f).add(u)},T.crypto.MessageDigest=function(u){this.setAlgAndProvider=function(a,c){if(null!==(a=T.crypto.MessageDigest.getCanonicalAlgName(a))&&void 0===c&&(c=T.crypto.Util.DEFAULTPROVIDER[a]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(a)&&"cryptojs"==c){try{this.md=T.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[a].create()}catch(f){throw"setAlgAndProvider hash alg set fail alg="+a+"/"+f}this.updateString=function(f){this.md.update(f)},this.updateHex=function(f){var p=ee.enc.Hex.parse(f);this.md.update(p)},this.digest=function(){return this.md.finalize().toString(ee.enc.Hex)},this.digestString=function(f){return this.updateString(f),this.digest()},this.digestHex=function(f){return this.updateHex(f),this.digest()}}if(-1!=":sha256:".indexOf(a)&&"sjcl"==c){try{this.md=new sjcl.hash.sha256}catch(f){throw"setAlgAndProvider hash alg set fail alg="+a+"/"+f}this.updateString=function(f){this.md.update(f)},this.updateHex=function(f){var p=sjcl.codec.hex.toBits(f);this.md.update(p)},this.digest=function(){var f=this.md.finalize();return sjcl.codec.hex.fromBits(f)},this.digestString=function(f){return this.updateString(f),this.digest()},this.digestHex=function(f){return this.updateHex(f),this.digest()}}},this.updateString=function(a){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(a){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(a){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(a){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==u&&void 0!==u.alg&&(this.algName=u.alg,void 0===u.prov&&(this.provName=T.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},T.crypto.MessageDigest.getCanonicalAlgName=function(u){return"string"==typeof u&&(u=(u=u.toLowerCase()).replace(/-/,"")),u},T.crypto.MessageDigest.getHashLength=function(u){var a=T.crypto.MessageDigest,c=a.getCanonicalAlgName(u);if(void 0===a.HASHLENGTH[c])throw"not supported algorithm: "+u;return a.HASHLENGTH[c]},T.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},T.crypto.Mac=function(u){this.setAlgAndProvider=function(a,c){if(null==(a=a.toLowerCase())&&(a="hmacsha1"),"hmac"!=(a=a.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+a;void 0===c&&(c=T.crypto.Util.DEFAULTPROVIDER[a]),this.algProv=a+"/"+c;var f=a.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(f)&&"cryptojs"==c){try{this.mac=ee.algo.HMAC.create(T.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[f],this.pass)}catch(v){throw"setAlgAndProvider hash alg set fail hashAlg="+f+"/"+v}this.updateString=function(v){this.mac.update(v)},this.updateHex=function(v){var C=ee.enc.Hex.parse(v);this.mac.update(C)},this.doFinal=function(){return this.mac.finalize().toString(ee.enc.Hex)},this.doFinalString=function(v){return this.updateString(v),this.doFinal()},this.doFinalHex=function(v){return this.updateHex(v),this.doFinal()}}},this.updateString=function(a){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(a){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(a){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(a){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(a){if("string"==typeof a){var c=a;return a.length%2!=1&&a.match(/^[0-9A-Fa-f]+$/)||(c=ar(a)),void(this.pass=ee.enc.Hex.parse(c))}if("object"!=(void 0===a?"undefined":D(a)))throw"KJUR.crypto.Mac unsupported password type: "+a;if(c=null,void 0!==a.hex){if(a.hex.length%2!=0||!a.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+a.hex;c=a.hex}if(void 0!==a.utf8&&(c=Fo(a.utf8)),void 0!==a.rstr&&(c=ar(a.rstr)),void 0!==a.b64&&(c=we(a.b64)),void 0!==a.b64u&&(c=_t(a.b64u)),null==c)throw"KJUR.crypto.Mac unsupported password type: "+a;this.pass=ee.enc.Hex.parse(c)},void 0!==u&&(void 0!==u.pass&&this.setPassword(u.pass),void 0!==u.alg&&(this.algName=u.alg,void 0===u.prov&&(this.provName=T.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},T.crypto.Signature=function(u){var a=null;if(this._setAlgNames=function(){var c=this.algName.match(/^(.+)with(.+)$/);c&&(this.mdAlgName=c[1].toLowerCase(),this.pubkeyAlgName=c[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(c,f){for(var p="",v=f/4-c.length,C=0;C<v;C++)p+="0";return p+c},this.setAlgAndProvider=function(c,f){if(this._setAlgNames(),"cryptojs/jsrsa"!=f)throw new Error("provider not supported: "+f);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new T.crypto.MessageDigest({alg:this.mdAlgName})}catch(p){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+p)}this.init=function(p,v){var C=null;try{C=void 0===v?Ht.getKey(p):Ht.getKey(p,v)}catch(P){throw"init failed:"+P}if(!0===C.isPrivate)this.prvKey=C,this.state="SIGN";else{if(!0!==C.isPublic)throw"init failed.:"+C;this.pubKey=C,this.state="VERIFY"}},this.updateString=function(p){this.md.updateString(p)},this.updateHex=function(p){this.md.updateHex(p)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==T.crypto.ECDSA&&(this.prvKey=new T.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof je&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof je&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof T.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof T.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(p){return this.updateString(p),this.sign()},this.signHex=function(p){return this.updateHex(p),this.sign()},this.verify=function(p){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==T.crypto.ECDSA&&(this.pubKey=new T.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof je&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,p,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof je&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,p);if(void 0!==T.crypto.ECDSA&&this.pubKey instanceof T.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,p);if(void 0!==T.crypto.DSA&&this.pubKey instanceof T.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,p);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(c,f){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(c){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(c){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(c){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(c){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(c){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=u,void 0!==u&&(void 0!==u.alg&&(this.algName=u.alg,this.provName=void 0===u.prov?T.crypto.Util.DEFAULTPROVIDER[this.algName]:u.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==u.psssaltlen&&(this.pssSaltLen=u.psssaltlen),void 0!==u.prvkeypem)){if(void 0!==u.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{a=Ht.getKey(u.prvkeypem),this.init(a)}catch(c){throw"fatal error to load pem private key: "+c}}},T.crypto.Cipher=function(u){},T.crypto.Cipher.encrypt=function(u,a,c){if(a instanceof je&&a.isPublic){var f=T.crypto.Cipher.getAlgByKeyAndName(a,c);if("RSA"===f)return a.encrypt(u);if("RSAOAEP"===f)return a.encryptOAEP(u,"sha1");var p=f.match(/^RSAOAEP(\d+)$/);if(null!==p)return a.encryptOAEP(u,"sha"+p[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+c}throw"Cipher.encrypt: unsupported key or algorithm"},T.crypto.Cipher.decrypt=function(u,a,c){if(a instanceof je&&a.isPrivate){var f=T.crypto.Cipher.getAlgByKeyAndName(a,c);if("RSA"===f)return a.decrypt(u);if("RSAOAEP"===f)return a.decryptOAEP(u,"sha1");var p=f.match(/^RSAOAEP(\d+)$/);if(null!==p)return a.decryptOAEP(u,"sha"+p[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+c}throw"Cipher.decrypt: unsupported key or algorithm"},T.crypto.Cipher.getAlgByKeyAndName=function(u,a){if(u instanceof je){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(a))return a;if(null==a)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+a}throw"getAlgByKeyAndName: not supported algorithm name: "+a},T.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==T&&T||(k.KJUR=T={}),void 0!==T.crypto&&T.crypto||(T.crypto={}),T.crypto.ECDSA=function(u){var a=Error,c=ne,f=Xe,p=T.crypto.ECDSA,v=T.crypto.ECParameterDB,C=p.getName,M=De.getVbyListEx,x=De.isASN1HEX,A=new sn;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(V){return new c(V.bitLength(),A).mod(V.subtract(c.ONE)).add(c.ONE)},this.setNamedCurve=function(V){this.ecparams=v.getByName(V),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=V},this.setPrivateKeyHex=function(V){this.isPrivate=!0,this.prvKeyHex=V},this.setPublicKeyHex=function(V){this.isPublic=!0,this.pubKeyHex=V},this.getPublicKeyXYHex=function(){var V=this.pubKeyHex;if("04"!==V.substr(0,2))throw"this method supports uncompressed format(04) only";var J=this.ecparams.keylen/4;if(V.length!==2+2*J)throw"malformed public key hex length";var H={};return H.x=V.substr(2,J),H.y=V.substr(2+J),H},this.getShortNISTPCurveName=function(){var V=this.curveName;return"secp256r1"===V||"NIST P-256"===V||"P-256"===V||"prime256v1"===V?"P-256":"secp384r1"===V||"NIST P-384"===V||"P-384"===V?"P-384":null},this.generateKeyPairHex=function(){var J=this.getBigRandom(this.ecparams.n),H=this.ecparams.G.multiply(J),le=H.getX().toBigInteger(),oe=H.getY().toBigInteger(),ae=this.ecparams.keylen/4,S=("0000000000"+J.toString(16)).slice(-ae),j="04"+("0000000000"+le.toString(16)).slice(-ae)+("0000000000"+oe.toString(16)).slice(-ae);return this.setPrivateKeyHex(S),this.setPublicKeyHex(j),{ecprvhex:S,ecpubhex:j}},this.signWithMessageHash=function(V){return this.signHex(V,this.prvKeyHex)},this.signHex=function(V,J){var H=new c(J,16),le=this.ecparams.n,oe=new c(V.substring(0,this.ecparams.keylen/4),16);do{var ae=this.getBigRandom(le),S=this.ecparams.G.multiply(ae).getX().toBigInteger().mod(le)}while(S.compareTo(c.ZERO)<=0);var j=ae.modInverse(le).multiply(oe.add(H.multiply(S))).mod(le);return p.biRSSigToASN1Sig(S,j)},this.sign=function(V,J){var H=J,le=this.ecparams.n,oe=c.fromByteArrayUnsigned(V);do{var ae=this.getBigRandom(le),S=this.ecparams.G.multiply(ae).getX().toBigInteger().mod(le)}while(S.compareTo(ne.ZERO)<=0);var j=ae.modInverse(le).multiply(oe.add(H.multiply(S))).mod(le);return this.serializeSig(S,j)},this.verifyWithMessageHash=function(V,J){return this.verifyHex(V,J,this.pubKeyHex)},this.verifyHex=function(V,J,H){try{var le,oe,ae=p.parseSigHex(J);le=ae.r,oe=ae.s;var S=f.decodeFromHex(this.ecparams.curve,H),j=new c(V.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(j,le,oe,S)}catch(W){return!1}},this.verify=function(V,J,H){var le,oe,ae;if(Bitcoin.Util.isArray(J)){var S=this.parseSig(J);le=S.r,oe=S.s}else{if("object"!==(void 0===J?"undefined":D(J))||!J.r||!J.s)throw"Invalid value for signature";le=J.r,oe=J.s}if(H instanceof Xe)ae=H;else{if(!Bitcoin.Util.isArray(H))throw"Invalid format for pubkey value, must be byte array or ECPointFp";ae=f.decodeFrom(this.ecparams.curve,H)}var j=c.fromByteArrayUnsigned(V);return this.verifyRaw(j,le,oe,ae)},this.verifyRaw=function(V,J,H,le){var oe=this.ecparams.n,ae=this.ecparams.G;if(J.compareTo(c.ONE)<0||J.compareTo(oe)>=0||H.compareTo(c.ONE)<0||H.compareTo(oe)>=0)return!1;var S=H.modInverse(oe),j=V.multiply(S).mod(oe),W=J.multiply(S).mod(oe);return ae.multiply(j).add(le.multiply(W)).getX().toBigInteger().mod(oe).equals(J)},this.serializeSig=function(V,J){var H=V.toByteArraySigned(),le=J.toByteArraySigned(),oe=[];return oe.push(2),oe.push(H.length),(oe=oe.concat(H)).push(2),oe.push(le.length),(oe=oe.concat(le)).unshift(oe.length),oe.unshift(48),oe},this.parseSig=function(V){var J;if(48!=V[0])throw new Error("Signature not a valid DERSequence");if(2!=V[J=2])throw new Error("First element in signature must be a DERInteger");var H=V.slice(J+2,J+2+V[J+1]);if(2!=V[J+=2+V[J+1]])throw new Error("Second element in signature must be a DERInteger");var le=V.slice(J+2,J+2+V[J+1]);return J+=2+V[J+1],{r:c.fromByteArrayUnsigned(H),s:c.fromByteArrayUnsigned(le)}},this.parseSigCompact=function(V){if(65!==V.length)throw"Signature has the wrong length";var J=V[0]-27;if(J<0||J>7)throw"Invalid signature type";var H=this.ecparams.n;return{r:c.fromByteArrayUnsigned(V.slice(1,33)).mod(H),s:c.fromByteArrayUnsigned(V.slice(33,65)).mod(H),i:J}},this.readPKCS5PrvKeyHex=function(V){if(!1===x(V))throw new Error("not ASN.1 hex string");var J,H,le;try{J=M(V,0,["[0]",0],"06"),H=M(V,0,[1],"04");try{le=M(V,0,["[1]",0],"03")}catch(oe){}}catch(oe){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=C(J),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(le),this.setPrivateKeyHex(H),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(V){if(!1===x(V))throw new a("not ASN.1 hex string");var J,H,le;try{M(V,0,[1,0],"06"),J=M(V,0,[1,1],"06"),H=M(V,0,[2,0,1],"04");try{le=M(V,0,[2,0,"[1]",0],"03")}catch(oe){}}catch(oe){throw new a("malformed PKCS#8 plain ECC private key")}if(this.curveName=C(J),void 0===this.curveName)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(le),this.setPrivateKeyHex(H),this.isPublic=!1},this.readPKCS8PubKeyHex=function(V){if(!1===x(V))throw new a("not ASN.1 hex string");var J,H;try{M(V,0,[0,0],"06"),J=M(V,0,[0,1],"06"),H=M(V,0,[1],"03")}catch(le){throw new a("malformed PKCS#8 ECC public key")}if(this.curveName=C(J),null===this.curveName)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(H)},this.readCertPubKeyHex=function(V,J){if(!1===x(V))throw new a("not ASN.1 hex string");var H,le;try{H=M(V,0,[0,5,0,1],"06"),le=M(V,0,[0,5,1],"03")}catch(oe){throw new a("malformed X.509 certificate ECC public key")}if(this.curveName=C(H),null===this.curveName)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(le)},void 0!==u&&void 0!==u.curve&&(this.curveName=u.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==u&&(void 0!==u.prv&&this.setPrivateKeyHex(u.prv),void 0!==u.pub&&this.setPublicKeyHex(u.pub))},T.crypto.ECDSA.parseSigHex=function(u){var a=T.crypto.ECDSA.parseSigHexInHexRS(u);return{r:new ne(a.r,16),s:new ne(a.s,16)}},T.crypto.ECDSA.parseSigHexInHexRS=function(u){var c=De.getChildIdx,f=De.getV;if(De.checkStrictDER(u,0),"30"!=u.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var p=c(u,0);if(2!=p.length)throw new Error("signature shall have two elements");var v=p[0],C=p[1];if("02"!=u.substr(v,2))throw new Error("1st item not ASN.1 integer");if("02"!=u.substr(C,2))throw new Error("2nd item not ASN.1 integer");return{r:f(u,v),s:f(u,C)}},T.crypto.ECDSA.asn1SigToConcatSig=function(u){var a=T.crypto.ECDSA.parseSigHexInHexRS(u),c=a.r,f=a.s;if("00"==c.substr(0,2)&&c.length%32==2&&(c=c.substr(2)),"00"==f.substr(0,2)&&f.length%32==2&&(f=f.substr(2)),c.length%32==30&&(c="00"+c),f.length%32==30&&(f="00"+f),c.length%32!=0)throw"unknown ECDSA sig r length error";if(f.length%32!=0)throw"unknown ECDSA sig s length error";return c+f},T.crypto.ECDSA.concatSigToASN1Sig=function(u){if(u.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var a=u.substr(0,u.length/2),c=u.substr(u.length/2);return T.crypto.ECDSA.hexRSSigToASN1Sig(a,c)},T.crypto.ECDSA.hexRSSigToASN1Sig=function(u,a){var c=new ne(u,16),f=new ne(a,16);return T.crypto.ECDSA.biRSSigToASN1Sig(c,f)},T.crypto.ECDSA.biRSSigToASN1Sig=function(u,a){var c=T.asn1,f=new c.DERInteger({bigint:u}),p=new c.DERInteger({bigint:a});return new c.DERSequence({array:[f,p]}).getEncodedHex()},T.crypto.ECDSA.getName=function(u){return"2b8104001f"===u?"secp192k1":"2a8648ce3d030107"===u?"secp256r1":"2b8104000a"===u?"secp256k1":"2b81040021"===u?"secp224r1":"2b81040022"===u?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(u)?"secp256r1":-1!=="|secp256k1|".indexOf(u)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(u)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(u)?"secp384r1":null},void 0!==T&&T||(k.KJUR=T={}),void 0!==T.crypto&&T.crypto||(T.crypto={}),T.crypto.ECParameterDB=new function(){var u={},a={};function c(f){return new ne(f,16)}this.getByName=function(f){var p=f;if(void 0!==a[p]&&(p=a[f]),void 0!==u[p])return u[p];throw"unregistered EC curve name: "+p},this.regist=function(f,p,v,C,P,M,x,A,V,J,H,le){u[f]={};var oe=c(v),ae=c(C),S=c(P),j=c(M),W=c(x),K=new zr(oe,ae,S),ue=K.decodePointHex("04"+A+V);u[f].name=f,u[f].keylen=p,u[f].curve=K,u[f].G=ue,u[f].n=j,u[f].h=W,u[f].oid=H,u[f].info=le;for(var fe=0;fe<J.length;fe++)a[J[fe]]=f}},T.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),T.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),T.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),T.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),T.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),T.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),T.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),T.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),T.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),T.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Ht=function(){var u=function(x,A,V){return a(ee.AES,x,A,V)},a=function(x,A,V,J){var H=ee.enc.Hex.parse(A),le=ee.enc.Hex.parse(V),oe=ee.enc.Hex.parse(J),ae={};ae.key=le,ae.iv=oe,ae.ciphertext=H;var S=x.decrypt(ae,le,{iv:oe});return ee.enc.Hex.stringify(S)},c=function(x,A,V){return f(ee.AES,x,A,V)},f=function(x,A,V,J){var H=ee.enc.Hex.parse(A),le=ee.enc.Hex.parse(V),oe=ee.enc.Hex.parse(J),ae=x.encrypt(H,le,{iv:oe}),S=ee.enc.Hex.parse(ae.toString());return ee.enc.Base64.stringify(S)},p={"AES-256-CBC":{proc:u,eproc:c,keylen:32,ivlen:16},"AES-192-CBC":{proc:u,eproc:c,keylen:24,ivlen:16},"AES-128-CBC":{proc:u,eproc:c,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(x,A,V){return a(ee.TripleDES,x,A,V)},eproc:function(x,A,V){return f(ee.TripleDES,x,A,V)},keylen:24,ivlen:8},"DES-CBC":{proc:function(x,A,V){return a(ee.DES,x,A,V)},eproc:function(x,A,V){return f(ee.DES,x,A,V)},keylen:8,ivlen:8}},v=function(x){var A={},V=x.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));V&&(A.cipher=V[1],A.ivsalt=V[2]);var J=x.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));J&&(A.type=J[1]);var H=-1,le=0;-1!=x.indexOf("\r\n\r\n")&&(H=x.indexOf("\r\n\r\n"),le=2),-1!=x.indexOf("\n\n")&&(H=x.indexOf("\n\n"),le=1);var oe=x.indexOf("-----END");if(-1!=H&&-1!=oe){var ae=x.substring(H+2*le,oe-le);ae=ae.replace(/\s+/g,""),A.data=ae}return A},C=function(x,A,V){for(var J=V.substring(0,16),H=ee.enc.Hex.parse(J),le=ee.enc.Utf8.parse(A),oe=p[x].keylen+p[x].ivlen,ae="",S=null;;){var j=ee.algo.MD5.create();if(null!=S&&j.update(S),j.update(le),j.update(H),S=j.finalize(),(ae+=ee.enc.Hex.stringify(S)).length>=2*oe)break}var W={};return W.keyhex=ae.substr(0,2*p[x].keylen),W.ivhex=ae.substr(2*p[x].keylen,2*p[x].ivlen),W},P=function(x,A,V,J){var H=ee.enc.Base64.parse(x),le=ee.enc.Hex.stringify(H);return(0,p[A].proc)(le,V,J)};return{version:"1.0.0",parsePKCS5PEM:function(x){return v(x)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(x,A,V){return C(x,A,V)},decryptKeyB64:function(x,A,V,J){return P(x,A,V,J)},getDecryptedKeyHex:function(x,A){var V=v(x),J=V.cipher,H=V.ivsalt,le=V.data,oe=C(J,A,H).keyhex;return P(le,J,oe,H)},getEncryptedPKCS5PEMFromPrvKeyHex:function(x,A,V,J,H){var S,j,le="";if(void 0!==J&&null!=J||(J="AES-256-CBC"),void 0===p[J])throw"KEYUTIL unsupported algorithm: "+J;void 0!==H&&null!=H||(H=(S=p[J].ivlen,j=ee.lib.WordArray.random(S),ee.enc.Hex.stringify(j)).toUpperCase());var oe=function(S,j,W,K){return(0,p[j].eproc)(S,W,K)}(A,J,C(J,V,H).keyhex,H);return le="-----BEGIN "+x+" PRIVATE KEY-----\r\n",le+="Proc-Type: 4,ENCRYPTED\r\n",le+="DEK-Info: "+J+","+H+"\r\n",le+="\r\n",(le+=oe.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+x+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(x){var V=De.getChildIdx,J=De.getV,H={},le=V(x,0);if(2!=le.length)throw"malformed format: SEQUENCE(0).items != 2: "+le.length;H.ciphertext=J(x,le[1]);var oe=V(x,le[0]);if(2!=oe.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+oe.length;if("2a864886f70d01050d"!=J(x,oe[0]))throw"this only supports pkcs5PBES2";var ae=V(x,oe[1]);if(2!=oe.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+ae.length;var S=V(x,ae[1]);if(2!=S.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+S.length;if("2a864886f70d0307"!=J(x,S[0]))throw"this only supports TripleDES";H.encryptionSchemeAlg="TripleDES",H.encryptionSchemeIV=J(x,S[1]);var j=V(x,ae[0]);if(2!=j.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+j.length;if("2a864886f70d01050c"!=J(x,j[0]))throw"this only supports pkcs5PBKDF2";var W=V(x,j[1]);if(W.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+W.length;H.pbkdf2Salt=J(x,W[0]);var K=J(x,W[1]);try{H.pbkdf2Iter=parseInt(K,16)}catch(ue){throw"malformed format pbkdf2Iter: "+K}return H},getPBKDF2KeyHexFromParam:function(x,A){var V=ee.enc.Hex.parse(x.pbkdf2Salt),H=ee.PBKDF2(A,V,{keySize:6,iterations:x.pbkdf2Iter});return ee.enc.Hex.stringify(H)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(x,A){var V=br(x,"ENCRYPTED PRIVATE KEY"),J=this.parseHexOfEncryptedPKCS8(V),H=Ht.getPBKDF2KeyHexFromParam(J,A),le={};le.ciphertext=ee.enc.Hex.parse(J.ciphertext);var oe=ee.enc.Hex.parse(H),ae=ee.enc.Hex.parse(J.encryptionSchemeIV),S=ee.TripleDES.decrypt(le,oe,{iv:ae});return ee.enc.Hex.stringify(S)},getKeyFromEncryptedPKCS8PEM:function(x,A){var V=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(x,A);return this.getKeyFromPlainPrivatePKCS8Hex(V)},parsePlainPrivatePKCS8Hex:function(x){var A=De,V=A.getChildIdx,J=A.getV,H={algparam:null};if("30"!=x.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var le=V(x,0);if(3!=le.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=x.substr(le[1],2))throw"malformed PKCS8 private key(code:003)";var oe=V(x,le[1]);if(2!=oe.length)throw"malformed PKCS8 private key(code:004)";if("06"!=x.substr(oe[0],2))throw"malformed PKCS8 private key(code:005)";if(H.algoid=J(x,oe[0]),"06"==x.substr(oe[1],2)&&(H.algparam=J(x,oe[1])),"04"!=x.substr(le[2],2))throw"malformed PKCS8 private key(code:006)";return H.keyidx=A.getVidx(x,le[2]),H},getKeyFromPlainPrivatePKCS8PEM:function(x){var A=br(x,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(A)},getKeyFromPlainPrivatePKCS8Hex:function(x){var A,V=this.parsePlainPrivatePKCS8Hex(x);if("2a864886f70d010101"==V.algoid)A=new je;else if("2a8648ce380401"==V.algoid)A=new T.crypto.DSA;else{if("2a8648ce3d0201"!=V.algoid)throw"unsupported private key algorithm";A=new T.crypto.ECDSA}return A.readPKCS8PrvKeyHex(x),A},_getKeyFromPublicPKCS8Hex:function(x){var A,V=De.getVbyList(x,0,[0,0],"06");if("2a864886f70d010101"===V)A=new je;else if("2a8648ce380401"===V)A=new T.crypto.DSA;else{if("2a8648ce3d0201"!==V)throw"unsupported PKCS#8 public key hex";A=new T.crypto.ECDSA}return A.readPKCS8PubKeyHex(x),A},parsePublicRawRSAKeyHex:function(x){var V=De.getChildIdx,J=De.getV,H={};if("30"!=x.substr(0,2))throw"malformed RSA key(code:001)";var le=V(x,0);if(2!=le.length)throw"malformed RSA key(code:002)";if("02"!=x.substr(le[0],2))throw"malformed RSA key(code:003)";if(H.n=J(x,le[0]),"02"!=x.substr(le[1],2))throw"malformed RSA key(code:004)";return H.e=J(x,le[1]),H},parsePublicPKCS8Hex:function(x){var A=De,V=A.getChildIdx,J=A.getV,H={algparam:null},le=V(x,0);if(2!=le.length)throw"outer DERSequence shall have 2 elements: "+le.length;var oe=le[0];if("30"!=x.substr(oe,2))throw"malformed PKCS8 public key(code:001)";var ae=V(x,oe);if(2!=ae.length)throw"malformed PKCS8 public key(code:002)";if("06"!=x.substr(ae[0],2))throw"malformed PKCS8 public key(code:003)";if(H.algoid=J(x,ae[0]),"06"==x.substr(ae[1],2)?H.algparam=J(x,ae[1]):"30"==x.substr(ae[1],2)&&(H.algparam={},H.algparam.p=A.getVbyList(x,ae[1],[0],"02"),H.algparam.q=A.getVbyList(x,ae[1],[1],"02"),H.algparam.g=A.getVbyList(x,ae[1],[2],"02")),"03"!=x.substr(le[1],2))throw"malformed PKCS8 public key(code:004)";return H.key=J(x,le[1]).substr(2),H}}}();Ht.getKey=function(u,a,c){var Ct,f=(ae=De).getChildIdx,p=ae.getVbyList,v=T.crypto,C=v.ECDSA,P=v.DSA,M=je,x=br,A=Ht;if(void 0!==M&&u instanceof M||void 0!==C&&u instanceof C||void 0!==P&&u instanceof P)return u;if(void 0!==u.curve&&void 0!==u.xy&&void 0===u.d)return new C({pub:u.xy,curve:u.curve});if(void 0!==u.curve&&void 0!==u.d)return new C({prv:u.d,curve:u.curve});if(void 0===u.kty&&void 0!==u.n&&void 0!==u.e&&void 0===u.d)return(Ve=new M).setPublic(u.n,u.e),Ve;if(void 0===u.kty&&void 0!==u.n&&void 0!==u.e&&void 0!==u.d&&void 0!==u.p&&void 0!==u.q&&void 0!==u.dp&&void 0!==u.dq&&void 0!==u.co&&void 0===u.qi)return(Ve=new M).setPrivateEx(u.n,u.e,u.d,u.p,u.q,u.dp,u.dq,u.co),Ve;if(void 0===u.kty&&void 0!==u.n&&void 0!==u.e&&void 0!==u.d&&void 0===u.p)return(Ve=new M).setPrivate(u.n,u.e,u.d),Ve;if(void 0!==u.p&&void 0!==u.q&&void 0!==u.g&&void 0!==u.y&&void 0===u.x)return(Ve=new P).setPublic(u.p,u.q,u.g,u.y),Ve;if(void 0!==u.p&&void 0!==u.q&&void 0!==u.g&&void 0!==u.y&&void 0!==u.x)return(Ve=new P).setPrivate(u.p,u.q,u.g,u.y,u.x),Ve;if("RSA"===u.kty&&void 0!==u.n&&void 0!==u.e&&void 0===u.d)return(Ve=new M).setPublic(_t(u.n),_t(u.e)),Ve;if("RSA"===u.kty&&void 0!==u.n&&void 0!==u.e&&void 0!==u.d&&void 0!==u.p&&void 0!==u.q&&void 0!==u.dp&&void 0!==u.dq&&void 0!==u.qi)return(Ve=new M).setPrivateEx(_t(u.n),_t(u.e),_t(u.d),_t(u.p),_t(u.q),_t(u.dp),_t(u.dq),_t(u.qi)),Ve;if("RSA"===u.kty&&void 0!==u.n&&void 0!==u.e&&void 0!==u.d)return(Ve=new M).setPrivate(_t(u.n),_t(u.e),_t(u.d)),Ve;if("EC"===u.kty&&void 0!==u.crv&&void 0!==u.x&&void 0!==u.y&&void 0===u.d){var V=(xe=new C({curve:u.crv})).ecparams.keylen/4,J="04"+("0000000000"+_t(u.x)).slice(-V)+("0000000000"+_t(u.y)).slice(-V);return xe.setPublicKeyHex(J),xe}if("EC"===u.kty&&void 0!==u.crv&&void 0!==u.x&&void 0!==u.y&&void 0!==u.d){V=(xe=new C({curve:u.crv})).ecparams.keylen/4,J="04"+("0000000000"+_t(u.x)).slice(-V)+("0000000000"+_t(u.y)).slice(-V);var H=("0000000000"+_t(u.d)).slice(-V);return xe.setPublicKeyHex(J),xe.setPrivateKeyHex(H),xe}if("pkcs5prv"===c){var le,oe=u,ae=De;if(9===(le=f(oe,0)).length)(Ve=new M).readPKCS5PrvKeyHex(oe);else if(6===le.length)(Ve=new P).readPKCS5PrvKeyHex(oe);else{if(!(le.length>2&&"04"===oe.substr(le[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(Ve=new C).readPKCS5PrvKeyHex(oe)}return Ve}if("pkcs8prv"===c)return A.getKeyFromPlainPrivatePKCS8Hex(u);if("pkcs8pub"===c)return A._getKeyFromPublicPKCS8Hex(u);if("x509pub"===c)return $t.getPublicKeyFromCertHex(u);if(-1!=u.indexOf("-END CERTIFICATE-",0)||-1!=u.indexOf("-END X509 CERTIFICATE-",0)||-1!=u.indexOf("-END TRUSTED CERTIFICATE-",0))return $t.getPublicKeyFromCertPEM(u);if(-1!=u.indexOf("-END PUBLIC KEY-")){var S=br(u,"PUBLIC KEY");return A._getKeyFromPublicPKCS8Hex(S)}if(-1!=u.indexOf("-END RSA PRIVATE KEY-")&&-1==u.indexOf("4,ENCRYPTED")){var j=x(u,"RSA PRIVATE KEY");return A.getKey(j,null,"pkcs5prv")}if(-1!=u.indexOf("-END DSA PRIVATE KEY-")&&-1==u.indexOf("4,ENCRYPTED")){var W=p(Ct=x(u,"DSA PRIVATE KEY"),0,[1],"02"),K=p(Ct,0,[2],"02"),ue=p(Ct,0,[3],"02"),fe=p(Ct,0,[4],"02"),Ie=p(Ct,0,[5],"02");return(Ve=new P).setPrivate(new ne(W,16),new ne(K,16),new ne(ue,16),new ne(fe,16),new ne(Ie,16)),Ve}if(-1!=u.indexOf("-END EC PRIVATE KEY-")&&-1==u.indexOf("4,ENCRYPTED"))return j=x(u,"EC PRIVATE KEY"),A.getKey(j,null,"pkcs5prv");if(-1!=u.indexOf("-END PRIVATE KEY-"))return A.getKeyFromPlainPrivatePKCS8PEM(u);if(-1!=u.indexOf("-END RSA PRIVATE KEY-")&&-1!=u.indexOf("4,ENCRYPTED")){var be=A.getDecryptedKeyHex(u,a),ze=new je;return ze.readPKCS5PrvKeyHex(be),ze}if(-1!=u.indexOf("-END EC PRIVATE KEY-")&&-1!=u.indexOf("4,ENCRYPTED")){var xe,Ve=p(Ct=A.getDecryptedKeyHex(u,a),0,[1],"04"),Et=p(Ct,0,[2,0],"06"),Mt=p(Ct,0,[3,0],"03").substr(2);if(void 0===T.crypto.OID.oidhex2name[Et])throw"undefined OID(hex) in KJUR.crypto.OID: "+Et;return(xe=new C({curve:T.crypto.OID.oidhex2name[Et]})).setPublicKeyHex(Mt),xe.setPrivateKeyHex(Ve),xe.isPublic=!1,xe}if(-1!=u.indexOf("-END DSA PRIVATE KEY-")&&-1!=u.indexOf("4,ENCRYPTED"))return W=p(Ct=A.getDecryptedKeyHex(u,a),0,[1],"02"),K=p(Ct,0,[2],"02"),ue=p(Ct,0,[3],"02"),fe=p(Ct,0,[4],"02"),Ie=p(Ct,0,[5],"02"),(Ve=new P).setPrivate(new ne(W,16),new ne(K,16),new ne(ue,16),new ne(fe,16),new ne(Ie,16)),Ve;if(-1!=u.indexOf("-END ENCRYPTED PRIVATE KEY-"))return A.getKeyFromEncryptedPKCS8PEM(u,a);throw new Error("not supported argument")},Ht.generateKeypair=function(u,a){if("RSA"==u){var c=a;(C=new je).generate(c,"10001"),C.isPrivate=!0,C.isPublic=!0;var f=new je,p=C.n.toString(16),v=C.e.toString(16);return f.setPublic(p,v),f.isPrivate=!1,f.isPublic=!0,(P={}).prvKeyObj=C,P.pubKeyObj=f,P}if("EC"==u){var C,P,M=a,x=new T.crypto.ECDSA({curve:M}).generateKeyPairHex();return(C=new T.crypto.ECDSA({curve:M})).setPublicKeyHex(x.ecpubhex),C.setPrivateKeyHex(x.ecprvhex),C.isPrivate=!0,C.isPublic=!1,(f=new T.crypto.ECDSA({curve:M})).setPublicKeyHex(x.ecpubhex),f.isPrivate=!1,f.isPublic=!0,(P={}).prvKeyObj=C,P.pubKeyObj=f,P}throw"unknown algorithm: "+u},Ht.getPEM=function(u,a,c,f,p,v){var P=T.asn1,M=P.DERObjectIdentifier,x=P.DERInteger,A=P.ASN1Util.newObject,J=T.crypto,H=J.DSA,le=J.ECDSA,oe=je;function ae(xe){return A({seq:[{int:0},{int:{bigint:xe.n}},{int:xe.e},{int:{bigint:xe.d}},{int:{bigint:xe.p}},{int:{bigint:xe.q}},{int:{bigint:xe.dmp1}},{int:{bigint:xe.dmq1}},{int:{bigint:xe.coeff}}]})}function S(xe){return A({seq:[{int:1},{octstr:{hex:xe.prvKeyHex}},{tag:["a0",!0,{oid:{name:xe.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+xe.pubKeyHex}}]}]})}function j(xe){return A({seq:[{int:0},{int:{bigint:xe.p}},{int:{bigint:xe.q}},{int:{bigint:xe.g}},{int:{bigint:xe.y}},{int:{bigint:xe.x}}]})}if((void 0!==oe&&u instanceof oe||void 0!==H&&u instanceof H||void 0!==le&&u instanceof le)&&1==u.isPublic&&(void 0===a||"PKCS8PUB"==a))return An(fe=new(0,P.x509.SubjectPublicKeyInfo)(u).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==a&&void 0!==oe&&u instanceof oe&&(void 0===c||null==c)&&1==u.isPrivate)return An(fe=ae(u).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==a&&void 0!==le&&u instanceof le&&(void 0===c||null==c)&&1==u.isPrivate){var W=new M({name:u.curveName}).getEncodedHex(),K=S(u).getEncodedHex(),ue="";return(ue+=An(W,"EC PARAMETERS"))+An(K,"EC PRIVATE KEY")}if("PKCS1PRV"==a&&void 0!==H&&u instanceof H&&(void 0===c||null==c)&&1==u.isPrivate)return An(fe=j(u).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==a&&void 0!==oe&&u instanceof oe&&void 0!==c&&null!=c&&1==u.isPrivate){var fe=ae(u).getEncodedHex();return void 0===f&&(f="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",fe,c,f,v)}if("PKCS5PRV"==a&&void 0!==le&&u instanceof le&&void 0!==c&&null!=c&&1==u.isPrivate)return fe=S(u).getEncodedHex(),void 0===f&&(f="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",fe,c,f,v);if("PKCS5PRV"==a&&void 0!==H&&u instanceof H&&void 0!==c&&null!=c&&1==u.isPrivate)return fe=j(u).getEncodedHex(),void 0===f&&(f="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",fe,c,f,v);var Ie=function(Ve,Et){var Mt=be(Ve,Et);return new A({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Mt.pbkdf2Salt}},{int:Mt.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Mt.encryptionSchemeIV}}]}]}]},{octstr:{hex:Mt.ciphertext}}]}).getEncodedHex()},be=function(Ve,Et){var Mt=ee.lib.WordArray.random(8),Ct=ee.lib.WordArray.random(8),jn=ee.PBKDF2(Et,Mt,{keySize:6,iterations:100}),pn=ee.enc.Hex.parse(Ve),xn=ee.TripleDES.encrypt(pn,jn,{iv:Ct})+"",ct={};return ct.ciphertext=xn,ct.pbkdf2Salt=ee.enc.Hex.stringify(Mt),ct.pbkdf2Iter=100,ct.encryptionSchemeAlg="DES-EDE3-CBC",ct.encryptionSchemeIV=ee.enc.Hex.stringify(Ct),ct};if("PKCS8PRV"==a&&null!=oe&&u instanceof oe&&1==u.isPrivate){var ze=ae(u).getEncodedHex();return fe=A({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:ze}}]}).getEncodedHex(),void 0===c||null==c?An(fe,"PRIVATE KEY"):An(K=Ie(fe,c),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==a&&void 0!==le&&u instanceof le&&1==u.isPrivate)return ze=new A({seq:[{int:1},{octstr:{hex:u.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+u.pubKeyHex}}]}]}).getEncodedHex(),fe=A({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:u.curveName}}]},{octstr:{hex:ze}}]}).getEncodedHex(),void 0===c||null==c?An(fe,"PRIVATE KEY"):An(K=Ie(fe,c),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==a&&void 0!==H&&u instanceof H&&1==u.isPrivate)return ze=new x({bigint:u.x}).getEncodedHex(),fe=A({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:u.p}},{int:{bigint:u.q}},{int:{bigint:u.g}}]}]},{octstr:{hex:ze}}]}).getEncodedHex(),void 0===c||null==c?An(fe,"PRIVATE KEY"):An(K=Ie(fe,c),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ht.getKeyFromCSRPEM=function(u){var a=br(u,"CERTIFICATE REQUEST");return Ht.getKeyFromCSRHex(a)},Ht.getKeyFromCSRHex=function(u){var a=Ht.parseCSRHex(u);return Ht.getKey(a.p8pubkeyhex,null,"pkcs8pub")},Ht.parseCSRHex=function(u){var c=De.getChildIdx,f=De.getTLV,p={},v=u;if("30"!=v.substr(0,2))throw"malformed CSR(code:001)";var C=c(v,0);if(C.length<1)throw"malformed CSR(code:002)";if("30"!=v.substr(C[0],2))throw"malformed CSR(code:003)";var P=c(v,C[0]);if(P.length<3)throw"malformed CSR(code:004)";return p.p8pubkeyhex=f(v,P[2]),p},Ht.getKeyID=function(u){var a=Ht,c=De;"string"==typeof u&&-1!=u.indexOf("BEGIN ")&&(u=a.getKey(u));var f=br(a.getPEM(u)),p=c.getIdxbyList(f,0,[1]),v=c.getV(f,p).substring(2);return T.crypto.Util.hashHex(v,"sha1")},Ht.getJWKFromKey=function(u){var a={};if(u instanceof je&&u.isPrivate)return a.kty="RSA",a.n=Ut(u.n.toString(16)),a.e=Ut(u.e.toString(16)),a.d=Ut(u.d.toString(16)),a.p=Ut(u.p.toString(16)),a.q=Ut(u.q.toString(16)),a.dp=Ut(u.dmp1.toString(16)),a.dq=Ut(u.dmq1.toString(16)),a.qi=Ut(u.coeff.toString(16)),a;if(u instanceof je&&u.isPublic)return a.kty="RSA",a.n=Ut(u.n.toString(16)),a.e=Ut(u.e.toString(16)),a;if(u instanceof T.crypto.ECDSA&&u.isPrivate){if("P-256"!==(f=u.getShortNISTPCurveName())&&"P-384"!==f)throw"unsupported curve name for JWT: "+f;var c=u.getPublicKeyXYHex();return a.kty="EC",a.crv=f,a.x=Ut(c.x),a.y=Ut(c.y),a.d=Ut(u.prvKeyHex),a}if(u instanceof T.crypto.ECDSA&&u.isPublic){var f;if("P-256"!==(f=u.getShortNISTPCurveName())&&"P-384"!==f)throw"unsupported curve name for JWT: "+f;return c=u.getPublicKeyXYHex(),a.kty="EC",a.crv=f,a.x=Ut(c.x),a.y=Ut(c.y),a}throw"not supported key object"},je.getPosArrayOfChildrenFromHex=function(u){return De.getChildIdx(u,0)},je.getHexValueArrayOfChildrenFromHex=function(u){var a,c=De.getV,f=c(u,(a=je.getPosArrayOfChildrenFromHex(u))[0]),p=c(u,a[1]),v=c(u,a[2]),C=c(u,a[3]),P=c(u,a[4]),M=c(u,a[5]),x=c(u,a[6]),A=c(u,a[7]),V=c(u,a[8]);return(a=new Array).push(f,p,v,C,P,M,x,A,V),a},je.prototype.readPrivateKeyFromPEMString=function(u){var a=br(u),c=je.getHexValueArrayOfChildrenFromHex(a);this.setPrivateEx(c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8])},je.prototype.readPKCS5PrvKeyHex=function(u){var a=je.getHexValueArrayOfChildrenFromHex(u);this.setPrivateEx(a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},je.prototype.readPKCS8PrvKeyHex=function(u){var a,c,f,p,v,C,P,M,A=De.getVbyListEx;if(!1===De.isASN1HEX(u))throw new Error("not ASN.1 hex string");try{a=A(u,0,[2,0,1],"02"),c=A(u,0,[2,0,2],"02"),f=A(u,0,[2,0,3],"02"),p=A(u,0,[2,0,4],"02"),v=A(u,0,[2,0,5],"02"),C=A(u,0,[2,0,6],"02"),P=A(u,0,[2,0,7],"02"),M=A(u,0,[2,0,8],"02")}catch(V){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(a,c,f,p,v,C,P,M)},je.prototype.readPKCS5PubKeyHex=function(u){var a=De,c=a.getV;if(!1===a.isASN1HEX(u))throw new Error("keyHex is not ASN.1 hex string");var f=a.getChildIdx(u,0);if(2!==f.length||"02"!==u.substr(f[0],2)||"02"!==u.substr(f[1],2))throw new Error("wrong hex for PKCS#5 public key");var p=c(u,f[0]),v=c(u,f[1]);this.setPublic(p,v)},je.prototype.readPKCS8PubKeyHex=function(u){var a=De;if(!1===a.isASN1HEX(u))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==a.getTLVbyListEx(u,0,[0,0]))throw new Error("not PKCS8 RSA public key");var c=a.getTLVbyListEx(u,0,[1,0]);this.readPKCS5PubKeyHex(c)},je.prototype.readCertPubKeyHex=function(u,a){var c,f;(c=new $t).readCertHex(u),f=c.getPublicKeyHex(),this.readPKCS8PubKeyHex(f)};var ic=new RegExp("[^0-9a-f]","gi");function xo(u,a){for(var c="",f=a/4-u.length,p=0;p<f;p++)c+="0";return c+u}function ks(u,a,c){for(var f="",p=0;f.length<a;)f+=Fn(c(ar(u+String.fromCharCode.apply(String,[(4278190080&p)>>24,(16711680&p)>>16,(65280&p)>>8,255&p])))),p+=1;return f}function Ri(u){for(var a in T.crypto.Util.DIGESTINFOHEAD){var c=T.crypto.Util.DIGESTINFOHEAD[a],f=c.length;if(u.substring(0,f)==c)return[a,u.substring(f)]}return[]}function $t(u){var a,c=De,f=c.getChildIdx,p=c.getV,v=c.getTLV,C=c.getVbyList,P=c.getVbyListEx,M=c.getTLVbyList,x=c.getTLVbyListEx,A=c.getIdxbyList,V=c.getIdxbyListEx,J=c.getVidx,H=c.oidname,le=c.hextooidstr,oe=$t,ae=br;try{a=T.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(S){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==M(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return P(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var S=x(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(S)},this.getAlgorithmIdentifierName=function(S){for(var j in a)if(S===a[j])return j;return H(P(S,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return M(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return oe.hex2dn(this.getIssuerHex())},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return M(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return oe.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var S=C(this.hex,0,[0,4+this.foffset,0]);return S=S.replace(/(..)/g,"%$1"),decodeURIComponent(S)},this.getNotAfter=function(){var S=C(this.hex,0,[0,4+this.foffset,1]);return S=S.replace(/(..)/g,"%$1"),decodeURIComponent(S)},this.getPublicKeyHex=function(){return c.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return A(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var S=this.getPublicKeyIdx();return A(this.hex,S,[1,0],"30")},this.getPublicKey=function(){return Ht.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var S=M(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(S)},this.getSignatureValueHex=function(){return C(this.hex,0,[2],"03",!0)},this.verifySignature=function(S){var j=this.getSignatureAlgorithmField(),W=this.getSignatureValueHex(),K=M(this.hex,0,[0],"30"),ue=new T.crypto.Signature({alg:j});return ue.init(S),ue.updateHex(K),ue.verify(W)},this.parseExt=function(S){var j,W,K;if(void 0===S){if(3!==this.version)return-1;j=A(K=this.hex,0,[0,7,0],"30"),W=f(K,j)}else{K=br(S);var ue=A(K,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=p(K,ue))return void(this.aExtInfo=new Array);j=A(K,0,[0,3,0,1,0],"30"),W=f(K,j),this.hex=K}this.aExtInfo=new Array;for(var fe=0;fe<W.length;fe++){var Ie={critical:!1},be=0;3===f(K,W[fe]).length&&(Ie.critical=!0,be=1),Ie.oid=c.hextooidstr(C(K,W[fe],[0],"06"));var ze=A(K,W[fe],[1+be]);Ie.vidx=J(K,ze),this.aExtInfo.push(Ie)}},this.getExtInfo=function(S){var j=this.aExtInfo,W=S;if(S.match(/^[0-9.]+$/)||(W=T.asn1.x509.OID.name2oid(S)),""!==W)for(var K=0;K<j.length;K++)if(j[K].oid===W)return j[K]},this.getExtBasicConstraints=function(S,j){if(void 0===S&&void 0===j){var W=this.getExtInfo("basicConstraints");if(void 0===W)return;S=v(this.hex,W.vidx),j=W.critical}var K={extname:"basicConstraints"};if(j&&(K.critical=!0),"3000"===S)return K;if("30030101ff"===S)return K.cA=!0,K;if("30060101ff02"===S.substr(0,12)){var ue=p(S,10),fe=parseInt(ue,16);return K.cA=!0,K.pathLen=fe,K}throw new Error("hExtV parse error: "+S)},this.getExtKeyUsage=function(S,j){if(void 0===S&&void 0===j){var W=this.getExtInfo("keyUsage");if(void 0===W)return;S=v(this.hex,W.vidx),j=W.critical}var K={extname:"keyUsage"};return j&&(K.critical=!0),K.names=this.getExtKeyUsageString(S).split(","),K},this.getExtKeyUsageBin=function(S){if(void 0===S){var j=this.getExtInfo("keyUsage");if(void 0===j)return"";S=v(this.hex,j.vidx)}if(8!=S.length&&10!=S.length)throw new Error("malformed key usage value: "+S);var W="000000000000000"+parseInt(S.substr(6),16).toString(2);return 8==S.length&&(W=W.slice(-8)),10==S.length&&(W=W.slice(-16)),""==(W=W.replace(/0+$/,""))&&(W="0"),W},this.getExtKeyUsageString=function(S){for(var j=this.getExtKeyUsageBin(S),W=new Array,K=0;K<j.length;K++)"1"==j.substr(K,1)&&W.push($t.KEYUSAGE_NAME[K]);return W.join(",")},this.getExtSubjectKeyIdentifier=function(S,j){if(void 0===S&&void 0===j){var W=this.getExtInfo("subjectKeyIdentifier");if(void 0===W)return;S=v(this.hex,W.vidx),j=W.critical}var K={extname:"subjectKeyIdentifier"};j&&(K.critical=!0);var ue=p(S,0);return K.kid={hex:ue},K},this.getExtAuthorityKeyIdentifier=function(S,j){if(void 0===S&&void 0===j){var W=this.getExtInfo("authorityKeyIdentifier");if(void 0===W)return;S=v(this.hex,W.vidx),j=W.critical}var K={extname:"authorityKeyIdentifier"};j&&(K.critical=!0);for(var ue=f(S,0),fe=0;fe<ue.length;fe++){var Ie=S.substr(ue[fe],2);if("80"===Ie&&(K.kid={hex:p(S,ue[fe])}),"a1"===Ie){var be=v(S,ue[fe]),ze=this.getGeneralNames(be);K.issuer=ze[0].dn}"82"===Ie&&(K.sn={hex:p(S,ue[fe])})}return K},this.getExtExtKeyUsage=function(S,j){if(void 0===S&&void 0===j){var W=this.getExtInfo("extKeyUsage");if(void 0===W)return;S=v(this.hex,W.vidx),j=W.critical}var K={extname:"extKeyUsage",array:[]};j&&(K.critical=!0);for(var ue=f(S,0),fe=0;fe<ue.length;fe++)K.array.push(H(p(S,ue[fe])));return K},this.getExtExtKeyUsageName=function(){var S=this.getExtInfo("extKeyUsage");if(void 0===S)return S;var j=new Array,W=v(this.hex,S.vidx);if(""===W)return j;for(var K=f(W,0),ue=0;ue<K.length;ue++)j.push(H(p(W,K[ue])));return j},this.getExtSubjectAltName=function(S,j){if(void 0===S&&void 0===j){var W=this.getExtInfo("subjectAltName");if(void 0===W)return;S=v(this.hex,W.vidx),j=W.critical}var K={extname:"subjectAltName",array:[]};return j&&(K.critical=!0),K.array=this.getGeneralNames(S),K},this.getExtIssuerAltName=function(S,j){if(void 0===S&&void 0===j){var W=this.getExtInfo("issuerAltName");if(void 0===W)return;S=v(this.hex,W.vidx),j=W.critical}var K={extname:"issuerAltName",array:[]};return j&&(K.critical=!0),K.array=this.getGeneralNames(S),K},this.getGeneralNames=function(S){for(var j=f(S,0),W=[],K=0;K<j.length;K++){var ue=this.getGeneralName(v(S,j[K]));void 0!==ue&&W.push(ue)}return W},this.getGeneralName=function(S){var j=S.substr(0,2),W=p(S,0),K=Fn(W);return"81"==j?{rfc822:K}:"82"==j?{dns:K}:"86"==j?{uri:K}:"87"==j?{ip:Ps(W)}:"a4"==j?{dn:this.getX500Name(W)}:void 0},this.getExtSubjectAltName2=function(){var S,j,W,K=this.getExtInfo("subjectAltName");if(void 0===K)return K;for(var ue=new Array,fe=v(this.hex,K.vidx),Ie=f(fe,0),be=0;be<Ie.length;be++)W=fe.substr(Ie[be],2),S=p(fe,Ie[be]),"81"===W&&(j=an(S),ue.push(["MAIL",j])),"82"===W&&(j=an(S),ue.push(["DNS",j])),"84"===W&&(j=$t.hex2dn(S,0),ue.push(["DN",j])),"86"===W&&(j=an(S),ue.push(["URI",j])),"87"===W&&(j=Ps(S),ue.push(["IP",j]));return ue},this.getExtCRLDistributionPoints=function(S,j){if(void 0===S&&void 0===j){var W=this.getExtInfo("cRLDistributionPoints");if(void 0===W)return;S=v(this.hex,W.vidx),j=W.critical}var K={extname:"cRLDistributionPoints",array:[]};j&&(K.critical=!0);for(var ue=f(S,0),fe=0;fe<ue.length;fe++){var Ie=v(S,ue[fe]);K.array.push(this.getDistributionPoint(Ie))}return K},this.getDistributionPoint=function(S){for(var j={},W=f(S,0),K=0;K<W.length;K++){var ue=S.substr(W[K],2),fe=v(S,W[K]);"a0"==ue&&(j.dpname=this.getDistributionPointName(fe))}return j},this.getDistributionPointName=function(S){for(var j={},W=f(S,0),K=0;K<W.length;K++){var ue=S.substr(W[K],2),fe=v(S,W[K]);"a0"==ue&&(j.full=this.getGeneralNames(fe))}return j},this.getExtCRLDistributionPointsURI=function(){var S=this.getExtInfo("cRLDistributionPoints");if(void 0===S)return S;for(var j=new Array,W=f(this.hex,S.vidx),K=0;K<W.length;K++)try{var ue=an(C(this.hex,W[K],[0,0,0],"86"));j.push(ue)}catch(fe){}return j},this.getExtAIAInfo=function(){var S=this.getExtInfo("authorityInfoAccess");if(void 0===S)return S;for(var j={ocsp:[],caissuer:[]},W=f(this.hex,S.vidx),K=0;K<W.length;K++){var ue=C(this.hex,W[K],[0],"06"),fe=C(this.hex,W[K],[1],"86");"2b06010505073001"===ue&&j.ocsp.push(an(fe)),"2b06010505073002"===ue&&j.caissuer.push(an(fe))}return j},this.getExtAuthorityInfoAccess=function(S,j){if(void 0===S&&void 0===j){var W=this.getExtInfo("authorityInfoAccess");if(void 0===W)return;S=v(this.hex,W.vidx),j=W.critical}var K={extname:"authorityInfoAccess",array:[]};j&&(K.critical=!0);for(var ue=f(S,0),fe=0;fe<ue.length;fe++){var Ie=P(S,ue[fe],[0],"06"),be=an(C(S,ue[fe],[1],"86"));if("2b06010505073001"==Ie)K.array.push({ocsp:be});else{if("2b06010505073002"!=Ie)throw new Error("unknown method: "+Ie);K.array.push({caissuer:be})}}return K},this.getExtCertificatePolicies=function(S,j){if(void 0===S&&void 0===j){var W=this.getExtInfo("certificatePolicies");if(void 0===W)return;S=v(this.hex,W.vidx),j=W.critical}var K={extname:"certificatePolicies",array:[]};j&&(K.critical=!0);for(var ue=f(S,0),fe=0;fe<ue.length;fe++){var Ie=v(S,ue[fe]),be=this.getPolicyInformation(Ie);K.array.push(be)}return K},this.getPolicyInformation=function(S){var j={},W=C(S,0,[0],"06");j.policyoid=H(W);var K=V(S,0,[1],"30");if(-1!=K){j.array=[];for(var ue=f(S,K),fe=0;fe<ue.length;fe++){var Ie=v(S,ue[fe]),be=this.getPolicyQualifierInfo(Ie);j.array.push(be)}}return j},this.getPolicyQualifierInfo=function(S){var j={},W=C(S,0,[0],"06");if("2b06010505070201"===W){var K=P(S,0,[1],"16");j.cps=Fn(K)}else if("2b06010505070202"===W){var ue=M(S,0,[1],"30");j.unotice=this.getUserNotice(ue)}return j},this.getUserNotice=function(S){for(var j={},W=f(S,0),K=0;K<W.length;K++){var ue=v(S,W[K]);"30"!=ue.substr(0,2)&&(j.exptext=this.getDisplayText(ue))}return j},this.getDisplayText=function(S){var j={};return j.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[S.substr(0,2)],j.str=Fn(p(S,0)),j},this.getExtCRLNumber=function(S,j){var W={extname:"cRLNumber"};if(j&&(W.critical=!0),"02"==S.substr(0,2))return W.num={hex:p(S,0)},W;throw new Error("hExtV parse error: "+S)},this.getExtCRLReason=function(S,j){var W={extname:"cRLReason"};if(j&&(W.critical=!0),"0a"==S.substr(0,2))return W.code=parseInt(p(S,0),16),W;throw new Error("hExtV parse error: "+S)},this.getExtOcspNonce=function(S,j){var W={extname:"ocspNonce"};j&&(W.critical=!0);var K=p(S,0);return W.hex=K,W},this.getExtOcspNoCheck=function(S,j){var W={extname:"ocspNoCheck"};return j&&(W.critical=!0),W},this.getExtAdobeTimeStamp=function(S,j){if(void 0===S&&void 0===j){var W=this.getExtInfo("adobeTimeStamp");if(void 0===W)return;S=v(this.hex,W.vidx),j=W.critical}var K={extname:"adobeTimeStamp"};j&&(K.critical=!0);var ue=f(S,0);if(ue.length>1){var fe=v(S,ue[1]),Ie=this.getGeneralName(fe);null!=Ie.uri&&(K.uri=Ie.uri)}if(ue.length>2){var be=v(S,ue[2]);"0101ff"==be&&(K.reqauth=!0),"010100"==be&&(K.reqauth=!1)}return K},this.getX500NameRule=function(S){for(var j=null,W=[],K=0;K<S.length;K++)for(var ue=S[K],fe=0;fe<ue.length;fe++)W.push(ue[fe]);for(K=0;K<W.length;K++){var Ie=W[K],be=Ie.ds,xe=Ie.type;if("prn"!=be&&"utf8"!=be&&"ia5"!=be)return"mixed";if("ia5"==be){if("CN"!=xe)return"mixed";if(T.lang.String.isMail(Ie.value))continue;return"mixed"}if("C"==xe){if("prn"==be)continue;return"mixed"}if(null==j)j=be;else if(j!==be)return"mixed"}return null==j?"prn":j},this.getX500Name=function(S){var j=this.getX500NameArray(S);return{array:j,str:this.dnarraytostr(j)}},this.getX500NameArray=function(S){for(var j=[],W=f(S,0),K=0;K<W.length;K++)j.push(this.getRDN(v(S,W[K])));return j},this.getRDN=function(S){for(var j=[],W=f(S,0),K=0;K<W.length;K++)j.push(this.getAttrTypeAndValue(v(S,W[K])));return j},this.getAttrTypeAndValue=function(S){var j={type:null,value:null,ds:null},W=f(S,0),K=C(S,W[0],[],"06"),ue=C(S,W[1],[]),fe=T.asn1.ASN1Util.oidHexToInt(K);return j.type=T.asn1.x509.OID.oid2atype(fe),j.value=Fn(ue),j.ds=this.HEX2STAG[S.substr(W[1],2)],j},this.readCertPEM=function(S){this.readCertHex(ae(S))},this.readCertHex=function(S){this.hex=S,this.getVersion();try{A(this.hex,0,[0,7],"a3"),this.parseExt()}catch(j){}},this.getParam=function(){var S={};return S.version=this.getVersion(),S.serial={hex:this.getSerialNumberHex()},S.sigalg=this.getSignatureAlgorithmField(),S.issuer=this.getIssuer(),S.notbefore=this.getNotBefore(),S.notafter=this.getNotAfter(),S.subject=this.getSubject(),S.sbjpubkey=An(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(S.ext=this.getExtParamArray()),S.sighex=this.getSignatureValueHex(),S},this.getExtParamArray=function(S){null==S&&-1!=V(this.hex,0,[0,"[3]"])&&(S=x(this.hex,0,[0,"[3]",0],"30"));for(var j=[],W=f(S,0),K=0;K<W.length;K++){var ue=v(S,W[K]),fe=this.getExtParam(ue);null!=fe&&j.push(fe)}return j},this.getExtParam=function(S){var j=f(S,0).length;if(2!=j&&3!=j)throw new Error("wrong number elements in Extension: "+j+" "+S);var W=le(C(S,0,[0],"06")),K=!1;3==j&&"0101ff"==M(S,0,[1])&&(K=!0);var ue=M(S,0,[j-1,0]),fe=void 0;if("2.5.29.14"==W?fe=this.getExtSubjectKeyIdentifier(ue,K):"2.5.29.15"==W?fe=this.getExtKeyUsage(ue,K):"2.5.29.17"==W?fe=this.getExtSubjectAltName(ue,K):"2.5.29.18"==W?fe=this.getExtIssuerAltName(ue,K):"2.5.29.19"==W?fe=this.getExtBasicConstraints(ue,K):"2.5.29.31"==W?fe=this.getExtCRLDistributionPoints(ue,K):"2.5.29.32"==W?fe=this.getExtCertificatePolicies(ue,K):"2.5.29.35"==W?fe=this.getExtAuthorityKeyIdentifier(ue,K):"2.5.29.37"==W?fe=this.getExtExtKeyUsage(ue,K):"1.3.6.1.5.5.7.1.1"==W?fe=this.getExtAuthorityInfoAccess(ue,K):"2.5.29.20"==W?fe=this.getExtCRLNumber(ue,K):"2.5.29.21"==W?fe=this.getExtCRLReason(ue,K):"1.3.6.1.5.5.7.48.1.2"==W?fe=this.getExtOcspNonce(ue,K):"1.3.6.1.5.5.7.48.1.5"==W?fe=this.getExtOcspNoCheck(ue,K):"1.2.840.113583.1.1.9.1"==W&&(fe=this.getExtAdobeTimeStamp(ue,K)),null!=fe)return fe;var Ie={extname:W,extn:ue};return K&&(Ie.critical=!0),Ie},this.findExt=function(S,j){for(var W=0;W<S.length;W++)if(S[W].extname==j)return S[W];return null},this.updateExtCDPFullURI=function(S,j){var W=this.findExt(S,"cRLDistributionPoints");if(null!=W&&null!=W.array)for(var K=W.array,ue=0;ue<K.length;ue++)if(null!=K[ue].dpname&&null!=K[ue].dpname.full)for(var fe=K[ue].dpname.full,Ie=0;Ie<fe.length;Ie++){var be=fe[ue];null!=be.uri&&(be.uri=j)}},this.updateExtAIAOCSP=function(S,j){var W=this.findExt(S,"authorityInfoAccess");if(null!=W&&null!=W.array)for(var K=W.array,ue=0;ue<K.length;ue++)null!=K[ue].ocsp&&(K[ue].ocsp=j)},this.updateExtAIACAIssuer=function(S,j){var W=this.findExt(S,"authorityInfoAccess");if(null!=W&&null!=W.array)for(var K=W.array,ue=0;ue<K.length;ue++)null!=K[ue].caissuer&&(K[ue].caissuer=j)},this.dnarraytostr=function(S){return"/"+S.map(function(j){return j.map(function(ue){return(Ie=ue).type+"="+Ie.value;var Ie}).join("+")}).join("/")},this.getInfo=function(){var S,j,W,jn,ue=function(jn){for(var pn="",xn=jn.array,ct=0;ct<xn.length;ct++){var qe=xn[ct];if(pn+="    policy oid: "+qe.policyoid+"\n",void 0!==qe.array)for(var gn=0;gn<qe.array.length;gn++){var In=qe.array[gn];void 0!==In.cps&&(pn+="    cps: "+In.cps+"\n")}}return pn},fe=function(jn){for(var pn="",xn=jn.array,ct=0;ct<xn.length;ct++){var qe=xn[ct];try{void 0!==qe.dpname.full[0].uri&&(pn+="    "+qe.dpname.full[0].uri+"\n")}catch(gn){}try{void 0!==qe.dname.full[0].dn.hex&&(pn+="    "+$t.hex2dn(qe.dpname.full[0].dn.hex)+"\n")}catch(gn){}}return pn},Ie=function(jn){for(var pn="",xn=jn.array,ct=0;ct<xn.length;ct++){var qe=xn[ct];void 0!==qe.caissuer&&(pn+="    caissuer: "+qe.caissuer+"\n"),void 0!==qe.ocsp&&(pn+="    ocsp: "+qe.ocsp+"\n")}return pn};if(S="Basic Fields\n",S+="  serial number: "+this.getSerialNumberHex()+"\n",S+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",S+="  issuer: "+this.getIssuerString()+"\n",S+="  notBefore: "+this.getNotBefore()+"\n",S+="  notAfter: "+this.getNotAfter()+"\n",S+="  subject: "+this.getSubjectString()+"\n",S+="  subject public key info: \n",S+="    key algorithm: "+(j=this.getPublicKey()).type+"\n","RSA"===j.type&&(S+="    n="+lr(j.n.toString(16)).substr(0,16)+"...\n",S+="    e="+lr(j.e.toString(16))+"\n"),null!=(W=this.aExtInfo)){S+="X509v3 Extensions:\n";for(var be=0;be<W.length;be++){var ze=W[be],xe=T.asn1.x509.OID.oid2name(ze.oid);""===xe&&(xe=ze.oid);var Ve="";if(!0===ze.critical&&(Ve="CRITICAL"),S+="  "+xe+" "+Ve+":\n","basicConstraints"===xe){var Et=this.getExtBasicConstraints();void 0===Et.cA?S+="    {}\n":(S+="    cA=true",void 0!==Et.pathLen&&(S+=", pathLen="+Et.pathLen),S+="\n")}else if("keyUsage"===xe)S+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===xe)S+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===xe){var Mt=this.getExtAuthorityKeyIdentifier();void 0!==Mt.kid&&(S+="    kid="+Mt.kid.hex+"\n")}else"extKeyUsage"===xe?S+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===xe?S+="    "+(jn=this.getExtSubjectAltName(),JSON.stringify(jn.array).replace(/[\[\]\{\}\"]/g,"")+"\n"):"cRLDistributionPoints"===xe?S+=fe(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===xe?S+=Ie(this.getExtAuthorityInfoAccess()):"certificatePolicies"===xe&&(S+=ue(this.getExtCertificatePolicies()))}}return(S+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof u&&(-1!=u.indexOf("-----BEGIN")?this.readCertPEM(u):T.lang.String.isHex(u)&&this.readCertHex(u))}je.prototype.sign=function(u,a){var c=function(p){return T.crypto.Util.hashString(p,a)}(u);return this.signWithMessageHash(c,a)},je.prototype.signWithMessageHash=function(u,a){var c=Sn(T.crypto.Util.getPaddedDigestInfoHex(u,a,this.n.bitLength()),16);return xo(this.doPrivate(c).toString(16),this.n.bitLength())},je.prototype.signPSS=function(u,a,c){var v,f=(v=ar(u),T.crypto.Util.hashHex(v,a));return void 0===c&&(c=-1),this.signWithMessageHashPSS(f,a,c)},je.prototype.signWithMessageHashPSS=function(u,a,c){var f,p=Fn(u),v=p.length,C=this.n.bitLength()-1,P=Math.ceil(C/8),M=function(S){return T.crypto.Util.hashHex(S,a)};if(-1===c||void 0===c)c=v;else if(-2===c)c=P-v-2;else if(c<-2)throw new Error("invalid salt length");if(P<v+c+2)throw new Error("data too long");var x="";c>0&&(x=new Array(c),(new sn).nextBytes(x),x=String.fromCharCode.apply(String,x));var A=Fn(M(ar("\0\0\0\0\0\0\0\0"+p+x))),V=[];for(f=0;f<P-c-v-2;f+=1)V[f]=0;var J=String.fromCharCode.apply(String,V)+"\x01"+x,H=ks(A,J.length,M),le=[];for(f=0;f<J.length;f+=1)le[f]=J.charCodeAt(f)^H.charCodeAt(f);for(le[0]&=~(65280>>8*P-C&255),f=0;f<v;f++)le.push(A.charCodeAt(f));return le.push(188),xo(this.doPrivate(new ne(le)).toString(16),this.n.bitLength())},je.prototype.verify=function(u,a){var c=Sn(a=(a=a.replace(ic,"")).replace(/[ \n]+/g,""),16);if(c.bitLength()>this.n.bitLength())return 0;var f=Ri(this.doPublic(c).toString(16).replace(/^1f+00/,""));return 0!=f.length&&f[1]==T.crypto.Util.hashString(u,f[0])},je.prototype.verifyWithMessageHash=function(u,a){if(a.length!=Math.ceil(this.n.bitLength()/4))return!1;var c=Sn(a,16);if(c.bitLength()>this.n.bitLength())return 0;var f=Ri(this.doPublic(c).toString(16).replace(/^1f+00/,""));return 0!=f.length&&f[1]==u},je.prototype.verifyPSS=function(u,a,c,f){var C,p=(C=ar(u),T.crypto.Util.hashHex(C,c));return void 0===f&&(f=-1),this.verifyWithMessageHashPSS(p,a,c,f)},je.prototype.verifyWithMessageHashPSS=function(u,a,c,f){if(a.length!=Math.ceil(this.n.bitLength()/4))return!1;var p,v=new ne(a,16),C=function(W){return T.crypto.Util.hashHex(W,c)},P=Fn(u),M=P.length,x=this.n.bitLength()-1,A=Math.ceil(x/8);if(-1===f||void 0===f)f=M;else if(-2===f)f=A-M-2;else if(f<-2)throw new Error("invalid salt length");if(A<M+f+2)throw new Error("data too long");var V=this.doPublic(v).toByteArray();for(p=0;p<V.length;p+=1)V[p]&=255;for(;V.length<A;)V.unshift(0);if(188!==V[A-1])throw new Error("encoded message does not end in 0xbc");var J=(V=String.fromCharCode.apply(String,V)).substr(0,A-M-1),H=V.substr(J.length,M),le=65280>>8*A-x&255;if(0!=(J.charCodeAt(0)&le))throw new Error("bits beyond keysize not zero");var oe=ks(H,J.length,C),ae=[];for(p=0;p<J.length;p+=1)ae[p]=J.charCodeAt(p)^oe.charCodeAt(p);ae[0]&=~le;var S=A-M-f-2;for(p=0;p<S;p+=1)if(0!==ae[p])throw new Error("leftmost octets not zero");if(1!==ae[S])throw new Error("0x01 marker not found");return H===Fn(C(ar("\0\0\0\0\0\0\0\0"+P+String.fromCharCode.apply(String,ae.slice(-f)))))},je.SALT_LEN_HLEN=-1,je.SALT_LEN_MAX=-2,je.SALT_LEN_RECOVER=-2,$t.hex2dn=function(u,a){if(void 0===a&&(a=0),"30"!==u.substr(a,2))throw new Error("malformed DN");for(var c=new Array,f=De.getChildIdx(u,a),p=0;p<f.length;p++)c.push($t.hex2rdn(u,f[p]));return"/"+(c=c.map(function(v){return v.replace("/","\\/")})).join("/")},$t.hex2rdn=function(u,a){if(void 0===a&&(a=0),"31"!==u.substr(a,2))throw new Error("malformed RDN");for(var c=new Array,f=De.getChildIdx(u,a),p=0;p<f.length;p++)c.push($t.hex2attrTypeValue(u,f[p]));return(c=c.map(function(v){return v.replace("+","\\+")})).join("+")},$t.hex2attrTypeValue=function(u,a){var c=De,f=c.getV;if(void 0===a&&(a=0),"30"!==u.substr(a,2))throw new Error("malformed attribute type and value");var p=c.getChildIdx(u,a);2!==p.length||u.substr(p[0],2);var v=f(u,p[0]),C=T.asn1.ASN1Util.oidHexToInt(v);return T.asn1.x509.OID.oid2atype(C)+"="+Fn(f(u,p[1]))},$t.getPublicKeyFromCertHex=function(u){var a=new $t;return a.readCertHex(u),a.getPublicKey()},$t.getPublicKeyFromCertPEM=function(u){var a=new $t;return a.readCertPEM(u),a.getPublicKey()},$t.getPublicKeyInfoPropOfCertPEM=function(u){var a,c,f=De.getVbyList,p={algparam:null};return(a=new $t).readCertPEM(u),c=a.getPublicKeyHex(),p.keyhex=f(c,0,[1],"03").substr(2),p.algoid=f(c,0,[0,0],"06"),"2a8648ce3d0201"===p.algoid&&(p.algparam=f(c,0,[0,1],"06")),p},$t.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==T&&T||(k.KJUR=T={}),void 0!==T.jws&&T.jws||(T.jws={}),T.jws.JWS=function(){var u=T.jws.JWS.isSafeJSONString;this.parseJWS=function(a,c){if(void 0===this.parsedJWS||!c&&void 0===this.parsedJWS.sigvalH){var f=a.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==f)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var p=f[1],v=f[2],C=f[3],P=p+"."+v;if(this.parsedJWS={},this.parsedJWS.headB64U=p,this.parsedJWS.payloadB64U=v,this.parsedJWS.sigvalB64U=C,this.parsedJWS.si=P,!c){var M=_t(C),x=Sn(M,16);this.parsedJWS.sigvalH=M,this.parsedJWS.sigvalBI=x}var A=sr(p),V=sr(v);if(this.parsedJWS.headS=A,this.parsedJWS.payloadS=V,!u(A,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+A}}},T.jws.JWS.sign=function(u,a,c,f,p){var v,C,P,x=T.jws.JWS,A=x.readSafeJSONString,V=x.isSafeJSONString,J=T.crypto,H=J.Mac,le=J.Signature,oe=JSON;if("string"!=typeof a&&"object"!=(void 0===a?"undefined":D(a)))throw"spHeader must be JSON string or object: "+a;if("object"==(void 0===a?"undefined":D(a))&&(v=oe.stringify(C=a)),"string"==typeof a){if(!V(v=a))throw"JWS Head is not safe JSON string: "+v;C=A(v)}if(P=c,"object"==(void 0===c?"undefined":D(c))&&(P=oe.stringify(c)),""!=u&&null!=u||void 0===C.alg||(u=C.alg),""!=u&&null!=u&&void 0===C.alg&&(C.alg=u,v=oe.stringify(C)),u!==C.alg)throw"alg and sHeader.alg doesn't match: "+u+"!="+C.alg;var ae=null;if(void 0===x.jwsalg2sigalg[u])throw"unsupported alg name: "+u;ae=x.jwsalg2sigalg[u];var S=So(v)+"."+So(P),j="";if("Hmac"==ae.substr(0,4)){if(void 0===f)throw"mac key shall be specified for HS* alg";var W=new H({alg:ae,prov:"cryptojs",pass:f});W.updateString(S),j=W.doFinal()}else if(-1!=ae.indexOf("withECDSA")){(ue=new le({alg:ae})).init(f,p),ue.updateString(S);var K=ue.sign();j=T.crypto.ECDSA.asn1SigToConcatSig(K)}else{var ue;"none"!=ae&&((ue=new le({alg:ae})).init(f,p),ue.updateString(S),j=ue.sign())}return S+"."+Ut(j)},T.jws.JWS.verify=function(u,a,c){var f,v=T.jws.JWS,C=v.readSafeJSONString,P=T.crypto,M=P.ECDSA,x=P.Mac,A=P.Signature;void 0!==D(je)&&(f=je);var V=u.split(".");if(3!==V.length)return!1;var ae,J=V[0]+"."+V[1],H=_t(V[2]),le=C(sr(V[0])),oe=null;if(void 0===le.alg)throw"algorithm not specified in header";if(ae=(oe=le.alg).substr(0,2),null!=c&&"[object Array]"===Object.prototype.toString.call(c)&&c.length>0&&-1==(":"+c.join(":")+":").indexOf(":"+oe+":"))throw"algorithm '"+oe+"' not accepted in the list";if("none"!=oe&&null===a)throw"key shall be specified to verify.";if("string"==typeof a&&-1!=a.indexOf("-----BEGIN ")&&(a=Ht.getKey(a)),!("RS"!=ae&&"PS"!=ae||a instanceof f))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==ae&&!(a instanceof M))throw"key shall be a ECDSA obj for ES* algs";var S=null;if(void 0===v.jwsalg2sigalg[le.alg])throw"unsupported alg name: "+oe;if("none"==(S=v.jwsalg2sigalg[oe]))throw"not supported";if("Hmac"==S.substr(0,4)){if(void 0===a)throw"hexadecimal key shall be specified for HMAC";var j=new x({alg:S,pass:a});return j.updateString(J),H==j.doFinal()}if(-1!=S.indexOf("withECDSA")){var W,K=null;try{K=M.concatSigToASN1Sig(H)}catch(ue){return!1}return(W=new A({alg:S})).init(a),W.updateString(J),W.verify(K)}return(W=new A({alg:S})).init(a),W.updateString(J),W.verify(H)},T.jws.JWS.parse=function(u){var c,f,p=u.split("."),v={};if(2!=p.length&&3!=p.length)throw"malformed sJWS: wrong number of '.' splitted elements";return c=p[1],3==p.length&&(f=p[2]),v.headerObj=T.jws.JWS.readSafeJSONString(sr(p[0])),v.payloadObj=T.jws.JWS.readSafeJSONString(sr(c)),v.headerPP=JSON.stringify(v.headerObj,null,"  "),v.payloadPP=null==v.payloadObj?sr(c):JSON.stringify(v.payloadObj,null,"  "),void 0!==f&&(v.sigHex=_t(f)),v},T.jws.JWS.verifyJWT=function(u,a,c){var f=T.jws,p=f.JWS,v=p.readSafeJSONString,C=p.inArray,P=p.includedArray,M=u.split("."),x=M[0],A=M[1],V=(_t(M[2]),v(sr(x))),J=v(sr(A));if(void 0===V.alg)return!1;if(void 0===c.alg)throw"acceptField.alg shall be specified";if(!C(V.alg,c.alg)||void 0!==J.iss&&"object"===D(c.iss)&&!C(J.iss,c.iss)||void 0!==J.sub&&"object"===D(c.sub)&&!C(J.sub,c.sub))return!1;if(void 0!==J.aud&&"object"===D(c.aud))if("string"==typeof J.aud){if(!C(J.aud,c.aud))return!1}else if("object"==D(J.aud)&&!P(J.aud,c.aud))return!1;var H=f.IntDate.getNow();return void 0!==c.verifyAt&&"number"==typeof c.verifyAt&&(H=c.verifyAt),void 0!==c.gracePeriod&&"number"==typeof c.gracePeriod||(c.gracePeriod=0),!(void 0!==J.exp&&"number"==typeof J.exp&&J.exp+c.gracePeriod<H||void 0!==J.nbf&&"number"==typeof J.nbf&&H<J.nbf-c.gracePeriod||void 0!==J.iat&&"number"==typeof J.iat&&H<J.iat-c.gracePeriod||void 0!==J.jti&&void 0!==c.jti&&J.jti!==c.jti||!p.verify(u,a,c.alg))},T.jws.JWS.includedArray=function(u,a){var c=T.jws.JWS.inArray;if(null===u||"object"!==(void 0===u?"undefined":D(u))||"number"!=typeof u.length)return!1;for(var f=0;f<u.length;f++)if(!c(u[f],a))return!1;return!0},T.jws.JWS.inArray=function(u,a){if(null===a||"object"!==(void 0===a?"undefined":D(a))||"number"!=typeof a.length)return!1;for(var c=0;c<a.length;c++)if(a[c]==u)return!0;return!1},T.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},T.jws.JWS.isSafeJSONString=function(u,a,c){var f=null;try{return"object"!=(void 0===(f=ec(u))?"undefined":D(f))||f.constructor===Array?0:(a&&(a[c]=f),1)}catch(p){return 0}},T.jws.JWS.readSafeJSONString=function(u){var a=null;try{return"object"!=(void 0===(a=ec(u))?"undefined":D(a))||a.constructor===Array?null:a}catch(c){return null}},T.jws.JWS.getEncodedSignatureValueFromJWS=function(u){var a=u.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==a)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return a[1]},T.jws.JWS.getJWKthumbprint=function(u){if("RSA"!==u.kty&&"EC"!==u.kty&&"oct"!==u.kty)throw"unsupported algorithm for JWK Thumprint";var a="{";if("RSA"===u.kty){if("string"!=typeof u.n||"string"!=typeof u.e)throw"wrong n and e value for RSA key";a+='"e":"'+u.e+'",',a+='"kty":"'+u.kty+'",',a+='"n":"'+u.n+'"}'}else if("EC"===u.kty){if("string"!=typeof u.crv||"string"!=typeof u.x||"string"!=typeof u.y)throw"wrong crv, x and y value for EC key";a+='"crv":"'+u.crv+'",',a+='"kty":"'+u.kty+'",',a+='"x":"'+u.x+'",',a+='"y":"'+u.y+'"}'}else if("oct"===u.kty){if("string"!=typeof u.k)throw"wrong k value for oct(symmetric) key";a+='"kty":"'+u.kty+'",',a+='"k":"'+u.k+'"}'}var c=ar(a);return Ut(T.crypto.Util.hashHex(c,"sha256"))},T.jws.IntDate={},T.jws.IntDate.get=function(u){var a=T.jws.IntDate,c=a.getNow,f=a.getZulu;if("now"==u)return c();if("now + 1hour"==u)return c()+3600;if("now + 1day"==u)return c()+86400;if("now + 1month"==u)return c()+2592e3;if("now + 1year"==u)return c()+31536e3;if(u.match(/Z$/))return f(u);if(u.match(/^[0-9]+$/))return parseInt(u);throw"unsupported format: "+u},T.jws.IntDate.getZulu=function(u){return Za(u)},T.jws.IntDate.getNow=function(){return~~(new Date/1e3)},T.jws.IntDate.intDate2UTCString=function(u){return new Date(1e3*u).toUTCString()},T.jws.IntDate.intDate2Zulu=function(u){var a=new Date(1e3*u);return("0000"+a.getUTCFullYear()).slice(-4)+("00"+(a.getUTCMonth()+1)).slice(-2)+("00"+a.getUTCDate()).slice(-2)+("00"+a.getUTCHours()).slice(-2)+("00"+a.getUTCMinutes()).slice(-2)+("00"+a.getUTCSeconds()).slice(-2)+"Z"},k.SecureRandom=sn,k.rng_seed_time=pe,k.BigInteger=ne,k.RSAKey=je,k.EDSA=T.crypto.EDSA,k.DSA=T.crypto.DSA,k.Signature=T.crypto.Signature,k.MessageDigest=T.crypto.MessageDigest,k.Mac=T.crypto.Mac,k.Cipher=T.crypto.Cipher,k.KEYUTIL=Ht,k.ASN1HEX=De,k.X509=$t,k.CryptoJS=ee,k.b64tohex=we,k.b64toBA=Se,k.stoBA=tc,k.BAtos=nc,k.BAtohex=Is,k.stohex=Kr,k.stob64=function(a){return ve(Kr(a))},k.stob64u=function(a){return Zi(ve(Kr(a)))},k.b64utos=function(a){return nc(Se(Mi(a)))},k.b64tob64u=Zi,k.b64utob64=Mi,k.hex2b64=ve,k.hextob64u=Ut,k.b64utohex=_t,k.utf8tob64u=So,k.b64utoutf8=sr,k.utf8tob64=function(a){return ve(Xi(Tt(a)))},k.b64toutf8=function(a){return decodeURIComponent(Ao(we(a)))},k.utf8tohex=Fo,k.hextoutf8=an,k.hextorstr=Fn,k.rstrtohex=ar,k.hextob64=Ts,k.hextob64nl=Ms,k.b64nltohex=ur,k.hextopem=An,k.pemtohex=br,k.hextoArrayBuffer=function(a){if(a.length%2!=0)throw"input is not even length";if(null==a.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var c=new ArrayBuffer(a.length/2),f=new DataView(c),p=0;p<a.length/2;p++)f.setUint8(p,parseInt(a.substr(2*p,2),16));return c},k.ArrayBuffertohex=function(a){for(var c="",f=new DataView(a),p=0;p<a.byteLength;p++)c+=("00"+f.getUint8(p).toString(16)).slice(-2);return c},k.zulutomsec=Rs,k.zulutosec=Za,k.zulutodate=function(a){return new Date(Rs(a))},k.datetozulu=function(a,c,f){var p,v=a.getUTCFullYear();if(c){if(v<1950||2049<v)throw"not proper year for UTCTime: "+v;p=(""+v).slice(-2)}else p=("000"+v).slice(-4);if(p+=("0"+(a.getUTCMonth()+1)).slice(-2),p+=("0"+a.getUTCDate()).slice(-2),p+=("0"+a.getUTCHours()).slice(-2),p+=("0"+a.getUTCMinutes()).slice(-2),p+=("0"+a.getUTCSeconds()).slice(-2),f){var C=a.getUTCMilliseconds();0!==C&&(p+="."+(C=(C=("00"+C).slice(-3)).replace(/0+$/g,"")))}return p+"Z"},k.uricmptohex=Xi,k.hextouricmp=Ao,k.ipv6tohex=Xa,k.hextoipv6=Er,k.hextoip=Ps,k.iptohex=function(a){var c="malformed IP address";if(!(a=a.toLowerCase(a)).match(/^[0-9.]+$/)){if(a.match(/^[0-9a-f:]+$/)&&-1!==a.indexOf(":"))return Xa(a);throw c}var f=a.split(".");if(4!==f.length)throw c;var p="";try{for(var v=0;v<4;v++)p+=("0"+parseInt(f[v]).toString(16)).slice(-2);return p}catch(C){throw c}},k.encodeURIComponentAll=Tt,k.newline_toUnix=function(a){return a.replace(/\r\n/gm,"\n")},k.newline_toDos=function(a){return(a=a.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},k.hextoposhex=lr,k.intarystrtohex=function(a){a=(a=(a=a.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return a.split(/,/).map(function(c,f,p){var v=parseInt(c);if(v<0||255<v)throw"integer not in range 0-255";return("00"+v.toString(16)).slice(-2)}).join("")}catch(c){throw"malformed integer array string: "+c}},k.strdiffidx=function(a,c){var f=a.length;a.length>c.length&&(f=c.length);for(var p=0;p<f;p++)if(a.charCodeAt(p)!=c.charCodeAt(p))return p;return a.length!=c.length?f:-1},k.KJUR=T,k.crypto=T.crypto,k.asn1=T.asn1,k.jws=T.jws,k.lang=T.lang}).call(this,Q(28).Buffer)},function(Ne,k,Q){"use strict";(function(G){var D=Q(30),z=Q(31),R=Q(32);function y(){return m.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function _(L,w){if(y()<w)throw new RangeError("Invalid typed array length");return m.TYPED_ARRAY_SUPPORT?(L=new Uint8Array(w)).__proto__=m.prototype:(null===L&&(L=new m(w)),L.length=w),L}function m(L,w,E){if(!(m.TYPED_ARRAY_SUPPORT||this instanceof m))return new m(L,w,E);if("number"==typeof L){if("string"==typeof w)throw new Error("If encoding is specified then the first argument must be a string");return N(this,L)}return F(this,L,w,E)}function F(L,w,E,Y){if("number"==typeof w)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&w instanceof ArrayBuffer?function(ce,pe,Me,Ge){if(Me<0||pe.byteLength<Me)throw new RangeError("'offset' is out of bounds");if(pe.byteLength<Me+(Ge||0))throw new RangeError("'length' is out of bounds");return pe=void 0===Me&&void 0===Ge?new Uint8Array(pe):void 0===Ge?new Uint8Array(pe,Me):new Uint8Array(pe,Me,Ge),m.TYPED_ARRAY_SUPPORT?(ce=pe).__proto__=m.prototype:ce=te(ce,pe),ce}(L,w,E,Y):"string"==typeof w?function(ce,pe,Me){if("string"==typeof Me&&""!==Me||(Me="utf8"),!m.isEncoding(Me))throw new TypeError('"encoding" must be a valid string encoding');var Ge=0|B(pe,Me),ht=(ce=_(ce,Ge)).write(pe,Me);return ht!==Ge&&(ce=ce.slice(0,ht)),ce}(L,w,E):function(ce,pe){if(m.isBuffer(pe)){var Me=0|q(pe.length);return 0===(ce=_(ce,Me)).length||pe.copy(ce,0,0,Me),ce}if(pe){if("undefined"!=typeof ArrayBuffer&&pe.buffer instanceof ArrayBuffer||"length"in pe)return"number"!=typeof pe.length||(ht=pe.length)!=ht?_(ce,0):te(ce,pe);if("Buffer"===pe.type&&R(pe.data))return te(ce,pe.data)}var ht;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(L,w)}function $(L){if("number"!=typeof L)throw new TypeError('"size" argument must be a number');if(L<0)throw new RangeError('"size" argument must not be negative')}function N(L,w){if($(w),L=_(L,w<0?0:0|q(w)),!m.TYPED_ARRAY_SUPPORT)for(var E=0;E<w;++E)L[E]=0;return L}function te(L,w){var E=w.length<0?0:0|q(w.length);L=_(L,E);for(var Y=0;Y<E;Y+=1)L[Y]=255&w[Y];return L}function q(L){if(L>=y())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y().toString(16)+" bytes");return 0|L}function B(L,w){if(m.isBuffer(L))return L.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(L)||L instanceof ArrayBuffer))return L.byteLength;"string"!=typeof L&&(L=""+L);var E=L.length;if(0===E)return 0;for(var Y=!1;;)switch(w){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":case void 0:return lt(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*E;case"hex":return E>>>1;case"base64":return ft(L).length;default:if(Y)return lt(L).length;w=(""+w).toLowerCase(),Y=!0}}function O(L,w,E){var Y=!1;if((void 0===w||w<0)&&(w=0),w>this.length||((void 0===E||E>this.length)&&(E=this.length),E<=0)||(E>>>=0)<=(w>>>=0))return"";for(L||(L="utf8");;)switch(L){case"hex":return Gt(this,w,E);case"utf8":case"utf-8":return wt(this,w,E);case"ascii":return hn(this,w,E);case"latin1":case"binary":return bt(this,w,E);case"base64":return ke(this,w,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Jt(this,w,E);default:if(Y)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),Y=!0}}function Z(L,w,E){var Y=L[w];L[w]=L[E],L[E]=Y}function de(L,w,E,Y,re){if(0===L.length)return-1;if("string"==typeof E?(Y=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,isNaN(E)&&(E=re?0:L.length-1),E<0&&(E=L.length+E),E>=L.length){if(re)return-1;E=L.length-1}else if(E<0){if(!re)return-1;E=0}if("string"==typeof w&&(w=m.from(w,Y)),m.isBuffer(w))return 0===w.length?-1:ee(L,w,E,Y,re);if("number"==typeof w)return w&=255,m.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?re?Uint8Array.prototype.indexOf.call(L,w,E):Uint8Array.prototype.lastIndexOf.call(L,w,E):ee(L,[w],E,Y,re);throw new TypeError("val must be string, number or Buffer")}function ee(L,w,E,Y,re){var ce,pe=1,Me=L.length,Ge=w.length;if(void 0!==Y&&("ucs2"===(Y=String(Y).toLowerCase())||"ucs-2"===Y||"utf16le"===Y||"utf-16le"===Y)){if(L.length<2||w.length<2)return-1;pe=2,Me/=2,Ge/=2,E/=2}function ht(Sn,wr){return 1===pe?Sn[wr]:Sn.readUInt16BE(wr*pe)}if(re){var st=-1;for(ce=E;ce<Me;ce++)if(ht(L,ce)===ht(w,-1===st?0:ce-st)){if(-1===st&&(st=ce),ce-st+1===Ge)return st*pe}else-1!==st&&(ce-=ce-st),st=-1}else for(E+Ge>Me&&(E=Me-Ge),ce=E;ce>=0;ce--){for(var Vt=!0,sn=0;sn<Ge;sn++)if(ht(L,ce+sn)!==ht(w,sn)){Vt=!1;break}if(Vt)return ce}return-1}function ie(L,w,E,Y){E=Number(E)||0;var re=L.length-E;Y?(Y=Number(Y))>re&&(Y=re):Y=re;var ce=w.length;if(ce%2!=0)throw new TypeError("Invalid hex string");Y>ce/2&&(Y=ce/2);for(var pe=0;pe<Y;++pe){var Me=parseInt(w.substr(2*pe,2),16);if(isNaN(Me))return pe;L[E+pe]=Me}return pe}function X(L,w,E,Y){return bn(lt(w,L.length-E),L,E,Y)}function ve(L,w,E,Y){return bn(function(ce){for(var pe=[],Me=0;Me<ce.length;++Me)pe.push(255&ce.charCodeAt(Me));return pe}(w),L,E,Y)}function we(L,w,E,Y){return ve(L,w,E,Y)}function Se(L,w,E,Y){return bn(ft(w),L,E,Y)}function ne(L,w,E,Y){return bn(function(ce,pe){for(var Me,Ge,st=[],Vt=0;Vt<ce.length&&!((pe-=2)<0);++Vt)Ge=(Me=ce.charCodeAt(Vt))>>8,st.push(Me%256),st.push(Ge);return st}(w,L.length-E),L,E,Y)}function ke(L,w,E){return D.fromByteArray(0===w&&E===L.length?L:L.slice(w,E))}function wt(L,w,E){E=Math.min(L.length,E);for(var Y=[],re=w;re<E;){var ce,pe,Me,Ge,ht=L[re],st=null,Vt=ht>239?4:ht>223?3:ht>191?2:1;if(re+Vt<=E)switch(Vt){case 1:ht<128&&(st=ht);break;case 2:128==(192&(ce=L[re+1]))&&(Ge=(31&ht)<<6|63&ce)>127&&(st=Ge);break;case 3:pe=L[re+2],128==(192&(ce=L[re+1]))&&128==(192&pe)&&(Ge=(15&ht)<<12|(63&ce)<<6|63&pe)>2047&&(Ge<55296||Ge>57343)&&(st=Ge);break;case 4:pe=L[re+2],Me=L[re+3],128==(192&(ce=L[re+1]))&&128==(192&pe)&&128==(192&Me)&&(Ge=(15&ht)<<18|(63&ce)<<12|(63&pe)<<6|63&Me)>65535&&Ge<1114112&&(st=Ge)}null===st?(st=65533,Vt=1):st>65535&&(Y.push((st-=65536)>>>10&1023|55296),st=56320|1023&st),Y.push(st),re+=Vt}return function(Sn){var wr=Sn.length;if(wr<=yt)return String.fromCharCode.apply(String,Sn);for(var je="",kt=0;kt<wr;)je+=String.fromCharCode.apply(String,Sn.slice(kt,kt+=yt));return je}(Y)}k.Buffer=m,k.SlowBuffer=function(w){return+w!=w&&(w=0),m.alloc(+w)},k.INSPECT_MAX_BYTES=50,m.TYPED_ARRAY_SUPPORT=void 0!==G.TYPED_ARRAY_SUPPORT?G.TYPED_ARRAY_SUPPORT:function(){try{var w=new Uint8Array(1);return w.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===w.foo()&&"function"==typeof w.subarray&&0===w.subarray(1,1).byteLength}catch(E){return!1}}(),k.kMaxLength=y(),m.poolSize=8192,m._augment=function(L){return L.__proto__=m.prototype,L},m.from=function(L,w,E){return F(null,L,w,E)},m.TYPED_ARRAY_SUPPORT&&(m.prototype.__proto__=Uint8Array.prototype,m.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&m[Symbol.species]===m&&Object.defineProperty(m,Symbol.species,{value:null,configurable:!0})),m.alloc=function(L,w,E){return null,pe=w,Me=E,$(ce=L),ce<=0?_(null,ce):void 0!==pe?"string"==typeof Me?_(null,ce).fill(pe,Me):_(null,ce).fill(pe):_(null,ce);var ce,pe,Me},m.allocUnsafe=function(L){return N(null,L)},m.allocUnsafeSlow=function(L){return N(null,L)},m.isBuffer=function(w){return!(null==w||!w._isBuffer)},m.compare=function(w,E){if(!m.isBuffer(w)||!m.isBuffer(E))throw new TypeError("Arguments must be Buffers");if(w===E)return 0;for(var Y=w.length,re=E.length,ce=0,pe=Math.min(Y,re);ce<pe;++ce)if(w[ce]!==E[ce]){Y=w[ce],re=E[ce];break}return Y<re?-1:re<Y?1:0},m.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(w,E){if(!R(w))throw new TypeError('"list" argument must be an Array of Buffers');if(0===w.length)return m.alloc(0);var Y;if(void 0===E)for(E=0,Y=0;Y<w.length;++Y)E+=w[Y].length;var re=m.allocUnsafe(E),ce=0;for(Y=0;Y<w.length;++Y){var pe=w[Y];if(!m.isBuffer(pe))throw new TypeError('"list" argument must be an Array of Buffers');pe.copy(re,ce),ce+=pe.length}return re},m.byteLength=B,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var w=this.length;if(w%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var E=0;E<w;E+=2)Z(this,E,E+1);return this},m.prototype.swap32=function(){var w=this.length;if(w%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var E=0;E<w;E+=4)Z(this,E,E+3),Z(this,E+1,E+2);return this},m.prototype.swap64=function(){var w=this.length;if(w%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var E=0;E<w;E+=8)Z(this,E,E+7),Z(this,E+1,E+6),Z(this,E+2,E+5),Z(this,E+3,E+4);return this},m.prototype.toString=function(){var w=0|this.length;return 0===w?"":0===arguments.length?wt(this,0,w):O.apply(this,arguments)},m.prototype.equals=function(w){if(!m.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w||0===m.compare(this,w)},m.prototype.inspect=function(){var w="",E=k.INSPECT_MAX_BYTES;return this.length>0&&(w=this.toString("hex",0,E).match(/.{2}/g).join(" "),this.length>E&&(w+=" ... ")),"<Buffer "+w+">"},m.prototype.compare=function(w,E,Y,re,ce){if(!m.isBuffer(w))throw new TypeError("Argument must be a Buffer");if(void 0===E&&(E=0),void 0===Y&&(Y=w?w.length:0),void 0===re&&(re=0),void 0===ce&&(ce=this.length),E<0||Y>w.length||re<0||ce>this.length)throw new RangeError("out of range index");if(re>=ce&&E>=Y)return 0;if(re>=ce)return-1;if(E>=Y)return 1;if(this===w)return 0;for(var pe=(ce>>>=0)-(re>>>=0),Me=(Y>>>=0)-(E>>>=0),Ge=Math.min(pe,Me),ht=this.slice(re,ce),st=w.slice(E,Y),Vt=0;Vt<Ge;++Vt)if(ht[Vt]!==st[Vt]){pe=ht[Vt],Me=st[Vt];break}return pe<Me?-1:Me<pe?1:0},m.prototype.includes=function(w,E,Y){return-1!==this.indexOf(w,E,Y)},m.prototype.indexOf=function(w,E,Y){return de(this,w,E,Y,!0)},m.prototype.lastIndexOf=function(w,E,Y){return de(this,w,E,Y,!1)},m.prototype.write=function(w,E,Y,re){if(void 0===E)re="utf8",Y=this.length,E=0;else if(void 0===Y&&"string"==typeof E)re=E,Y=this.length,E=0;else{if(!isFinite(E))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");E|=0,isFinite(Y)?(Y|=0,void 0===re&&(re="utf8")):(re=Y,Y=void 0)}var ce=this.length-E;if((void 0===Y||Y>ce)&&(Y=ce),w.length>0&&(Y<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var pe=!1;;)switch(re){case"hex":return ie(this,w,E,Y);case"utf8":case"utf-8":return X(this,w,E,Y);case"ascii":return ve(this,w,E,Y);case"latin1":case"binary":return we(this,w,E,Y);case"base64":return Se(this,w,E,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,w,E,Y);default:if(pe)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),pe=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var yt=4096;function hn(L,w,E){var Y="";E=Math.min(L.length,E);for(var re=w;re<E;++re)Y+=String.fromCharCode(127&L[re]);return Y}function bt(L,w,E){var Y="";E=Math.min(L.length,E);for(var re=w;re<E;++re)Y+=String.fromCharCode(L[re]);return Y}function Gt(L,w,E){var Y=L.length;(!w||w<0)&&(w=0),(!E||E<0||E>Y)&&(E=Y);for(var re="",ce=w;ce<E;++ce)re+=Vn(L[ce]);return re}function Jt(L,w,E){for(var Y=L.slice(w,E),re="",ce=0;ce<Y.length;ce+=2)re+=String.fromCharCode(Y[ce]+256*Y[ce+1]);return re}function ot(L,w,E){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(L+w>E)throw new RangeError("Trying to access beyond buffer length")}function Le(L,w,E,Y,re,ce){if(!m.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>re||w<ce)throw new RangeError('"value" argument is out of bounds');if(E+Y>L.length)throw new RangeError("Index out of range")}function Ft(L,w,E,Y){w<0&&(w=65535+w+1);for(var re=0,ce=Math.min(L.length-E,2);re<ce;++re)L[E+re]=(w&255<<8*(Y?re:1-re))>>>8*(Y?re:1-re)}function Cn(L,w,E,Y){w<0&&(w=4294967295+w+1);for(var re=0,ce=Math.min(L.length-E,4);re<ce;++re)L[E+re]=w>>>8*(Y?re:3-re)&255}function wn(L,w,E,Y,re,ce){if(E+Y>L.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function Dn(L,w,E,Y,re){return re||wn(L,0,E,4),z.write(L,w,E,Y,23,4),E+4}function Pt(L,w,E,Y,re){return re||wn(L,0,E,8),z.write(L,w,E,Y,52,8),E+8}m.prototype.slice=function(w,E){var Y,re=this.length;if((w=~~w)<0?(w+=re)<0&&(w=0):w>re&&(w=re),(E=void 0===E?re:~~E)<0?(E+=re)<0&&(E=0):E>re&&(E=re),E<w&&(E=w),m.TYPED_ARRAY_SUPPORT)(Y=this.subarray(w,E)).__proto__=m.prototype;else{var ce=E-w;Y=new m(ce,void 0);for(var pe=0;pe<ce;++pe)Y[pe]=this[pe+w]}return Y},m.prototype.readUIntLE=function(w,E,Y){w|=0,E|=0,Y||ot(w,E,this.length);for(var re=this[w],ce=1,pe=0;++pe<E&&(ce*=256);)re+=this[w+pe]*ce;return re},m.prototype.readUIntBE=function(w,E,Y){w|=0,E|=0,Y||ot(w,E,this.length);for(var re=this[w+--E],ce=1;E>0&&(ce*=256);)re+=this[w+--E]*ce;return re},m.prototype.readUInt8=function(w,E){return E||ot(w,1,this.length),this[w]},m.prototype.readUInt16LE=function(w,E){return E||ot(w,2,this.length),this[w]|this[w+1]<<8},m.prototype.readUInt16BE=function(w,E){return E||ot(w,2,this.length),this[w]<<8|this[w+1]},m.prototype.readUInt32LE=function(w,E){return E||ot(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+16777216*this[w+3]},m.prototype.readUInt32BE=function(w,E){return E||ot(w,4,this.length),16777216*this[w]+(this[w+1]<<16|this[w+2]<<8|this[w+3])},m.prototype.readIntLE=function(w,E,Y){w|=0,E|=0,Y||ot(w,E,this.length);for(var re=this[w],ce=1,pe=0;++pe<E&&(ce*=256);)re+=this[w+pe]*ce;return re>=(ce*=128)&&(re-=Math.pow(2,8*E)),re},m.prototype.readIntBE=function(w,E,Y){w|=0,E|=0,Y||ot(w,E,this.length);for(var re=E,ce=1,pe=this[w+--re];re>0&&(ce*=256);)pe+=this[w+--re]*ce;return pe>=(ce*=128)&&(pe-=Math.pow(2,8*E)),pe},m.prototype.readInt8=function(w,E){return E||ot(w,1,this.length),128&this[w]?-1*(255-this[w]+1):this[w]},m.prototype.readInt16LE=function(w,E){E||ot(w,2,this.length);var Y=this[w]|this[w+1]<<8;return 32768&Y?4294901760|Y:Y},m.prototype.readInt16BE=function(w,E){E||ot(w,2,this.length);var Y=this[w+1]|this[w]<<8;return 32768&Y?4294901760|Y:Y},m.prototype.readInt32LE=function(w,E){return E||ot(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},m.prototype.readInt32BE=function(w,E){return E||ot(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},m.prototype.readFloatLE=function(w,E){return E||ot(w,4,this.length),z.read(this,w,!0,23,4)},m.prototype.readFloatBE=function(w,E){return E||ot(w,4,this.length),z.read(this,w,!1,23,4)},m.prototype.readDoubleLE=function(w,E){return E||ot(w,8,this.length),z.read(this,w,!0,52,8)},m.prototype.readDoubleBE=function(w,E){return E||ot(w,8,this.length),z.read(this,w,!1,52,8)},m.prototype.writeUIntLE=function(w,E,Y,re){w=+w,E|=0,Y|=0,re||Le(this,w,E,Y,Math.pow(2,8*Y)-1,0);var ce=1,pe=0;for(this[E]=255&w;++pe<Y&&(ce*=256);)this[E+pe]=w/ce&255;return E+Y},m.prototype.writeUIntBE=function(w,E,Y,re){w=+w,E|=0,Y|=0,re||Le(this,w,E,Y,Math.pow(2,8*Y)-1,0);var ce=Y-1,pe=1;for(this[E+ce]=255&w;--ce>=0&&(pe*=256);)this[E+ce]=w/pe&255;return E+Y},m.prototype.writeUInt8=function(w,E,Y){return w=+w,E|=0,Y||Le(this,w,E,1,255,0),m.TYPED_ARRAY_SUPPORT||(w=Math.floor(w)),this[E]=255&w,E+1},m.prototype.writeUInt16LE=function(w,E,Y){return w=+w,E|=0,Y||Le(this,w,E,2,65535,0),m.TYPED_ARRAY_SUPPORT?(this[E]=255&w,this[E+1]=w>>>8):Ft(this,w,E,!0),E+2},m.prototype.writeUInt16BE=function(w,E,Y){return w=+w,E|=0,Y||Le(this,w,E,2,65535,0),m.TYPED_ARRAY_SUPPORT?(this[E]=w>>>8,this[E+1]=255&w):Ft(this,w,E,!1),E+2},m.prototype.writeUInt32LE=function(w,E,Y){return w=+w,E|=0,Y||Le(this,w,E,4,4294967295,0),m.TYPED_ARRAY_SUPPORT?(this[E+3]=w>>>24,this[E+2]=w>>>16,this[E+1]=w>>>8,this[E]=255&w):Cn(this,w,E,!0),E+4},m.prototype.writeUInt32BE=function(w,E,Y){return w=+w,E|=0,Y||Le(this,w,E,4,4294967295,0),m.TYPED_ARRAY_SUPPORT?(this[E]=w>>>24,this[E+1]=w>>>16,this[E+2]=w>>>8,this[E+3]=255&w):Cn(this,w,E,!1),E+4},m.prototype.writeIntLE=function(w,E,Y,re){if(w=+w,E|=0,!re){var ce=Math.pow(2,8*Y-1);Le(this,w,E,Y,ce-1,-ce)}var pe=0,Me=1,Ge=0;for(this[E]=255&w;++pe<Y&&(Me*=256);)w<0&&0===Ge&&0!==this[E+pe-1]&&(Ge=1),this[E+pe]=(w/Me>>0)-Ge&255;return E+Y},m.prototype.writeIntBE=function(w,E,Y,re){if(w=+w,E|=0,!re){var ce=Math.pow(2,8*Y-1);Le(this,w,E,Y,ce-1,-ce)}var pe=Y-1,Me=1,Ge=0;for(this[E+pe]=255&w;--pe>=0&&(Me*=256);)w<0&&0===Ge&&0!==this[E+pe+1]&&(Ge=1),this[E+pe]=(w/Me>>0)-Ge&255;return E+Y},m.prototype.writeInt8=function(w,E,Y){return w=+w,E|=0,Y||Le(this,w,E,1,127,-128),m.TYPED_ARRAY_SUPPORT||(w=Math.floor(w)),w<0&&(w=255+w+1),this[E]=255&w,E+1},m.prototype.writeInt16LE=function(w,E,Y){return w=+w,E|=0,Y||Le(this,w,E,2,32767,-32768),m.TYPED_ARRAY_SUPPORT?(this[E]=255&w,this[E+1]=w>>>8):Ft(this,w,E,!0),E+2},m.prototype.writeInt16BE=function(w,E,Y){return w=+w,E|=0,Y||Le(this,w,E,2,32767,-32768),m.TYPED_ARRAY_SUPPORT?(this[E]=w>>>8,this[E+1]=255&w):Ft(this,w,E,!1),E+2},m.prototype.writeInt32LE=function(w,E,Y){return w=+w,E|=0,Y||Le(this,w,E,4,2147483647,-2147483648),m.TYPED_ARRAY_SUPPORT?(this[E]=255&w,this[E+1]=w>>>8,this[E+2]=w>>>16,this[E+3]=w>>>24):Cn(this,w,E,!0),E+4},m.prototype.writeInt32BE=function(w,E,Y){return w=+w,E|=0,Y||Le(this,w,E,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),m.TYPED_ARRAY_SUPPORT?(this[E]=w>>>24,this[E+1]=w>>>16,this[E+2]=w>>>8,this[E+3]=255&w):Cn(this,w,E,!1),E+4},m.prototype.writeFloatLE=function(w,E,Y){return Dn(this,w,E,!0,Y)},m.prototype.writeFloatBE=function(w,E,Y){return Dn(this,w,E,!1,Y)},m.prototype.writeDoubleLE=function(w,E,Y){return Pt(this,w,E,!0,Y)},m.prototype.writeDoubleBE=function(w,E,Y){return Pt(this,w,E,!1,Y)},m.prototype.copy=function(w,E,Y,re){if(Y||(Y=0),re||0===re||(re=this.length),E>=w.length&&(E=w.length),E||(E=0),re>0&&re<Y&&(re=Y),re===Y||0===w.length||0===this.length)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("sourceStart out of bounds");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),w.length-E<re-Y&&(re=w.length-E+Y);var ce,pe=re-Y;if(this===w&&Y<E&&E<re)for(ce=pe-1;ce>=0;--ce)w[ce+E]=this[ce+Y];else if(pe<1e3||!m.TYPED_ARRAY_SUPPORT)for(ce=0;ce<pe;++ce)w[ce+E]=this[ce+Y];else Uint8Array.prototype.set.call(w,this.subarray(Y,Y+pe),E);return pe},m.prototype.fill=function(w,E,Y,re){if("string"==typeof w){if("string"==typeof E?(re=E,E=0,Y=this.length):"string"==typeof Y&&(re=Y,Y=this.length),1===w.length){var ce=w.charCodeAt(0);ce<256&&(w=ce)}if(void 0!==re&&"string"!=typeof re)throw new TypeError("encoding must be a string");if("string"==typeof re&&!m.isEncoding(re))throw new TypeError("Unknown encoding: "+re)}else"number"==typeof w&&(w&=255);if(E<0||this.length<E||this.length<Y)throw new RangeError("Out of range index");if(Y<=E)return this;var pe;if(E>>>=0,Y=void 0===Y?this.length:Y>>>0,w||(w=0),"number"==typeof w)for(pe=E;pe<Y;++pe)this[pe]=w;else{var Me=m.isBuffer(w)?w:lt(new m(w,re).toString()),Ge=Me.length;for(pe=0;pe<Y-E;++pe)this[pe+E]=Me[pe%Ge]}return this};var _r=/[^+\/0-9A-Za-z-_]/g;function Vn(L){return L<16?"0"+L.toString(16):L.toString(16)}function lt(L,w){var E;w=w||1/0;for(var Y=L.length,re=null,ce=[],pe=0;pe<Y;++pe){if((E=L.charCodeAt(pe))>55295&&E<57344){if(!re){if(E>56319){(w-=3)>-1&&ce.push(239,191,189);continue}if(pe+1===Y){(w-=3)>-1&&ce.push(239,191,189);continue}re=E;continue}if(E<56320){(w-=3)>-1&&ce.push(239,191,189),re=E;continue}E=65536+(re-55296<<10|E-56320)}else re&&(w-=3)>-1&&ce.push(239,191,189);if(re=null,E<128){if((w-=1)<0)break;ce.push(E)}else if(E<2048){if((w-=2)<0)break;ce.push(E>>6|192,63&E|128)}else if(E<65536){if((w-=3)<0)break;ce.push(E>>12|224,E>>6&63|128,63&E|128)}else{if(!(E<1114112))throw new Error("Invalid code point");if((w-=4)<0)break;ce.push(E>>18|240,E>>12&63|128,E>>6&63|128,63&E|128)}}return ce}function ft(L){return D.toByteArray(function(E){if((E=(re=E,re.trim?re.trim():re.replace(/^\s+|\s+$/g,"")).replace(_r,"")).length<2)return"";for(var re;E.length%4!=0;)E+="=";return E}(L))}function bn(L,w,E,Y){for(var re=0;re<Y&&!(re+E>=w.length||re>=L.length);++re)w[re+E]=L[re];return re}}).call(this,Q(29))},function(Ne,k){var Q;Q=function(){return this}();try{Q=Q||new Function("return this")()}catch(G){"object"==typeof window&&(Q=window)}Ne.exports=Q},function(Ne,k,Q){"use strict";k.byteLength=function(N){var te=m(N),B=te[1];return 3*(te[0]+B)/4-B},k.toByteArray=function(N){var te,q,Se,B=m(N),O=B[0],Z=B[1],de=new z(3*(O+(Se=Z))/4-Se),ee=0,ie=Z>0?O-4:O;for(q=0;q<ie;q+=4)te=D[N.charCodeAt(q)]<<18|D[N.charCodeAt(q+1)]<<12|D[N.charCodeAt(q+2)]<<6|D[N.charCodeAt(q+3)],de[ee++]=te>>16&255,de[ee++]=te>>8&255,de[ee++]=255&te;return 2===Z&&(te=D[N.charCodeAt(q)]<<2|D[N.charCodeAt(q+1)]>>4,de[ee++]=255&te),1===Z&&(te=D[N.charCodeAt(q)]<<10|D[N.charCodeAt(q+1)]<<4|D[N.charCodeAt(q+2)]>>2,de[ee++]=te>>8&255,de[ee++]=255&te),de},k.fromByteArray=function(N){for(var te,q=N.length,B=q%3,O=[],Z=16383,de=0,ee=q-B;de<ee;de+=Z)O.push(F(N,de,de+Z>ee?ee:de+Z));return 1===B?O.push(G[(te=N[q-1])>>2]+G[te<<4&63]+"=="):2===B&&O.push(G[(te=(N[q-2]<<8)+N[q-1])>>10]+G[te>>4&63]+G[te<<2&63]+"="),O.join("")};for(var G=[],D=[],z="undefined"!=typeof Uint8Array?Uint8Array:Array,R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,_=R.length;y<_;++y)G[y]=R[y],D[R.charCodeAt(y)]=y;function m($){var N=$.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var te=$.indexOf("=");return-1===te&&(te=N),[te,te===N?0:4-te%4]}function F($,N,te){for(var B,O=[],Z=N;Z<te;Z+=3)O.push(G[(B=($[Z]<<16&16711680)+($[Z+1]<<8&65280)+(255&$[Z+2]))>>18&63]+G[B>>12&63]+G[B>>6&63]+G[63&B]);return O.join("")}D["-".charCodeAt(0)]=62,D["_".charCodeAt(0)]=63},function(Ne,k){k.read=function(Q,G,D,z,R){var y,_,m=8*R-z-1,F=(1<<m)-1,$=F>>1,N=-7,te=D?R-1:0,q=D?-1:1,B=Q[G+te];for(te+=q,y=B&(1<<-N)-1,B>>=-N,N+=m;N>0;y=256*y+Q[G+te],te+=q,N-=8);for(_=y&(1<<-N)-1,y>>=-N,N+=z;N>0;_=256*_+Q[G+te],te+=q,N-=8);if(0===y)y=1-$;else{if(y===F)return _?NaN:1/0*(B?-1:1);_+=Math.pow(2,z),y-=$}return(B?-1:1)*_*Math.pow(2,y-z)},k.write=function(Q,G,D,z,R,y){var _,m,F,$=8*y-R-1,N=(1<<$)-1,te=N>>1,q=23===R?Math.pow(2,-24)-Math.pow(2,-77):0,B=z?0:y-1,O=z?1:-1,Z=G<0||0===G&&1/G<0?1:0;for(G=Math.abs(G),isNaN(G)||G===1/0?(m=isNaN(G)?1:0,_=N):(_=Math.floor(Math.log(G)/Math.LN2),G*(F=Math.pow(2,-_))<1&&(_--,F*=2),(G+=_+te>=1?q/F:q*Math.pow(2,1-te))*F>=2&&(_++,F/=2),_+te>=N?(m=0,_=N):_+te>=1?(m=(G*F-1)*Math.pow(2,R),_+=te):(m=G*Math.pow(2,te-1)*Math.pow(2,R),_=0));R>=8;Q[D+B]=255&m,B+=O,m/=256,R-=8);for(_=_<<R|m,$+=R;$>0;Q[D+B]=255&_,B+=O,_/=256,$-=8);Q[D+B-O]|=128*Z}},function(Ne,k){var Q={}.toString;Ne.exports=Array.isArray||function(G){return"[object Array]"==Q.call(G)}},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.default=function(z){var R=z.jws,y=z.KeyUtil,_=z.X509,m=z.crypto,F=z.hextob64u,$=z.b64tohex,N=z.AllowedSigningAlgs;return function(){function te(){!function(B,O){if(!(B instanceof O))throw new TypeError("Cannot call a class as a function")}(this,te)}return te.parseJwt=function(B){G.Log.debug("JoseUtil.parseJwt");try{var O=R.JWS.parse(B);return{header:O.headerObj,payload:O.payloadObj}}catch(Z){G.Log.error(Z)}},te.validateJwt=function(B,O,Z,de,ee,ie,X){G.Log.debug("JoseUtil.validateJwt");try{if("RSA"===O.kty)if(O.e&&O.n)O=y.getKey(O);else{if(!O.x5c||!O.x5c.length)return G.Log.error("JoseUtil.validateJwt: RSA key missing key material",O),Promise.reject(new Error("RSA key missing key material"));var ve=$(O.x5c[0]);O=_.getPublicKeyFromCertHex(ve)}else{if("EC"!==O.kty)return G.Log.error("JoseUtil.validateJwt: Unsupported key type",O&&O.kty),Promise.reject(new Error(O.kty));if(!(O.crv&&O.x&&O.y))return G.Log.error("JoseUtil.validateJwt: EC key missing key material",O),Promise.reject(new Error("EC key missing key material"));O=y.getKey(O)}return te._validateJwt(B,O,Z,de,ee,ie,X)}catch(we){return G.Log.error(we&&we.message||we),Promise.reject("JWT validation failed")}},te.validateJwtAttributes=function(B,O,Z,de,ee,ie){de||(de=0),ee||(ee=parseInt(Date.now()/1e3));var X=te.parseJwt(B).payload;if(!X.iss)return G.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(X.iss!==O)return G.Log.error("JoseUtil._validateJwt: Invalid issuer in token",X.iss),Promise.reject(new Error("Invalid issuer in token: "+X.iss));if(!X.aud)return G.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(X.aud===Z||Array.isArray(X.aud)&&X.aud.indexOf(Z)>=0))return G.Log.error("JoseUtil._validateJwt: Invalid audience in token",X.aud),Promise.reject(new Error("Invalid audience in token: "+X.aud));if(X.azp&&X.azp!==Z)return G.Log.error("JoseUtil._validateJwt: Invalid azp in token",X.azp),Promise.reject(new Error("Invalid azp in token: "+X.azp));if(!ie){var ve=ee+de,we=ee-de;if(!X.iat)return G.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(ve<X.iat)return G.Log.error("JoseUtil._validateJwt: iat is in the future",X.iat),Promise.reject(new Error("iat is in the future: "+X.iat));if(X.nbf&&ve<X.nbf)return G.Log.error("JoseUtil._validateJwt: nbf is in the future",X.nbf),Promise.reject(new Error("nbf is in the future: "+X.nbf));if(!X.exp)return G.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(X.exp<we)return G.Log.error("JoseUtil._validateJwt: exp is in the past",X.exp),Promise.reject(new Error("exp is in the past:"+X.exp))}return Promise.resolve(X)},te._validateJwt=function(B,O,Z,de,ee,ie,X){return te.validateJwtAttributes(B,Z,de,ee,ie,X).then(function(ve){try{return R.JWS.verify(B,O,N)?ve:(G.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(we){return G.Log.error(we&&we.message||we),Promise.reject(new Error("signature validation failed"))}})},te.hashString=function(B,O){try{return m.Util.hashString(B,O)}catch(Z){G.Log.error(Z)}},te.hexToBase64Url=function(B){try{return F(B)}catch(O){G.Log.error(O)}},te}()};var G=Q(0);Ne.exports=k.default},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.SigninResponse=void 0;var G=function(){function R(y,_){for(var m=0;m<_.length;m++){var F=_[m];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(y,F.key,F)}}return function(y,_,m){return _&&R(y.prototype,_),m&&R(y,m),y}}(),D=Q(3);function z(R,y){if(!(R instanceof y))throw new TypeError("Cannot call a class as a function")}k.SigninResponse=function(){function R(y){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";z(this,R);var m=D.UrlUtility.parseUrlFragment(y,_);this.error=m.error,this.error_description=m.error_description,this.error_uri=m.error_uri,this.code=m.code,this.state=m.state,this.id_token=m.id_token,this.session_state=m.session_state,this.access_token=m.access_token,this.token_type=m.token_type,this.scope=m.scope,this.profile=void 0,this.expires_in=m.expires_in}return G(R,[{key:"expires_in",get:function(){if(this.expires_at){var _=parseInt(Date.now()/1e3);return this.expires_at-_}},set:function(_){var m=parseInt(_);if("number"==typeof m&&m>0){var F=parseInt(Date.now()/1e3);this.expires_at=F+m}}},{key:"expired",get:function(){var _=this.expires_in;if(void 0!==_)return _<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),R}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.SignoutRequest=void 0;var G=Q(0),D=Q(3),z=Q(9);k.SignoutRequest=function R(y){var _=y.url,m=y.id_token_hint,F=y.post_logout_redirect_uri,$=y.data,N=y.extraQueryParams,te=y.request_type;if(function(O,Z){if(!(O instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,R),!_)throw G.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var q in m&&(_=D.UrlUtility.addQueryParam(_,"id_token_hint",m)),F&&(_=D.UrlUtility.addQueryParam(_,"post_logout_redirect_uri",F),$&&(this.state=new z.State({data:$,request_type:te}),_=D.UrlUtility.addQueryParam(_,"state",this.state.id))),N)_=D.UrlUtility.addQueryParam(_,q,N[q]);this.url=_}},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.SignoutResponse=void 0;var G=Q(3);k.SignoutResponse=function D(z){!function(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}(this,D);var R=G.UrlUtility.parseUrlFragment(z,"?");this.error=R.error,this.error_description=R.error_description,this.error_uri=R.error_uri,this.state=R.state}},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.InMemoryWebStorage=void 0;var G=function(){function z(R,y){for(var _=0;_<y.length;_++){var m=y[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(R,m.key,m)}}return function(R,y,_){return y&&z(R.prototype,y),_&&z(R,_),R}}(),D=Q(0);k.InMemoryWebStorage=function(){function z(){(function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")})(this,z),this._data={}}return z.prototype.getItem=function(y){return D.Log.debug("InMemoryWebStorage.getItem",y),this._data[y]},z.prototype.setItem=function(y,_){D.Log.debug("InMemoryWebStorage.setItem",y),this._data[y]=_},z.prototype.removeItem=function(y){D.Log.debug("InMemoryWebStorage.removeItem",y),delete this._data[y]},z.prototype.key=function(y){return Object.getOwnPropertyNames(this._data)[y]},G(z,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),z}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.UserManager=void 0;var G=function(){function Z(de,ee){for(var ie=0;ie<ee.length;ie++){var X=ee[ie];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(de,X.key,X)}}return function(de,ee,ie){return ee&&Z(de.prototype,ee),ie&&Z(de,ie),de}}(),D=Q(0),z=Q(10),R=Q(39),y=Q(15),_=Q(45),m=Q(47),F=Q(18),$=Q(8),N=Q(20),te=Q(11),q=Q(4);function B(Z,de){if(!(Z instanceof de))throw new TypeError("Cannot call a class as a function")}function O(Z,de){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!de||"object"!=typeof de&&"function"!=typeof de?Z:de}k.UserManager=function(Z){function de(){var ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ie=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.SilentRenewService,X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.SessionMonitor,ve=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N.TokenRevocationClient,we=arguments.length>4&&void 0!==arguments[4]?arguments[4]:te.TokenClient,Se=arguments.length>5&&void 0!==arguments[5]?arguments[5]:q.JoseUtil;B(this,de),ee instanceof R.UserManagerSettings||(ee=new R.UserManagerSettings(ee));var ne=O(this,Z.call(this,ee));return ne._events=new _.UserManagerEvents(ee),ne._silentRenewService=new ie(ne),ne.settings.automaticSilentRenew&&(D.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),ne.startSilentRenew()),ne.settings.monitorSession&&(D.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),ne._sessionMonitor=new X(ne)),ne._tokenRevocationClient=new ve(ne._settings),ne._tokenClient=new we(ne._settings),ne._joseUtil=Se,ne}return function(ie,X){if("function"!=typeof X&&null!==X)throw new TypeError("Super expression must either be null or a function, not "+typeof X);ie.prototype=Object.create(X&&X.prototype,{constructor:{value:ie,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(ie,X):ie.__proto__=X)}(de,Z),de.prototype.getUser=function(){var ie=this;return this._loadUser().then(function(X){return X?(D.Log.info("UserManager.getUser: user loaded"),ie._events.load(X,!1),X):(D.Log.info("UserManager.getUser: user not found in storage"),null)})},de.prototype.removeUser=function(){var ie=this;return this.storeUser(null).then(function(){D.Log.info("UserManager.removeUser: user removed from storage"),ie._events.unload()})},de.prototype.signinRedirect=function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(ie=Object.assign({},ie)).request_type="si:r",this._signinStart(ie,this._redirectNavigator,{useReplaceToNavigate:ie.useReplaceToNavigate}).then(function(){D.Log.info("UserManager.signinRedirect: successful")})},de.prototype.signinRedirectCallback=function(ie){return this._signinEnd(ie||this._redirectNavigator.url).then(function(X){return X.profile&&X.profile.sub?D.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",X.profile.sub):D.Log.info("UserManager.signinRedirectCallback: no sub"),X})},de.prototype.signinPopup=function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(ie=Object.assign({},ie)).request_type="si:p";var X=ie.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return X?(ie.redirect_uri=X,ie.display="popup",this._signin(ie,this._popupNavigator,{startUrl:X,popupWindowFeatures:ie.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:ie.popupWindowTarget||this.settings.popupWindowTarget}).then(function(ve){return ve&&(ve.profile&&ve.profile.sub?D.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",ve.profile.sub):D.Log.info("UserManager.signinPopup: no sub")),ve})):(D.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},de.prototype.signinPopupCallback=function(ie){return this._signinCallback(ie,this._popupNavigator).then(function(X){return X&&(X.profile&&X.profile.sub?D.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",X.profile.sub):D.Log.info("UserManager.signinPopupCallback: no sub")),X}).catch(function(X){D.Log.error(X.message)})},de.prototype.signinSilent=function(){var ie=this,X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return X=Object.assign({},X),this._loadUser().then(function(ve){return ve&&ve.refresh_token?(X.refresh_token=ve.refresh_token,ie._useRefreshToken(X)):(X.request_type="si:s",X.id_token_hint=X.id_token_hint||ie.settings.includeIdTokenInSilentRenew&&ve&&ve.id_token,ve&&ie._settings.validateSubOnSilentRenew&&(D.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",ve.profile.sub),X.current_sub=ve.profile.sub),ie._signinSilentIframe(X))})},de.prototype._useRefreshToken=function(){var ie=this;return this._tokenClient.exchangeRefreshToken(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).then(function(ve){return ve?ve.access_token?ie._loadUser().then(function(we){if(we){var Se=Promise.resolve();return ve.id_token&&(Se=ie._validateIdTokenFromTokenRefreshToken(we.profile,ve.id_token)),Se.then(function(){return D.Log.debug("UserManager._useRefreshToken: refresh token response success"),we.id_token=ve.id_token||we.id_token,we.access_token=ve.access_token,we.refresh_token=ve.refresh_token||we.refresh_token,we.expires_in=ve.expires_in,ie.storeUser(we).then(function(){return ie._events.load(we),we})})}return null}):(D.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(D.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},de.prototype._validateIdTokenFromTokenRefreshToken=function(ie,X){var ve=this;return this._metadataService.getIssuer().then(function(we){return ve.settings.getEpochTime().then(function(Se){return ve._joseUtil.validateJwtAttributes(X,we,ve._settings.client_id,ve._settings.clockSkew,Se).then(function(ne){return ne?ne.sub!==ie.sub?(D.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):ne.auth_time&&ne.auth_time!==ie.auth_time?(D.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):ne.azp&&ne.azp!==ie.azp?(D.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!ne.azp&&ie.azp?(D.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(D.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},de.prototype._signinSilentIframe=function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},X=ie.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return X?(ie.redirect_uri=X,ie.prompt=ie.prompt||"none",this._signin(ie,this._iframeNavigator,{startUrl:X,silentRequestTimeout:ie.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ve){return ve&&(ve.profile&&ve.profile.sub?D.Log.info("UserManager.signinSilent: successful, signed in sub: ",ve.profile.sub):D.Log.info("UserManager.signinSilent: no sub")),ve})):(D.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},de.prototype.signinSilentCallback=function(ie){return this._signinCallback(ie,this._iframeNavigator).then(function(X){return X&&(X.profile&&X.profile.sub?D.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",X.profile.sub):D.Log.info("UserManager.signinSilentCallback: no sub")),X})},de.prototype.signinCallback=function(ie){var X=this;return this.readSigninResponseState(ie).then(function(ve){var we=ve.state;return"si:r"===we.request_type?X.signinRedirectCallback(ie):"si:p"===we.request_type?X.signinPopupCallback(ie):"si:s"===we.request_type?X.signinSilentCallback(ie):Promise.reject(new Error("invalid response_type in state"))})},de.prototype.signoutCallback=function(ie,X){var ve=this;return this.readSignoutResponseState(ie).then(function(we){var Se=we.state,ne=we.response;return Se?"so:r"===Se.request_type?ve.signoutRedirectCallback(ie):"so:p"===Se.request_type?ve.signoutPopupCallback(ie,X):Promise.reject(new Error("invalid response_type in state")):ne})},de.prototype.querySessionStatus=function(){var ie=this,X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(X=Object.assign({},X)).request_type="si:s";var ve=X.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return ve?(X.redirect_uri=ve,X.prompt="none",X.response_type=X.response_type||this.settings.query_status_response_type,X.scope=X.scope||"openid",X.skipUserInfo=!0,this._signinStart(X,this._iframeNavigator,{startUrl:ve,silentRequestTimeout:X.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(we){return ie.processSigninResponse(we.url).then(function(Se){if(D.Log.debug("UserManager.querySessionStatus: got signin response"),Se.session_state&&Se.profile.sub)return D.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",Se.profile.sub),{session_state:Se.session_state,sub:Se.profile.sub,sid:Se.profile.sid};D.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(Se){if(Se.session_state&&ie.settings.monitorAnonymousSession&&("login_required"==Se.message||"consent_required"==Se.message||"interaction_required"==Se.message||"account_selection_required"==Se.message))return D.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:Se.session_state};throw Se})})):(D.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},de.prototype._signin=function(ie,X){var ve=this;return this._signinStart(ie,X,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(Se){return ve._signinEnd(Se.url,ie)})},de.prototype._signinStart=function(ie,X){var ve=this,we=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X.prepare(we).then(function(Se){return D.Log.debug("UserManager._signinStart: got navigator window handle"),ve.createSigninRequest(ie).then(function(ne){return D.Log.debug("UserManager._signinStart: got signin request"),we.url=ne.url,we.id=ne.state.id,Se.navigate(we)}).catch(function(ne){throw Se.close&&(D.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),Se.close()),ne})})},de.prototype._signinEnd=function(ie){var X=this,ve=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(ie).then(function(we){D.Log.debug("UserManager._signinEnd: got signin response");var Se=new y.User(we);if(ve.current_sub){if(ve.current_sub!==Se.profile.sub)return D.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",Se.profile.sub),Promise.reject(new Error("login_required"));D.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return X.storeUser(Se).then(function(){return D.Log.debug("UserManager._signinEnd: user stored"),X._events.load(Se),Se})})},de.prototype._signinCallback=function(ie,X){D.Log.debug("UserManager._signinCallback");var ve="query"===this._settings.response_mode||!this._settings.response_mode&&$.SigninRequest.isCode(this._settings.response_type)?"?":"#";return X.callback(ie,void 0,ve)},de.prototype.signoutRedirect=function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(ie=Object.assign({},ie)).request_type="so:r";var X=ie.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return X&&(ie.post_logout_redirect_uri=X),this._signoutStart(ie,this._redirectNavigator,{useReplaceToNavigate:ie.useReplaceToNavigate}).then(function(){D.Log.info("UserManager.signoutRedirect: successful")})},de.prototype.signoutRedirectCallback=function(ie){return this._signoutEnd(ie||this._redirectNavigator.url).then(function(X){return D.Log.info("UserManager.signoutRedirectCallback: successful"),X})},de.prototype.signoutPopup=function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(ie=Object.assign({},ie)).request_type="so:p";var X=ie.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return ie.post_logout_redirect_uri=X,ie.display="popup",ie.post_logout_redirect_uri&&(ie.state=ie.state||{}),this._signout(ie,this._popupNavigator,{startUrl:X,popupWindowFeatures:ie.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:ie.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){D.Log.info("UserManager.signoutPopup: successful")})},de.prototype.signoutPopupCallback=function(ie,X){return void 0===X&&"boolean"==typeof ie&&(X=ie,ie=null),this._popupNavigator.callback(ie,X,"?").then(function(){D.Log.info("UserManager.signoutPopupCallback: successful")})},de.prototype._signout=function(ie,X){var ve=this;return this._signoutStart(ie,X,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(Se){return ve._signoutEnd(Se.url)})},de.prototype._signoutStart=function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},X=this,we=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(we).then(function(Se){return D.Log.debug("UserManager._signoutStart: got navigator window handle"),X._loadUser().then(function(ne){return D.Log.debug("UserManager._signoutStart: loaded current user from storage"),(X._settings.revokeAccessTokenOnSignout?X._revokeInternal(ne):Promise.resolve()).then(function(){var ke=ie.id_token_hint||ne&&ne.id_token;return ke&&(D.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),ie.id_token_hint=ke),X.removeUser().then(function(){return D.Log.debug("UserManager._signoutStart: user removed, creating signout request"),X.createSignoutRequest(ie).then(function(wt){return D.Log.debug("UserManager._signoutStart: got signout request"),we.url=wt.url,wt.state&&(we.id=wt.state.id),Se.navigate(we)})})})}).catch(function(ne){throw Se.close&&(D.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),Se.close()),ne})})},de.prototype._signoutEnd=function(ie){return this.processSignoutResponse(ie).then(function(X){return D.Log.debug("UserManager._signoutEnd: got signout response"),X})},de.prototype.revokeAccessToken=function(){var ie=this;return this._loadUser().then(function(X){return ie._revokeInternal(X,!0).then(function(ve){if(ve)return D.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),X.access_token=null,X.refresh_token=null,X.expires_at=null,X.token_type=null,ie.storeUser(X).then(function(){D.Log.debug("UserManager.revokeAccessToken: user stored"),ie._events.load(X)})})}).then(function(){D.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},de.prototype._revokeInternal=function(ie,X){var ve=this;if(ie){var Se=ie.refresh_token;return this._revokeAccessTokenInternal(ie.access_token,X).then(function(ne){return ve._revokeRefreshTokenInternal(Se,X).then(function(ke){return ne||ke||D.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),ne||ke})})}return Promise.resolve(!1)},de.prototype._revokeAccessTokenInternal=function(ie,X){return!ie||ie.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(ie,X).then(function(){return!0})},de.prototype._revokeRefreshTokenInternal=function(ie,X){return ie?this._tokenRevocationClient.revoke(ie,X,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},de.prototype.startSilentRenew=function(){this._silentRenewService.start()},de.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},de.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(ie){return ie?(D.Log.debug("UserManager._loadUser: user storageString loaded"),y.User.fromStorageString(ie)):(D.Log.debug("UserManager._loadUser: no user storageString"),null)})},de.prototype.storeUser=function(ie){if(ie){D.Log.debug("UserManager.storeUser: storing user");var X=ie.toStorageString();return this._userStore.set(this._userStoreKey,X)}return D.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},G(de,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),de}(z.OidcClient)},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.UserManagerSettings=void 0;var G=function(){function te(q,B){for(var O=0;O<B.length;O++){var Z=B[O];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(q,Z.key,Z)}}return function(q,B,O){return B&&te(q.prototype,B),O&&te(q,O),q}}(),D=(Q(0),Q(5)),z=Q(40),R=Q(41),y=Q(43),_=Q(6),m=Q(1),F=Q(8);function $(te,q){if(!(te instanceof q))throw new TypeError("Cannot call a class as a function")}function N(te,q){if(!te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!q||"object"!=typeof q&&"function"!=typeof q?te:q}k.UserManagerSettings=function(te){function q(){var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},O=B.popup_redirect_uri,Z=B.popup_post_logout_redirect_uri,de=B.popupWindowFeatures,ee=B.popupWindowTarget,ie=B.silent_redirect_uri,X=B.silentRequestTimeout,ve=B.automaticSilentRenew,we=void 0!==ve&&ve,Se=B.validateSubOnSilentRenew,ne=void 0!==Se&&Se,ke=B.includeIdTokenInSilentRenew,wt=void 0===ke||ke,yt=B.monitorSession,hn=void 0===yt||yt,bt=B.monitorAnonymousSession,Gt=void 0!==bt&&bt,Jt=B.checkSessionInterval,ot=void 0===Jt?2e3:Jt,Le=B.stopCheckSessionOnError,Ft=void 0===Le||Le,Cn=B.query_status_response_type,wn=B.revokeAccessTokenOnSignout,Dn=void 0!==wn&&wn,Pt=B.accessTokenExpiringNotificationTime,_r=void 0===Pt?60:Pt,Vn=B.redirectNavigator,lt=void 0===Vn?new z.RedirectNavigator:Vn,ft=B.popupNavigator,bn=void 0===ft?new R.PopupNavigator:ft,L=B.iframeNavigator,w=void 0===L?new y.IFrameNavigator:L,E=B.userStore,Y=void 0===E?new _.WebStorageStateStore({store:m.Global.sessionStorage}):E;$(this,q);var re=N(this,te.call(this,arguments[0]));return re._popup_redirect_uri=O,re._popup_post_logout_redirect_uri=Z,re._popupWindowFeatures=de,re._popupWindowTarget=ee,re._silent_redirect_uri=ie,re._silentRequestTimeout=X,re._automaticSilentRenew=we,re._validateSubOnSilentRenew=ne,re._includeIdTokenInSilentRenew=wt,re._accessTokenExpiringNotificationTime=_r,re._monitorSession=hn,re._monitorAnonymousSession=Gt,re._checkSessionInterval=ot,re._stopCheckSessionOnError=Ft,re._query_status_response_type=Cn||(arguments[0]&&arguments[0].response_type?F.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":"id_token"),re._revokeAccessTokenOnSignout=Dn,re._redirectNavigator=lt,re._popupNavigator=bn,re._iframeNavigator=w,re._userStore=Y,re}return function(O,Z){if("function"!=typeof Z&&null!==Z)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);O.prototype=Object.create(Z&&Z.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(O,Z):O.__proto__=Z)}(q,te),G(q,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),q}(D.OidcClientSettings)},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.RedirectNavigator=void 0;var G=function(){function z(R,y){for(var _=0;_<y.length;_++){var m=y[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(R,m.key,m)}}return function(R,y,_){return y&&z(R.prototype,y),_&&z(R,_),R}}(),D=Q(0);k.RedirectNavigator=function(){function z(){!function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}(this,z)}return z.prototype.prepare=function(){return Promise.resolve(this)},z.prototype.navigate=function(y){return y&&y.url?(y.useReplaceToNavigate?window.location.replace(y.url):window.location=y.url,Promise.resolve()):(D.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},G(z,[{key:"url",get:function(){return window.location.href}}]),z}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.PopupNavigator=void 0;var G=Q(0),D=Q(42);k.PopupNavigator=function(){function z(){!function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}(this,z)}return z.prototype.prepare=function(y){var _=new D.PopupWindow(y);return Promise.resolve(_)},z.prototype.callback=function(y,_,m){G.Log.debug("PopupNavigator.callback");try{return D.PopupWindow.notifyOpener(y,_,m),Promise.resolve()}catch(F){return Promise.reject(F)}},z}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.PopupWindow=void 0;var G=function(){function R(y,_){for(var m=0;m<_.length;m++){var F=_[m];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(y,F.key,F)}}return function(y,_,m){return _&&R(y.prototype,_),m&&R(y,m),y}}(),D=Q(0),z=Q(3);k.PopupWindow=function(){function R(y){var _=this;(function(N,te){if(!(N instanceof te))throw new TypeError("Cannot call a class as a function")})(this,R),this._promise=new Promise(function($,N){_._resolve=$,_._reject=N}),this._popup=window.open("",y.popupWindowTarget||"_blank",y.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;"),this._popup&&(D.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return R.prototype.navigate=function(_){return this._popup?_&&_.url?(D.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=_.id,this._id&&(window["popupCallback_"+_.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=_.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},R.prototype._success=function(_){D.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(_)},R.prototype._error=function(_){D.Log.error("PopupWindow.error: ",_),this._cleanup(),this._reject(new Error(_))},R.prototype.close=function(){this._cleanup(!1)},R.prototype._cleanup=function(_){D.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!_&&this._popup.close(),this._popup=null},R.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},R.prototype._callback=function(_,m){this._cleanup(m),_?(D.Log.debug("PopupWindow.callback success"),this._success({url:_})):(D.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},R.notifyOpener=function(_,m,F){if(window.opener){if(_=_||window.location.href){var $=z.UrlUtility.parseUrlFragment(_,F);if($.state){var te=window.opener["popupCallback_"+$.state];te?(D.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),te(_,m)):D.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else D.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else D.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},G(R,[{key:"promise",get:function(){return this._promise}}]),R}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.IFrameNavigator=void 0;var G=Q(0),D=Q(44);k.IFrameNavigator=function(){function z(){!function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}(this,z)}return z.prototype.prepare=function(y){var _=new D.IFrameWindow(y);return Promise.resolve(_)},z.prototype.callback=function(y){G.Log.debug("IFrameNavigator.callback");try{return D.IFrameWindow.notifyParent(y),Promise.resolve()}catch(_){return Promise.reject(_)}},z}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.IFrameWindow=void 0;var G=function(){function z(R,y){for(var _=0;_<y.length;_++){var m=y[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(R,m.key,m)}}return function(R,y,_){return y&&z(R.prototype,y),_&&z(R,_),R}}(),D=Q(0);k.IFrameWindow=function(){function z(R){var y=this;(function(m,F){if(!(m instanceof F))throw new TypeError("Cannot call a class as a function")})(this,z),this._promise=new Promise(function(_,m){y._resolve=_,y._reject=m}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return z.prototype.navigate=function(y){if(y&&y.url){var _=y.silentRequestTimeout||1e4;D.Log.debug("IFrameWindow.navigate: Using timeout of:",_),this._timer=window.setTimeout(this._timeout.bind(this),_),this._frame.src=y.url}else this._error("No url provided");return this.promise},z.prototype._success=function(y){this._cleanup(),D.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(y)},z.prototype._error=function(y){this._cleanup(),D.Log.error(y),this._reject(new Error(y))},z.prototype.close=function(){this._cleanup()},z.prototype._cleanup=function(){this._frame&&(D.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},z.prototype._timeout=function(){D.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},z.prototype._message=function(y){if(D.Log.debug("IFrameWindow.message"),this._timer&&y.origin===this._origin&&y.source===this._frame.contentWindow&&"string"==typeof y.data&&(y.data.startsWith("http://")||y.data.startsWith("https://"))){var _=y.data;_?this._success({url:_}):this._error("Invalid response from frame")}},z.notifyParent=function(y){D.Log.debug("IFrameWindow.notifyParent"),(y=y||window.location.href)&&(D.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(y,location.protocol+"//"+location.host))},G(z,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),z}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.UserManagerEvents=void 0;var G=Q(0),D=Q(16),z=Q(17);k.UserManagerEvents=function(R){function y(_){!function($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}(this,y);var m=function($,N){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||"object"!=typeof N&&"function"!=typeof N?$:N}(this,R.call(this,_));return m._userLoaded=new z.Event("User loaded"),m._userUnloaded=new z.Event("User unloaded"),m._silentRenewError=new z.Event("Silent renew error"),m._userSignedIn=new z.Event("User signed in"),m._userSignedOut=new z.Event("User signed out"),m._userSessionChanged=new z.Event("User session changed"),m}return function(m,F){if("function"!=typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function, not "+typeof F);m.prototype=Object.create(F&&F.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(m,F):m.__proto__=F)}(y,R),y.prototype.load=function(m){var F=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];G.Log.debug("UserManagerEvents.load"),R.prototype.load.call(this,m),F&&this._userLoaded.raise(m)},y.prototype.unload=function(){G.Log.debug("UserManagerEvents.unload"),R.prototype.unload.call(this),this._userUnloaded.raise()},y.prototype.addUserLoaded=function(m){this._userLoaded.addHandler(m)},y.prototype.removeUserLoaded=function(m){this._userLoaded.removeHandler(m)},y.prototype.addUserUnloaded=function(m){this._userUnloaded.addHandler(m)},y.prototype.removeUserUnloaded=function(m){this._userUnloaded.removeHandler(m)},y.prototype.addSilentRenewError=function(m){this._silentRenewError.addHandler(m)},y.prototype.removeSilentRenewError=function(m){this._silentRenewError.removeHandler(m)},y.prototype._raiseSilentRenewError=function(m){G.Log.debug("UserManagerEvents._raiseSilentRenewError",m.message),this._silentRenewError.raise(m)},y.prototype.addUserSignedIn=function(m){this._userSignedIn.addHandler(m)},y.prototype.removeUserSignedIn=function(m){this._userSignedIn.removeHandler(m)},y.prototype._raiseUserSignedIn=function(){G.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},y.prototype.addUserSignedOut=function(m){this._userSignedOut.addHandler(m)},y.prototype.removeUserSignedOut=function(m){this._userSignedOut.removeHandler(m)},y.prototype._raiseUserSignedOut=function(){G.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},y.prototype.addUserSessionChanged=function(m){this._userSessionChanged.addHandler(m)},y.prototype.removeUserSessionChanged=function(m){this._userSessionChanged.removeHandler(m)},y.prototype._raiseUserSessionChanged=function(){G.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},y}(D.AccessTokenEvents)},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.Timer=void 0;var G=function(){function m(F,$){for(var N=0;N<$.length;N++){var te=$[N];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(F,te.key,te)}}return function(F,$,N){return $&&m(F.prototype,$),N&&m(F,N),F}}(),D=Q(0),z=Q(1),R=Q(17);function y(m,F){if(!(m instanceof F))throw new TypeError("Cannot call a class as a function")}function _(m,F){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||"object"!=typeof F&&"function"!=typeof F?m:F}k.Timer=function(m){function F($){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Global.timer,te=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;y(this,F);var q=_(this,m.call(this,$));return q._timer=N,q._nowFunc=te||function(){return Date.now()/1e3},q}return function(N,te){if("function"!=typeof te&&null!==te)throw new TypeError("Super expression must either be null or a function, not "+typeof te);N.prototype=Object.create(te&&te.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(N,te):N.__proto__=te)}(F,m),F.prototype.init=function(N){N<=0&&(N=1),N=parseInt(N);var te=this.now+N;if(this.expiration===te&&this._timerHandle)D.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),D.Log.debug("Timer.init timer "+this._name+" for duration:",N),this._expiration=te;var q=5;N<q&&(q=N),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*q)}},F.prototype.cancel=function(){this._timerHandle&&(D.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},F.prototype._callback=function(){D.Log.debug("Timer.callback; "+this._name+" timer expires in:",this._expiration-this.now),this._expiration<=this.now&&(this.cancel(),m.prototype.raise.call(this))},G(F,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),F}(R.Event)},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.SilentRenewService=void 0;var G=Q(0);k.SilentRenewService=function(){function D(z){(function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")})(this,D),this._userManager=z}return D.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(R){}).catch(function(R){G.Log.error("SilentRenewService.start: Error from getUser:",R.message)}))},D.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},D.prototype._tokenExpiring=function(){var R=this;this._userManager.signinSilent().then(function(y){G.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(y){G.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",y.message),R._userManager.events._raiseSilentRenewError(y)})},D}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.CordovaPopupNavigator=void 0;var G=Q(21);k.CordovaPopupNavigator=function(){function D(){!function(R,y){if(!(R instanceof y))throw new TypeError("Cannot call a class as a function")}(this,D)}return D.prototype.prepare=function(R){var y=new G.CordovaPopupWindow(R);return Promise.resolve(y)},D}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.CordovaIFrameNavigator=void 0;var G=Q(21);k.CordovaIFrameNavigator=function(){function D(){!function(R,y){if(!(R instanceof y))throw new TypeError("Cannot call a class as a function")}(this,D)}return D.prototype.prepare=function(R){R.popupWindowFeatures="hidden=yes";var y=new G.CordovaPopupWindow(R);return Promise.resolve(y)},D}()},function(Ne,k,Q){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.Version="1.11.5"}])}},xs=>{xs(xs.s=976)}]);